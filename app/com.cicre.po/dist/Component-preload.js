//@ui5-bundle com/cicre/po/Component-preload.js
sap.ui.require.preload({
	"com/cicre/po/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","com/cicre/po/model/models"],function(e,i,t){"use strict";return e.extend("com.cicre.po.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(t.createDeviceModel(),"device")}})});
},
	"com/cicre/po/controller/App.controller.js":function(){
sap.ui.define(["com/cicre/po/controller/BaseController","sap/ui/model/json/JSONModel"],function(e,t){"use strict";return e.extend("com.cicre.po.controller.App",{onInit:function(){var e,o,r=this.getView().getBusyIndicatorDelay();e=new t({busy:true,delay:0});this.setModel(e,"appView");o=function(){e.setProperty("/busy",false);e.setProperty("/delay",r)}}})});
},
	"com/cicre/po/controller/BaseController.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment"],function(e,t,o,i,a,r,l){"use strict";return e.extend("com.cicre.po.controller.BaseController",{oldmodelvalue:"",WBSCode:"",WBSCodeGroup:"",getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},onNavBack:function(e){var o,i;o=t.getInstance();i=o.getPreviousHash();if(i!==undefined){window.history.go(-1)}else{this.getRouter().navTo("RouteWorkList",{},true)}},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},IndexMonth:function(){this.currentYear=(new Date).getFullYear();this.afterfivecurrentYear=(new Date).getFullYear()-5;this.years=[];for(var e=this.afterfivecurrentYear;e<=this.currentYear;e++){for(var t=1;t<=12;t++){this.years.push({id:t+"-"+this.afterfivecurrentYear,text:t+"-"+this.afterfivecurrentYear,issort:this.afterfivecurrentYear})}++this.afterfivecurrentYear}this.years=this.years.sort((e,t)=>t.issort-e.issort)},onShareEmailPress:function(){var e=this.getModel("objectView")||this.getModel("worklistView");sap.m.URLHelper.triggerEmail(null,e.getProperty("/shareSendEmailSubject"),e.getProperty("/shareSendEmailMessage"))},onchangeCurrency:function(){this.getView().getModel("localJson").setProperty("/Currency",this.getView().byId("idCurrency").getValue());if(this.getView().byId("idCurrency").getValue()==="USD"){this.CustomCurrency=2}else{this.CustomCurrency=2}},onChangeAmount:function(e){var t=this.getView().byId("idEstimatedServicesTable").getModel("localJson");var o=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var i=parseInt(o[2]);var a=t.getProperty("/EstimatedContracts/"+i);a.Amount=parseFloat(a.Amount).toFixed(this.CustomCurrency);t.setProperty("/EstimatedContracts/"+i,a);t.refresh(true);this.ContractValueHeader()},onDisplaySearchProjDialogFailre:function(){if(!this._oProjDialogF){this._oProjDialogF=sap.ui.xmlfragment("com.cicre.po.view.fragments.ProjSearchDialog",this);this._oProjDialogF.setModel(this.getView().getModel())}this._oProjDialogF.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Zone");var i=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);t.push(o);t.push(i);t.push(a);this._oProjDialogF.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchProj:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Zone");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var l=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var s=[];s.push(o);s.push(i);s.push(a);s.push(r);this._oProjDialogF.bindAggregation("items",{path:"/ValueHelpSet",template:l,filters:s})},onSelectProjList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.sProjj=e.getObject().IdNumber;sap.ui.getCore().byId("idSearchByProjectt").setValue(e.getObject().IdText)})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onListDeletePress:function(e){var t=false;var o;if(e.getSource){o=e.getSource();t=true}else{o=this.byId(e)}var i=o.getParent().getParent();if(o.getIcon()=="sap-icon://delete"&&t){o.setIcon("sap-icon://decline");o.setTooltip(this.getResourceBundle().getText("attachmentCancel"));i.setMode("Delete")}else{o.setIcon("sap-icon://delete");o.setTooltip(this.getResourceBundle().getText("attachmentDelete"));i.setMode("None")}},BuildD:function(e){var t=this;var o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/selectedBuilding")));var i=JSON.parse(JSON.stringify(o));var a=JSON.parse(JSON.stringify(t.myBuildingSet));var r=0;var l=0;var s=[];var n=[];var d=sap.ui.getCore().byId("IdBuildingTable").getModel("localJson").oData.BuildingSet;$.each(i,function(e,i){$.each(a,function(a,s){if(i.Model===s.Model&&i.Group===s.Group){r=r+1;l=l+1;if(l>=2){$.each(d,function(e,t){if(i.Model===t.Model&&i.Group===t.Group){sap.ui.getCore().byId("IdBuildingTable").getItems()[e].setSelected(false);sap.m.MessageToast.show("Model and  Boq is already added!");l=0}});t.myBuildingSet.splice(a,1);o.splice(e,1);t.getView().getModel("localJson").setProperty("/selectedBuilding",o)}}});r=0});if(r>1){$.each(d,function(t,o){if(e.Model===o.Model&&e.Group===o.Group){sap.ui.getCore().byId("IdBuildingTable").getItems()[t].setSelected(false);sap.m.MessageToast.show("Model and  Boq is already added!")}})}},onDisplaySearchContractRefrence:function(){if(!this._ContractDescDialog){this._ContractDescDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ContractDescriptionDialog",this);this._ContractDescDialog.setModel(this.getView().getModel())}this._ContractDescDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"ContDesc2");t.push(o);this._ContractDescDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchContract:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"ContDesc");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];r.push(o);r.push(i);this._ContractDescDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:r})},onSelectContractList:function(e){var t=this,o=e.getParameters().id;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.ContractCode=e.getObject().IdNumber;t.getView().byId("idSearchByContract").setValue(e.getObject().IdText)})}else{t.ContractCode="";t.getView().byId("idSearchByContract").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},ch_SearchByContract:function(){this.ContractCode="";this.getView().byId("idSearchByContract").setValue("")},ch_SearchByVendor:function(){this.sSearchVendor="";this.getView().byId("idSearchByVendor").setValue("")},onContractValueHelpPressc:function(e){var t=this,o=t.getOwnerComponent().getModel(),i=t.getView().getModel("localJson"),a=[];this.getView().getModel("localJson").setProperty("/ContractPOHeaderSet",[]);var r=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.RefrenceContractTable",this);if(!this._oContractValueHelpDialog){this._oContractValueHelpDialog=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.RefrenceContractValueHelpFilterBar",this);this._oContractValueHelpDialog.setTable(r);this.getView().addDependent(this._oContractValueHelpDialog)}this._oContractValueHelpDialog.open()},onContractValueHelpPress:function(e){var t=this.getModel("refreneContractColumnsModel"),o=t.getData().cols,i=e.getSource().getId();if(e.getSource().getBindingContext("localJson")){var a=e.getSource().getBindingContext("localJson").getPath()}var r=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.RefrenceContractTable",this);r.setModel(this.getModel("localJson"));r.setModel(t,"columns");if(r.bindRows){r.bindAggregation("rows","/ContractPOHeaderSet")}if(r.bindItems){r.bindAggregation("items","/ContractPOHeaderSet",function(){return new sap.m.ColumnListItem({cells:o.map(function(e){return new sap.m.Label({text:"{"+e.template+"}"})})})})}if(!this._oContractValueHelpDialog){this._oContractValueHelpDialog=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.RefrenceContractValueHelpFilterBar",this);this._oContractValueHelpDialog.setTable(r);if(i.lastIndexOf("idRefrenceContrac")>-1){r.setSelectionMode("MultiToggle");this.selectedContractPath=""}else if(i.lastIndexOf("idCreateContract")>-1){this.selectedContractPath="/ContractPOHeaderSet";r.setSelectionMode("Single")}else{this.selectedContractPath=a;r.setSelectionMode("Single")}this.getView().addDependent(this._oContractValueHelpDialog)}this.getModel("localJson").setProperty("/ContractPOHeaderSet",[]);this.getModel("localJson").refresh();this._oContractValueHelpDialog.open()},onContractFilterBarSearch:function(){},onboqValueHelpPress:function(){if(!this._BoqDialog){this._BoqDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.selectBoqDialog",this);this._BoqDialog.setModel(this.getView().getModel())}this._BoqDialog.open();var e=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,this.oldmodelvalue);var t=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sCoCode);var o=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var i=new sap.m.StandardListItem({title:"{BoqSub}",description:"{BoqDesc}"});var a=[];a.push(e);a.push(t);a.push(o);this._BoqDialog.bindAggregation("items",{path:"/BoqSubItemSet",template:i,filters:a})},handleSearchBoq:function(e){if(!this._BoqDialog){this._BoqDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.selectBoqDialog",this);this._BoqDialog.setModel(this.getView().getModel())}this._BoqDialog.open();var t=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,this.oldmodelvalue);var o=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sCoCode);var i=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.m.StandardListItem({title:"{BoqSub}",description:"{BoqDesc}"});var r=[];r.push(t);r.push(o);r.push(i);this._BoqDialog.bindAggregation("items",{path:"/BoqSubItemSet",template:a,filters:r})},onSelectBoqList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.BoqAll=e.getObject().BoqSub;t.BoqDescAll=e.getObject().BoqDesc;t.getView().byId("idhandboq").setValue(e.getObject().BoqDesc);t.onlistofPress()})}else{t.BoqAll="";t.getView().byId("idhandboq").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onlistofPress:function(){var e=this,t=this.getView().getModel("localJson"),o=t.getProperty("/BuildingSet");$.each(o,function(t,o){o.BoqDesc=e.BoqDescAll;o.Group=e.BoqAll});t.setProperty("/BuildingSet",o)},onContractValueHelpOkPress:function(){var e=this,t=this.getModel("localJson"),o=this.getModel("localJson"),i=this._oContractValueHelpDialog.getTable().getSelectedIndices(),a=[],r=[];for(var l=0;l<i.length;l++){var s=this._oContractValueHelpDialog.getTable().getContextByIndex(i[l]).getObject();a.push(s);r.push(s.PurchDoc)}if(this.selectedContractPath===""){t.setProperty("/Contracts",a);e.selectedRefContracts=r;var n=e.selectedRefContracts.join();e.getView().byId("idRefrenceContract").setValue(n);t.refresh()}else if(this.selectedContractPath==="/ContractNo"){if(a.length!=0){o.setProperty(this.selectedContractPath,a[0].PurchDoc);o.refresh();this.byId("idCreateContract").fireChange()}}else{if(a.length!=0){o.setProperty(this.selectedContractPath+"/ContractReference",a[0].PurchDoc);o.refresh()}}this.onContractValueHelpCancelPress()},onContractValueHelpCancelPress:function(){this._oContractValueHelpDialog.close();this._oContractValueHelpDialog.destroy();this._oContractValueHelpDialog=null;this.ContractCode="";this.sSearchVendor=""},onContractFilterBarSearch:function(){var e=this,t=e.getModel("localJson"),o=e.getOwnerComponent().getModel();var i=e.getView().byId("RefrenceContractTable");var a=new sap.ui.model.Filter("PoNumber",sap.ui.model.FilterOperator.EQ,this.ContractCode);var r=new sap.ui.model.Filter("Vendor",sap.ui.model.FilterOperator.EQ,this.sSearchVendor);var l=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sCoCode);var s=new sap.ui.model.Filter("PurchOrg",sap.ui.model.FilterOperator.EQ,this.sPOrg);var n=new sap.ui.model.Filter("PurGroup",sap.ui.model.FilterOperator.EQ,this.sPGrp);var d=new sap.ui.model.Filter("Flag",sap.ui.model.FilterOperator.EQ,"X");var u=new sap.ui.model.Filter("TempStatus",sap.ui.model.FilterOperator.EQ,"R");var g=[];if(this.ContractCode.length>0){g.push(a)}if(this.sSearchVendor.length>0&&this.getView().byId("idSearchByVendor").getValue()!==""){g.push(r)}if(this.sCoCode.length>0){g.push(l)}if(this.sPOrg.length>0){g.push(s)}if(this.sPGrp.length>0){g.push(n)}g.push(d);g.push(u);o.read("/ContractPOHeaderSet",{filters:g,async:false,method:"GET",success:function(e){t.setProperty("/ContractPOHeaderSet",e.results);t.refresh()},error:function(){}});t.refresh()},_oMessagePopover:null,onPressMessagePopover:function(e){if(!this._oMessagePopover){this._oMessagePopover=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.MessagePopover",this);this.getView().addDependent(this._oMessagePopover)}this._oMessagePopover.toggle(e.getSource())},async onWBSSelectionValueHelpPress(e){this.WBSCode="";this.WBSCodeGroup="";var t=this,o=t.getOwnerComponent().getModel(),i=t.getView().getModel("localJson"),a=[];i.setProperty("/WBSSet",[]);var r=this.getView();var s="com.cicre.po.view.fragments.SelectMultiWBSDialogTable";l.load({id:r.getId(),name:s,controller:this}).then(function(e){return l.load({id:r.getId(),name:"com.cicre.po.view.fragments.SelectMultiWBSDialoge",controller:t}).then(function(o){t._contractDialog=o;t._contractDialog.setTable(e);r.addDependent(t._contractDialog);return t._contractDialog})}).then(function(e){e.open()}).catch(function(e){sap.m.MessageBox.error("Error loading WBS dialog: "+e.message)});this.getView().getModel("localJson").setProperty("/selectGroupBoq",false);t.aContexts=[];t.Boqs=[];t.BUBoQs=[];t.WBSBoQs=[];this.getView().getModel("localJson").setProperty("/selectGroupBoq",false);t.aContexts=[];t.Boqs=[];t.BUBoQs=[];t.WBSBoQs=[]},handleSearchWBSPress:function(){var e=this,t=e.getOwnerComponent().getModel(),o=e.getView().getModel("localJson"),i=[];this.getView().getModel("localJson").setProperty("/WBSSet",[]);var a=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"WBS");var r=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var l=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.WBSCode);var n=new sap.ui.model.Filter("SelectionParameter7",sap.ui.model.FilterOperator.EQ,this.WBSCodeGroup);i.push(a);i.push(r);if(this.sProjectCode!=""){i.push(l)}if(this.WBSCode.length>0){i.push(s)}if(this.WBSCodeGroup.length>0){i.push(n)}var d="/ValueHelpSet";var u=t.bindList(d,undefined,undefined,i);u.requestContexts(0,100).then(function(t){var o=t.map(e=>e.getObject());o.forEach(e=>{e.Group="";e.Model=e.IdNumber});e.getView().getModel("localJson").setProperty("/WBSSet",o);if(e.WBSCodeGroup.length>0){e.getView().getModel("localJson").setProperty("/selectGroupBoq",true)}e.getView().getModel("localJson").refresh(true)}).catch(function(e){sap.m.MessageToast.show("Error fetching data");console.error(e)});e.aContexts=[];e.Boqs=[];e.BUBoQs=[];e.WBSBoQs=[]},onVHContractOk:function(){var e=this,t=this.getModel("localJson"),o=this.getModel("localJson"),i=this._contractDialog.getTable().getSelectedIndices(),a=[],r=[];for(var l=0;l<i.length;l++){var s=this._contractDialog.getTable().getContextByIndex(i[l]).getObject();a.push(s)}t.setProperty("/Contracts",a);t.refresh();this.onWBSContractClose()},onWBSContractClose:function(e){this._contractDialog.close();this._contractDialog.destroy();this._contractDialog=null},onBuildingSelectionValueHelpPressc:function(e){var t=this,o=t.getOwnerComponent().getModel(),i=t.getView().getModel("localJson"),a=[];this.getView().getModel("localJson").setProperty("/BuildingSet",[]);var r=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.SelectMultiBuildingTable",this);if(!this._BuildinDialog){this._BuildinDialog=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.SelectMultiBuildingDialoge",this);this._BuildinDialog.setTable(r);this.getView().addDependent(this._BuildinDialog);t.aContexts=[];t.Boqs=[];t.BUBoQs=[]}this._BuildinDialog.open()},onBuildingContractClose:function(){this._BuildinDialog.close();this._BuildinDialog.destroy();this._BuildinDialog=null;this.Building="";this.ModelCode="";this.sProjj="";this.sProj="";this.GroupCodee="";this.GroupCode=""},cleanProjDialog:function(){this.sProjj="";this.sProj="";this.getView().byId("idSearchByProject").setValue("")},cleanSearchModel:function(){this.getView().getModel("localJson").setProperty("/selectBoq",false);this.oldmodelvalue="";this.ModelCode="";this.getView().byId("idSearchByModel").setValue("")},cleanSearGroup:function(){this.GroupCodee="";this.GroupCode="";this.getView().byId("idSearchByGroup").setValue("")},cleanSearBuilding:function(){this.Building="";this.getView().byId("_IdBuilding").setValue("")},handleOpenViewSheet:function(e){var t=e.getSource();if(!this._View2Sheet){this._View2Sheet=sap.ui.xmlfragment("com.cicre.po.view.fragments.ViewSheetDialog",this);this.getView().addDependent(this._View2Sheet)}this._View2Sheet.openBy(t)},addcontractualsc1:function(){this.getModel("localJso").setProperty("/ViewCon1",false);this.getModel("localJso").setProperty("/ViewCon2",true);this.getModel("localJso").setProperty("/ViewCon3",true)},addcontractualsc2:function(){var e=this;e.ViewCon="V2";this.Consoliatedservicesall();this.getModel("localJso").setProperty("/ViewCon1",true);this.getModel("localJso").setProperty("/ViewCon4",false);this.getModel("localJso").setProperty("/ViewCon2",false);this.getModel("localJso").setProperty("/ViewCon3",true);e.getView().setBusy(false)},addcontractualsc3:function(){this.ViewCon="V3";this.Consoliatedservicesall();this.getModel("localJso").setProperty("/ViewCon1",true);this.getModel("localJso").setProperty("/ViewCon2",true);this.getModel("localJso").setProperty("/ViewCon3",false)},onDisplaySearGroupfilter:function(e){var t=this,o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet"))),i=this.getModel("localJson");var l={},s=[],n=[],d=[],u=false;if(this.ModelCodefilter.length>0)s.push(new a("Model",r.EQ,this.ModelCodefilter));if(this.BuildingCodefilter.length>0)s.push(new a("BuildingNo",r.EQ,this.BuildingCodefilter));if(this.ZoneCodefilter.length>0)s.push(new a("Project",r.EQ,this.ZoneCodefilter));this.byId("IdBuildingTable_copy").setVisibleRowCount(this.getModel("localJson").getProperty("/copymyBuildingSet").length);this.byId("IdBuildingTable_copy").getBinding("rows").filter(s);this.byId("IdBuildingTable_copy").refreshRows();var g=this.byId("IdBuildingTable_copy").getBinding("rows").getCurrentContexts();g.map(function(e){n.push(JSON.parse(JSON.stringify(i.getProperty(e.getPath()))))});var c=JSON.parse(JSON.stringify(n));n.map(function(e){u=false;l.Zzgroup=e.Zzgroup;l.GroupTxt=e.GroupTxt;l.BuildingNo=e.BuildingNo;l.Zzgroupr=e.Zzgroup+"R";c.map(function(e){if(e.Zzgroup===l.Zzgroup&&l.Zzgroup!=""){u=true;var t=false;e.Zzgroup=l.Zzgroupr}});if(u){d.push(JSON.parse(JSON.stringify(l)));c=c.filter(function(e){return e.Zzgroup!==l.Zzgroupr})}for(var t in l){delete l[t]}});i.setProperty("/Groupfilter",d);if(this._GroupDialogg){this._GroupDialogg.destroy();this._GroupDialogg=null}if(!this._GroupDialogg){this._GroupDialogg=sap.ui.xmlfragment("com.cicre.po.view.fragments.groupSearchDialogfilter",this);this.getView().addDependent(this._GroupDialogg)}var p=new sap.m.StandardListItem({title:"{localJson>Zzgroup}",description:"{localJson>GroupTxt}",type:"Active"});this._GroupDialogg.bindAggregation("items",{path:"localJson>/Groupfilter",template:p,templateShareable:false});this._GroupDialogg.open()},handleSearchGroupfilter:function(e){var t=this;var o=e.getParameter("value");var i=new sap.ui.model.Filter("Zzgroup",sap.ui.model.FilterOperator.Contains,o);var a=new sap.m.StandardListItem({title:"{localJson>Zzgroup}",description:"{localJson>GroupTxt}",type:"Active"});var r=[];if(o!==""){r.push(i)}this._GroupDialogg.bindAggregation("items",{path:"localJson>/Groupfilter",template:a,filters:r,templateShareable:false})},onSearchGroupfilter:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.GroupCodefilter=e.getObject().Zzgroup;t.getView().byId("onSearchGroupfilter").setValue(e.getObject().GroupTxt)})}else{t.GroupCodefilter="";t.getView().byId("onSearchGroupfilter").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchModelfilter:function(e){var t=this,o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet"))),i=this.getModel("localJson"),l=this.getModel("localJso"),s=[],n=[],d={},u=[],g=false;this.modelId=e.getParameters().id;if(this.BuildingCodefilter.length>0)s.push(new a("BuildingNo",r.EQ,this.BuildingCodefilter));if(this.GroupCodefilter.length>0)s.push(new a("Zzgroup",r.EQ,this.GroupCodefilter));if(this.ZoneCodefilter.length>0)s.push(new a("Project",r.EQ,this.ZoneCodefilter));this.byId("IdBuildingTable_copy").setVisibleRowCount(this.getModel("localJson").getProperty("/copymyBuildingSet").length);this.byId("IdBuildingTable_copy").getBinding("rows").filter(s);this.byId("IdBuildingTable_copy").refreshRows();var c=this.byId("IdBuildingTable_copy").getBinding("rows").getCurrentContexts();c.map(function(e){n.push(JSON.parse(JSON.stringify(i.getProperty(e.getPath()))))});var p=JSON.parse(JSON.stringify(n));n.map(function(e){g=false;d.Model=e.Model;d.ModelDesc=e.ModelDesc;d.BuildingNo=e.BuildingNo;d.Modelr=e.Model+"R";p.map(function(e){if(e.Model===d.Model&&d.Model!=""){g=true;var t=false;e.Model=d.Modelr}});if(g){u.push(JSON.parse(JSON.stringify(d)));p=p.filter(function(e){return e.Model!==d.Modelr})}for(var t in d){delete d[t]}});i.setProperty("/Modelfilter",u);if(this._ModelDialogfilter){this._ModelDialogfilter.destroy();this._ModelDialogfilter=null}if(!this._ModelDialogfilter){this._ModelDialogfilter=sap.ui.xmlfragment("com.cicre.po.view.fragments.ModelDialogfilter",this);this.getView().addDependent(this._ModelDialogfilter)}var h=new sap.m.StandardListItem({title:"{localJson>ModelDesc}",description:"{localJson>Model}",type:"Active"});this._ModelDialogfilter.bindAggregation("items",{path:"localJson>/Modelfilter",template:h,templateShareable:false});this._ModelDialogfilter.open()},handleSearchModelfilter:function(e){var t=this;var o=e.getParameter("value");var i=new sap.ui.model.Filter("Model",sap.ui.model.FilterOperator.Contains,o);var a=new sap.m.StandardListItem({title:"{localJson>ModelDesc}",description:"{localJson>Model}",type:"Active"});var r=[];if(o!==""){r.push(i)}this._ModelDialogfilter.bindAggregation("items",{path:"localJson>/Modelfilter",template:a,filters:r,templateShareable:false})},onSearchModelfilter:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){if(t.modelId==="__component0---object--idSearchByModelFilter"){t.ModelCodeFilter=e.getObject().Model;t.getView().byId("idSearchByModelFilter").setValue(e.getObject().ModelDesc)}else{t.ModelCodefilter=e.getObject().Model;t.getView().byId("onSearchModelfilter_Id").setValue(e.getObject().ModelDesc)}})}else{if(t.modelId==="__component0---object--idSearchByModelFilter"){t.ModelCodeFilter="";sap.m.MessageToast.show("No new item was selected.")}else{t.ModelCodefilter="";t.getView().byId("onSearchModelfilter_Id").setValue("")}}e.getSource().getBinding("items").filter([])},onDisplaySearchModelfilterOnBuilding:function(e){var t=this,o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet"))),i=this.getModel("localJson"),a=this.getModel("localJso"),r=[],l=[],s={},n=[],d=false,u=a.getProperty("/Buildingss");this.modelId=e.getParameters().id;t.getModel("localJson").setProperty("/copymyBuildingSet",o);if(u.length>0){u.map(function(e){r.push(new sap.ui.model.Filter("BuildingNo",sap.ui.model.FilterOperator.EQ,e.BuildingNo))})}this.byId("IdBuildingTable_copy").setVisibleRowCount(this.getModel("localJson").getProperty("/copymyBuildingSet").length);this.byId("IdBuildingTable_copy").getBinding("rows").filter(r);this.byId("IdBuildingTable_copy").refreshRows();var g=this.byId("IdBuildingTable_copy").getBinding("rows").getCurrentContexts();g.map(function(e){l.push(JSON.parse(JSON.stringify(i.getProperty(e.getPath()))))});var c=JSON.parse(JSON.stringify(l));l.map(function(e){d=false;s.Model=e.Model;s.ModelDesc=e.ModelDesc;s.BuildingNo=e.BuildingNo;s.Modelr=e.Model+"R";c.map(function(e){if(e.Model===s.Model&&s.Model!=""){d=true;var t=false;e.Model=s.Modelr}});if(d){n.push(JSON.parse(JSON.stringify(s)));c=c.filter(function(e){return e.Model!==s.Modelr})}for(var t in s){delete s[t]}});i.setProperty("/Modelfilter",n);if(this._ModelDialogfilter){this._ModelDialogfilter.destroy();this._ModelDialogfilter=null}if(!this._ModelDialogfilter){this._ModelDialogfilter=sap.ui.xmlfragment("com.cicre.po.view.fragments.ModelDialogfilterBuilding",this);this.getView().addDependent(this._ModelDialogfilter)}var p=new sap.m.StandardListItem({title:"{localJson>ModelDesc}",description:"{localJson>Model}",type:"Active"});this._ModelDialogfilter.bindAggregation("items",{path:"localJson>/Modelfilter",template:p,templateShareable:false});this._ModelDialogfilter.open()},handleSearchModelBuilding:function(e){var t=this;var o=e.getParameter("value");var i=new sap.ui.model.Filter("Model",sap.ui.model.FilterOperator.Contains,o);var a=new sap.m.StandardListItem({title:"{localJson>ModelDesc}",description:"{localJson>Model}",type:"Active"});var r=[];if(o!==""){r.push(i)}this._ModelDialogfilter.bindAggregation("items",{path:"localJson>/Modelfilter",template:a,filters:r,templateShareable:false})},onSelectModelListBuilding:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.ModelCodeFilter=e.getObject().Model;t.getView().byId("idSearchByModelFilter").setValue(e.getObject().ModelDesc)})}else{if(t.modelId==="__component0---object--idSearchByModelFilter"){t.ModelCodeFilter="";sap.m.MessageToast.show("No new item was selected.")}else{t.ModelCodefilter="";t.getView().byId("onSearchModelfilter_Id").setValue("")}}e.getSource().getBinding("items").filter([])},changeBuildingfilter:function(){this.ModelCodefilter="";this.getView().byId("idSearchByModelFilter").setValue("")},onDisplaySearchZone:function(e){var t=this,o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet"))),i=this.getModel("localJson");var l={},s=[],n=false,d=[],u=[];if(this.ModelCodefilter.length>0)d.push(new a("Model",r.EQ,this.ModelCodefilter));if(this.BuildingCodefilter.length>0)d.push(new a("BuildingNo",r.EQ,this.BuildingCodefilter));if(this.GroupCodefilter.length>0)d.push(new a("Zzgroup",r.EQ,this.GroupCodefilter));this.byId("IdBuildingTable_copy").setVisibleRowCount(this.getModel("localJson").getProperty("/copymyBuildingSet").length);this.byId("IdBuildingTable_copy").getBinding("rows").filter(d);this.byId("IdBuildingTable_copy").refreshRows();var g=this.byId("IdBuildingTable_copy").getBinding("rows").getCurrentContexts();g.map(function(e){u.push(JSON.parse(JSON.stringify(i.getProperty(e.getPath()))))});var c=JSON.parse(JSON.stringify(u));u.map(function(e){n=false;l.Project=e.Project;l.ZoneTxt=e.ZoneTxt;l.BuildingNo=e.BuildingNo;l.Projectr=e.Project+"R";c.map(function(e){if(e.Project===l.Project&&l.Project!=""){n=true;e.Project=l.Projectr}});if(n){s.push(JSON.parse(JSON.stringify(l)));c=c.filter(function(e){return e.Project!==l.Projectr})}for(var t in l){delete l[t]}});i.setProperty("/Zonefilter",s);if(this._ZoneDialogfilter){this._ZoneDialogfilter.destroy();this._ZoneDialogfilter=null}if(!this._ZoneDialogfilter){this._ZoneDialogfilter=sap.ui.xmlfragment("com.cicre.po.view.fragments.ZoneSearchDialogfilter",this);this.getView().addDependent(this._ZoneDialogfilter)}var p=new sap.m.StandardListItem({title:"{localJson>ZoneTxt}",description:"{localJson>Project}",type:"Active"});this._ZoneDialogfilter.bindAggregation("items",{path:"localJson>/Zonefilter",template:p,templateShareable:false});this._ZoneDialogfilter.open()},handleSearchZonefilter:function(e){var t=this;var o=e.getParameter("value");var i=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.Contains,o);var a=new sap.m.StandardListItem({title:"{localJson>ZoneTxt}",description:"{localJson>Project}",type:"Active"});var r=[];if(o!==""){r.push(i)}this._ZoneDialogfilter.bindAggregation("items",{path:"localJson>/Zonefilter",template:a,filters:r,templateShareable:false})},onSearchZonefilter:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.ZoneCodefilter=e.getObject().Project;t.getView().byId("onSearchZonefilter_Id").setValue(e.getObject().ZoneTxt)})}else{t.ZoneCodefilter="";t.getView().byId("onSearchZonefilter_Id").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearBuildingfilter:function(e){var t=this,o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet"))),i=this.getModel("localJson");var l={},s=JSON.parse(JSON.stringify(o)),n=[],d=[],u=[],g=false;if(this.ModelCodefilter.length>0)d.push(new a("Model",r.EQ,this.ModelCodefilter));if(this.GroupCodefilter.length>0)d.push(new a("Zzgroup",r.EQ,this.GroupCodefilter));if(this.ZoneCodefilter.length>0)d.push(new a("Project",r.EQ,this.ZoneCodefilter));this.byId("IdBuildingTable_copy").setVisibleRowCount(this.getModel("localJson").getProperty("/copymyBuildingSet").length);this.byId("IdBuildingTable_copy").getBinding("rows").filter(d);this.byId("IdBuildingTable_copy").refreshRows();var c=this.byId("IdBuildingTable_copy").getBinding("rows").getCurrentContexts();c.map(function(e){u.push(JSON.parse(JSON.stringify(i.getProperty(e.getPath()))))});var s=JSON.parse(JSON.stringify(u));u.map(function(e){g=false;l.BuildingTxt=e.BuildingTxt;l.BuildingNo=e.BuildingNo;l.BuildingNor=e.BuildingNo+"R";s.map(function(e){if(e.BuildingNo===l.BuildingNo&&l.BuildingNo!=""){g=true;e.BuildingNo=l.BuildingNor}});if(g){n.push(JSON.parse(JSON.stringify(l)));s=s.filter(function(e){return e.BuildingNo!==l.BuildingNor})}for(var t in l){delete l[t]}});i.setProperty("/Buildingfilter",n);if(this._BuildingDialogfilter){this._BuildingDialogfilter.destroy();this._BuildingDialogfilter=null}if(!this._BuildingDialogfilter){this._BuildingDialogfilter=sap.ui.xmlfragment("com.cicre.po.view.fragments.BuildingSearchDialogfilter",this);this.getView().addDependent(this._BuildingDialogfilter)}var p=new sap.m.StandardListItem({title:"{localJson>BuildingTxt}",description:"{localJson>BuildingNo}",type:"Active"});this._BuildingDialogfilter.bindAggregation("items",{path:"localJson>/Buildingfilter",template:p,templateShareable:false});this._BuildingDialogfilter.open()},handleSearchBilddingfilter:function(e){var t=this;var o=e.getParameter("value");var i=new sap.ui.model.Filter("BuildingTxt",sap.ui.model.FilterOperator.Contains,o);var a=new sap.ui.model.Filter("BuildingNo",sap.ui.model.FilterOperator.Contains,o);var r=new sap.m.StandardListItem({title:"{localJson>BuildingTxt}",description:"{localJson>BuildingNo}",type:"Active"});var l=[];if(o!==""){l.push(i)}if(o!==""){l.push(a)}this._BuildingDialogfilter.bindAggregation("items",{path:"localJson>/Buildingfilter",template:r,filters:l,templateShareable:false})},onSearchBuildingfilter:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.BuildingCodefilter=e.getObject().BuildingNo;t.getView().byId("onSearchBildingfilter_Id").setValue(e.getObject().BuildingTxt)})}else{t.BuildingCodefilter="";t.getView().byId("onSearchBildingfilter_Id").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},changeModel:function(){this.ModelCodefilter="";that.getView().byId("onSearchModelfilter_Id").setValue("")},changeZone:function(){this.ZoneCodefilter="";that.getView().byId("onSearchZonefilter_Id").setValue("")},changeGroup:function(){this.GroupCodefilter="";that.getView().byId("onSearchGroupfilter").setValue("")},changeBuilding:function(){this.BuildingCodefilter="";that.getView().byId("onSearchBildingfilter_Id").setValue("")},onFilterServices:function(e){this.ViewCon="V";if(e.getParameters().id==="__component0---object--forBBuildingConsulidatedItemSet"){this.getModel("localJso").setProperty("/ViewCon4",false);this.getModel("localJso").setProperty("/ViewCon2",false)}this.selectedTableId=e.getSource().getParent().getParent().getId().substring(e.getSource().getParent().getParent().getId().lastIndexOf("-")+1);if(!this._filterDialog){this._filterDialog=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.FilterServices",this);this.getView().addDependent(this._filterDialog)}this._filterDialog.open()},onBuildingValueHelpPress:function(){var e=this,t=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/myBuildingSet")));e.getModel("localJson").setProperty("/copymyBuildingSet",t);if(e.sProjectCode!==""&&e.sCoCode!==""){var o=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.BuildingValueHelpFilterBarTable",this);if(!this._oBuildingValueHelpDialog){this._oBuildingValueHelpDialog=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.BuildingValueHelpFilterBarDialog",this);this._oBuildingValueHelpDialog.setTable(o);this.getView().addDependent(this._oBuildingValueHelpDialog)}this._oBuildingValueHelpDialog.open();if(e._oBuildingValueHelpDialog.getModel("localJson")){this.getView().getModel("localJson").setProperty("/BuildingFilterSet",[]);this.getView().getModel("localJson").setProperty("/WBSFilterSet",[]);this.getView().getModel("localJson").setProperty("/BuildingWBSFilterSet",[])}}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}},CancelPressBuilding:function(){this.ModelCodefilter="";this.ZoneCodefilter="";this.GroupCodefilter="";this.BuildingCodefilter="";this._oBuildingValueHelpDialog.close();this._oBuildingValueHelpDialog.destroy();this._oBuildingValueHelpDialog=null},onDisplaySearchModel:function(e){this.idSelectModel=e.getSource().getId();if(!this._ModelDialogFilter){this._ModelDialogFilter=sap.ui.xmlfragment("com.cicre.po.view.fragments.ModelSearchDialog",this);this._ModelDialogFilter.setModel(this.getView().getModel())}this._ModelDialogFilter.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Model");var a=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var l=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.sProj);var s=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.EQ,this.Building);var n=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.Contains,this.GroupCode);o.push(i);o.push(a);o.push(r);if(this.sProj.length>0){o.push(l)}if(this.Building.length>0){o.push(s)}if(this.GroupCode.length>0){o.push(n)}this._ModelDialogFilter.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:o})},handleSearchModel:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Model");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var l=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.sProj);var s=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.EQ,this.Building);var n=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.Contains,this.GroupCode);var d=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var u=[];u.push(o);if(this.sCoCode.length>0){u.push(i)}if(this.sProj.length>0){u.push(l)}if(this.sProjectCode.length>0){u.push(a)}if(t.length>0){u.push(r)}if(this.Building.length>0){u.push(s)}if(this.GroupCode.length>0){u.push(n)}this._ModelDialogFilter.bindAggregation("items",{path:"/ValueHelpSet",template:d,filters:u})},onSelectModelList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){if(t.idSelectModel.substring(t.idSelectModel.lastIndexOf("-")+1)==="idSearchByModel"){t.ModelCodee=e.getObject().IdNumber;t.getView().byId("idSearchByModel").setValue(e.getObject().IdText)}else if(t.idSelectModel.substring(t.idSelectModel.lastIndexOf("-")+1)==="idSearchByModelFilter"){t.ModelCodeFilter=e.getObject().IdNumber;t.getView().byId("idSearchByModelFilter").setValue(e.getObject().IdText)}else{t.getView().byId("idSearchByModel").setValue(e.getObject().IdText)}})}else{t.ModelCodee="";t.getView().byId("idSearchByModel").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},handleSearchBuildingPressFilter:function(){var e=this,t=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/myBuildingSet"))),o=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/myWBSSet"))),i=this.getView().byId("idBuildingCategory").getSelectedKeys(),a=e.getOwnerComponent().getModel(),e=this,r=false,l=[],s=[];i.map(function(i){if(i=="BUILD"){var a=[];if(e.GroupCodefilter.length<3&&e.GroupCodefilter.length!=0){e.GroupCodefilter="0"+e.GroupCodefilter}var n=e.getOwnerComponent().getModel();var d=new sap.ui.model.Filter("Zone",sap.ui.model.FilterOperator.EQ,e.ZoneCodefilter);var u=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,e.sCoCode);var g=new sap.ui.model.Filter("BuildingNo",sap.ui.model.FilterOperator.EQ,e.BuildingCodefilter);var c=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,e.sProjectCode);var p=new sap.ui.model.Filter("Group",sap.ui.model.FilterOperator.EQ,e.GroupCodefilter);var h=new sap.ui.model.Filter("Model",sap.ui.model.FilterOperator.EQ,e.ModelCodefilter);if(e.ZoneCodefilter!=="")a.push(d);if(e.BuildingCodefilter!=="")a.push(g);if(e.GroupCodefilter!==""){a.push(p)}if(e.ModelCodefilter!==""){a.push(h)}a.push(u);a.push(c);n.read("/BuildingSet",{filters:a,success:function(o){$.each(o.results,function(e,t){var o={BuildingNo:t.BuildingNo,ModelDesc:t.ModelDesc,Model:"00000"+t.Model,Group:t.Group};l.push(o)});$.each(t,function(e,t){var o=false;$.each(l,function(e,i){if(i.BuildingNo===t.BuildingNo){o=true;$.each(s,function(e,t){if(i.BuildingNo===t.BuildingNo)o=false})}});if(o){s.push(t)}});e.getView().getModel("localJson").setProperty("/BuildingFilterSet",s)},error:function(e){sap.m.MessageToast.show("Error")}})}if(i=="WBS"){if(e.sProjectCode!==""&&e.sCoCode!==""){var n=e.getView().getModel();var a=[];var d=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"WBS");var u=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,e.sCoCode);var g=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,e.sProjectCode);a.push(d);a.push(u);a.push(g);n.read("/ValueHelpSet",{filters:a,success:function(t){r=true;$.each(t.results,function(e,o){t.results[e].Group="";t.results[e].Model=t.results[e].IdNumber});$.each(t.results,function(e,t){var o={BuildingNo:t.IdNumber,ModelDesc:t.IdText,Model:t.IdNumber};l.push(o)});$.each(o,function(e,t){var o=false;$.each(l,function(e,i){if(i.BuildingNo===t.BuildingNo){o=true}$.each(s,function(e,t){if(i.BuildingNo===t.BuildingNo)o=false})});if(o){s.push(t)}});var i=JSON.parse(JSON.stringify(l));e.getView().getModel("localJson").setProperty("/BuildingFilterSet",s)},error:function(e){sap.m.MessageToast.show("Error")}})}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}}})},onBuildingValueHelpOkPress:function(){var e=this.getModel("localJso"),t=this._oBuildingValueHelpDialog.getTable().getSelectedIndices(),o=[];if(t.length>0){for(var i=0;i<t.length;i++){var a=this._oBuildingValueHelpDialog.getTable().getContextByIndex(t[i]).getObject();o.push(a)}e.setProperty("/Buildingss",o);e.refresh()}this.CancelPressBuilding()},onApplyFilter:function(){var e=this;var t=[],o=[],i=this.getModel("localJso"),a=i.getProperty("/Buildingss"),r=this.getView().getModel("localJson"),l=this.byId("idFContractualIndicator").getSelectedKeys(),s="00000"+e.ModelCodeFilter;if(a.length>0){a.map(function(e){t.push(new sap.ui.model.Filter("Buildingno",sap.ui.model.FilterOperator.EQ,e.BuildingNo))})}if(l.length>0){l.map(function(e){t.push(new sap.ui.model.Filter("ContractualIndicator",sap.ui.model.FilterOperator.EQ,e))})}if(s!=="00000"){t.push(new sap.ui.model.Filter("Model",sap.ui.model.FilterOperator.EQ,s))}if(this.getModel("localJso").getProperty("/ViewCon3")==false){var n="idConsuliatedTableGroup"}if(this.getModel("localJso").getProperty("/ViewCon2")==false){var n="idConsuliatedTable"}e.Consoliatedservicesall();if(this._filterDialog){this._filterDialog.destroy();this._filterDialog=null}},onClearFilter:function(e){var t=this;var o=this.getModel("localJson");var i=this.getModel("localJso");o.refresh();this.byId("idFContractualIndicator").setSelectedKeys();o.setProperty("/Buildingss",[]);i.setProperty("/Buildingss",[]);t.ModelCodeFilter="";i.refresh();t.Consoliatedservicesall();if(this.getModel("localJso").getProperty("/ViewCon2")==="false"){var a="idConsuliatedTable"}else{a="idConsuliatedTableGroup"}if(this._filterDialog){this._filterDialog.destroy();this._filterDialog=null}},groupConsolidscreen2:function(e){var t={},o=JSON.parse(JSON.stringify(e)),i=[],a=this.getModel("localJson"),r=false;e.map(function(e){r=false;t.ContractualIndicator=e.ContractualIndicator;t.Boq=e.Boq;t.sortNum=e.sortNum;t.Data=e.Data;t.LongDesc=e.LongDesc;t.ShortDesc=e.ShortDesc;t.Uom=e.Uom;t.Qty=0;t.Eancat=e.Eancat;t.PriceUnit=e.PriceUnit;t.Txt=e.Txt;t.ContractualIndicatorr=e.ContractualIndicator+"R";t.Datar=e.Data+"R";t.Txtr=e.Txt+"R";t.MatlGroup=e.MatlGroup;t.Amount=0;t.Buildings=[];o.map(function(e){if(e.Data===t.Data&&e.Txt===t.Txt){r=true;var o=false;t.Amount+=parseFloat(e.Amount);t.Qty+=parseFloat(e.Qty);e.ContractualIndicator=t.ContractualIndicatorr;e.Data=t.Datar;e.Txt=t.Txtr;t.Buildings.map(function(t){if(t===e.Buildingno){o=true}});if(!o){t.Buildings.push(e.Buildingno)}}});if(r){t.Buildingno=t.Buildings.length.toString();i.push(JSON.parse(JSON.stringify(t)));o=o.filter(function(e){return e.Data!==t.Datar&&e.Txt!==t.Txtr})}for(var a in t){delete t[a]}});a.setProperty("/forBBuildingConsulidatedItemSet",JSON.parse(JSON.stringify(i.sort((e,t)=>e.Data-t.Data))))},_WholeContract:function(){this.onClearFilter();this._filterDialog.close()},WholeContractservices:function(e){var t={},o=JSON.parse(JSON.stringify(e)),i=[],a=this.getModel("localJson"),r=false;e.map(function(e){r=false;t.ContractualIndicator=e.ContractualIndicator;t.Boq=e.Boq;t.Data=e.Data;t.sortNum=e.sortNum;t.ShortDesc=e.ShortDesc;t.Uom=e.Uom;t.Qty=0;t.Eancat=e.Eancat;t.PriceUnit=e.PriceUnit;t.Txt=e.Txt;t.ContractualIndicatorr=e.ContractualIndicator+"R";t.Datar=e.Data+"R";t.Txtr=e.Txt+"R";t.MatlGroup=e.MatlGroup;t.Amount=0;t.Buildings=[];o.map(function(e){if(e.Data===t.Data&&e.Txt===t.Txt){r=true;var o=false;t.Amount+=parseFloat(e.Qty*e.PriceUnit);t.Qty+=parseFloat(e.Qty);e.ContractualIndicator=t.ContractualIndicatorr;e.Data=t.Datar;e.Txt=t.Txtr;t.Buildings.map(function(t){if(t===e.Buildingno){o=true}});if(!o){t.Buildings.push(e.Buildingno)}}});if(r){t.Buildingno=t.Buildings.length;i.push(JSON.parse(JSON.stringify(t)));o=o.filter(function(e){return e.Data!==t.Datar&&e.Txt!==t.Txtr})}for(var a in t){delete t[a]}});a.setProperty("/forBBuildingConsulidatedItemSet",JSON.parse(JSON.stringify(i.sort((e,t)=>e.Data-t.Data))))},groupConsolidscreen3all:function(e){var t={},o=JSON.parse(JSON.stringify(e)),i=[],a=this.getModel("localJson"),r=false;e.map(function(e){r=false;t.ContractualIndicator=e.ContractualIndicator;t.Boq=e.Boq;t.Txt=e.Txt;t.ItemCat=e.ItemCat;t.Buildingno=e.Buildingno;t.Buildingnum=0;t.sortNum=e.sortNum;t.ContractualIndicatorr=e.ContractualIndicator+"R";t.MatlGroupr=e.MatlGroup+"R";t.Boqr=e.Boq+"R";t.Txtr=e.Txt+"R";t.Buildingnor=e.Buildingno+"R";t.MatlGroup=e.MatlGroup;t.Boq=e.Boq;t.Matdesc=e.Matdesc;t.Amount=0;t.Buildings=[];o.map(function(e){if(e.MatlGroup===t.MatlGroup&&e.Boq===t.Boq&&e.ItemCat!=="U"&&e.Txt===t.Txt&&e.Buildingno===t.Buildingno){r=true;var o=false;t.Amount+=parseFloat(e.Qty*e.PriceUnit);e.ContractualIndicator=t.ContractualIndicatorr;e.MatlGroup=t.MatlGroupr;e.Txt=t.Txtr;e.Buildingno=t.Buildingnor;t.Buildings.map(function(t){if(t===e.Buildingno){o=true}});if(!o){t.Buildings.push(e.Buildingno)}}});if(r){t.Buildingnum=t.Buildings.length;i.push(JSON.parse(JSON.stringify(t)));o=o.filter(function(e){return e.MatlGroup!==t.MatlGroupr&&e.Boq!==t.Boqr&&e.Txt!==t.Txtr&&e.Buildingno!==t.Buildingnor})}for(var a in t){delete t[a]}});a.setProperty("/ServiceGroupSet",i);return i},groupConsolidscreen3:function(e){var t={},o=JSON.parse(JSON.stringify(e)),i=[],a=this.getModel("localJson"),r=false;e.map(function(e){r=false;t.ContractualIndicator=e.ContractualIndicator;t.Boq=e.Boq;t.MatlGroup=e.MatlGroup;t.Txt=e.Txt;t.Buildingno=e.Buildingno;t.sortNum=e.sortNum;t.ContractualIndicatorr=e.ContractualIndicator+"R";t.MatlGroupr=e.MatlGroup+"R";t.Txtr=e.Txt+"R";t.Buildingnum=0;t.Matdesc=e.Matdesc;t.Matdesc=e.Matdesc;t.Amount=0;t.Buildings=[];o.map(function(e){if(e.MatlGroup===t.MatlGroup&&e.Txt===t.Txt&&e.Eancat!="C"&&e.Eancat!="U"){r=true;var o=false;t.Amount=parseFloat(t.Amount)+parseFloat(e.Amount);e.ContractualIndicator=t.ContractualIndicatorr;e.MatlGroup=t.MatlGroupr;e.Txt=t.Txtr;t.Buildings.map(function(t){if(t===e.Buildingno){o=true}});if(!o){t.Buildings.push(e.Buildingno)}}});if(r){t.Buildingnum=t.Buildings.length;i.push(JSON.parse(JSON.stringify(t)));o=o.filter(function(e){return e.MatlGroup!==t.MatlGroupr&&e.Txt!==t.Txtr})}for(var a in t){delete t[a]}});a.setProperty("/ServiceGroupSet",i)},onCancelFilter:function(){this._filterDialog.close();this._filterDialog.destroy();this._filterDialog=null},ContractValueHeader:function(){var e=this,t=this.getModel("localJson"),o="0.00",i="0.00",a="0.00",r="0.00",l="0.00",s="0.00",n="0.00",d="0.00",u=t.getProperty("/myBuildingSet"),g=t.getProperty("/myWBSSet"),c="0.00",p="0.00",h="0.00",f=JSON.parse(JSON.stringify(this.getModel("localJson").getProperty("/BoqConsulidatedItemSet"))),m=JSON.parse(JSON.stringify(this.getModel("localJson").getProperty("/EstimatedContracts"))),S=JSON.parse(JSON.stringify(e.getModel("localJson").getProperty("/HeadToHeadVariation")));$.each(g,function(e,t){p=parseFloat(p)+1});$.each(u,function(e,t){c=parseFloat(c)+1});$.each(f,function(e,t){h=parseFloat(h)+1});$.each(f,function(e,t){if(t.ContractualIndicator==="O"&&t.Eancat!=="C"&&t.Eancat!=="U"){i=(parseFloat(i)+parseFloat(t.Amount)).toString()}else if(t.ContractualIndicator==="V"&&t.Eancat!=="C"&&t.Eancat!=="U"){a=(parseFloat(a)+parseFloat(t.Amount)).toString()}else if(t.ContractualIndicator==="A"&&t.Eancat!=="C"&&t.Eancat!=="U"){r=(parseFloat(r)+parseFloat(t.Amount)).toString()}$.each(S,function(e,o){if(o.Status==="C"&&t.Txt===(o.OrderType+"-"+o.UserOrder).toString()){if(t.Eancat!=="C"&&t.Eancat!=="U"&&t.Qty>=0){s=parseFloat(s)+parseFloat(t.Amount)}if(t.Eancat!=="C"&&t.Eancat!=="U"&&t.Qty<0){n=parseFloat(n)+parseFloat(t.Amount)}}})});$.each(m,function(e,t){if(t.DelInd!=="X"){o=parseFloat(o)+parseFloat(t.Amount)}});var C="";d=parseFloat(s)+parseFloat(n);$.each(S,function(t,o){if(o.Status==="C"){o.AddValues=s.toString();o.OmissionValues=n.toString();o.ChangeAmount=d.toString();o.ChangeInd="X";C=t;e.getModel("localJson").setProperty("/HeadToHeadVariation/"+t,o)}});l=(parseFloat(i)+parseFloat(a)+parseFloat(r)).toString();this.getView().getModel("localJson").setProperty("/EstimatedContractValue",parseFloat(o).toFixed(this.CustomCurrency));this.getView().getModel("localJson").setProperty("/OriginalContractValue",parseFloat(i).toFixed(this.CustomCurrency));this.getView().getModel("localJson").setProperty("/VariationOrderValue",parseFloat(a).toFixed(this.CustomCurrency));this.getView().getModel("localJson").setProperty("/AddendumValue",parseFloat(r).toFixed(this.CustomCurrency));this.getView().getModel("localJson").setProperty("/TotalContractValue",parseFloat(l).toFixed(this.CustomCurrency));t.setProperty("/WbslistNo",p);t.setProperty("/BuildingNO",c);t.setProperty("/ServicNOCount",h);t.refresh();e.getView().setBusy(false)},ContractValueHeaderCreate:function(){var e=this.getModel("localJson"),t="0.00",o="0.00",i="0.00",a="0.00",r="0.00",l=JSON.parse(JSON.stringify(this.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet"))),s=JSON.parse(JSON.stringify(this.getView().getModel("localJson").getProperty("/EstimatedContracts")));$.each(l,function(e,t){if(t.ContractualIndicator==="O"&&t.Eancat!=="C"&&t.Eancat!=="U"&&t.DelInd!=="Y"){o=(parseFloat(o)+parseFloat(t.Amount)).toString()}else if(t.ContractualIndicator==="V"&&t.Eancat!=="C"&&t.Eancat!=="U"&&t.DelInd!=="Y"){i=(parseFloat(i)+parseFloat(t.Amount)).toString()}else if(t.ContractualIndicator==="A"&&t.Eancat!=="C"&&t.Eancat!=="U"&&t.DelInd!=="Y"){a=(parseFloat(a)+parseFloat(t.Amount)).toString()}});$.each(s,function(e,o){t=(parseFloat(t)+parseFloat(o.Amount)).toString()});r=(parseFloat(o)+parseFloat(i)+parseFloat(a)).toString();this.getView().getModel("localJson").setProperty("/EstimatedContractValue",t);this.getView().getModel("localJson").setProperty("/OriginalContractValue",o);this.getView().getModel("localJson").setProperty("/TotalContractValue",r)},onAddWBSB:function(){var e=this;if(e.sProjectCode!==""&&e.sCoCode!==""){if(!e._oWBS2Dialog){e._oWBS2Dialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SelectMultiWBS",e);var t=new sap.ui.model.resource.ResourceModel({bundleUrl:"i18n/i18n.properties"});e._oWBS2Dialog.setModel(t,"i18n");e._oWBS2Dialog.setModel(e.getView().getModel())}e._oWBS2Dialog.open();var o=e.getView().getModel();var i=new sap.ui.model.json.JSONModel;i.setData({WBSSet:[],BuildingSetfilter:[]});e._oWBS2Dialog.setModel(i,"localJson");var a=[];var r=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"WBS");var l=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var s=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);a.push(r);a.push(l);a.push(s);o.read("/ValueHelpSet",{filters:a,success:function(t){$.each(t.results,function(e,o){t.results[e].Group="";t.results[e].Model=t.results[e].IdNumber});var o=JSON.parse(JSON.stringify(t.results));e._oWBS2Dialog.getModel("localJson").setProperty("/WBSSet",o)},error:function(e){sap.m.MessageToast.show("Error")}});e.aContexts=[];e.Boqs=[];e.BUBoQs=[];e.WBSBoQs=[]}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}},changestatus:function(e){var t=this;var o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet")));var i=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var a=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(a,function(t,a){$.each(i,function(t,r){$.each(r.Categories,function(r,l){$.each(l.Categories,function(l,s){$.each(s.Categories,function(s,n){if(a.Txt===n.Txt&&e.Txt===n.Txt){var d=false;$.each(o,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===n.Boq){d=true;if(t.SrvStatus==="UA"){t.SrvStatus="A"}else if(t.SrvStatus==="UD"){t.SrvStatus="D"}}});if(d){if(i[t].Categories[r].Categories[l].Categories[s].SrvStatus==="UA"){i[t].Categories[r].Categories[l].Categories[s].SrvStatus="A";i[t].Categories[r].Categories[l].Categories[s].ChangeIndicator="ChangeP"}else if(i[t].Categories[r].Categories[l].Categories[s].SrvStatus==="UD"){i[t].Categories[r].Categories[l].Categories[s].SrvStatus="D";i[t].Categories[r].Categories[l].Categories[s].ChangeIndicator="ChangeP"}}}})})})})});t.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(i)));t.getView().getModel("localJson").setProperty("/myBuildingSet",JSON.parse(JSON.stringify(o)))},deletesrv:function(e){var t=this;this.deleteVariation(e);var o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var i=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var l="0.00",s="0.00",n="0.00",d=false;var u=t.getModel("localJson").getProperty("/HeadToHeadVariation");var g=this.getView().getModel("localJson").getProperty("/myBuildingSet");var c=this.getView().getModel("localJson").getProperty("/myWBSSet");var p=[];$.each(g,function(e,t){p.push(t)});$.each(c,function(e,t){p.push(t)});$.each(p,function(t,o){if(o.Group===e.Group&&e.Model===o.Model&&o.DelInd!=="Y"&&o.AsBuild2===""){d=true}});$.each(i,function(i,a){$.each(o,function(i,r){$.each(r.Categories,function(l,s){var n=0;$.each(r.Categories,function(e,t){if(t.DelInd!=="Y"){n=n+1}});if(n===1&&s.Data===e.Group&&(s.Model.length===8?s.Model:"00000"+s.Model)===e.Boq&&!d){o[i].DelInd="Y"}$.each(s.Categories,function(r,n){$.each(n.Categories,function(n,u){if(a.Data===u.Data&&a.Txt===u.Txt){var g=false;$.each(p,function(t,o){if(s.Data===e.Group&&o.Model===e.Model&&o.AsBuild2===""){if((o.Model.length===8?o.Model:"00000"+o.Model)===u.Model&&u.Model===(e.Model.length===8?e.Model:"00000"+e.Model)){g=true}}});if(g){if(!d){o[i].Categories[l].Categories[r].Categories[n].DelInd="Y";o[i].Categories[l].Categories[r].Categories[n].SrvStatus="D";o[i].Categories[l].DelInd="Y";o[i].Categories[l].Categories[r].DelInd="Y"}u.Group=e.Group;u.Buildingno=e.BuildingNo;u.SubModel=e.SubBoq;t.deleteserviceFromConsolidate(u)}}})})})})});n=parseFloat(l)+parseFloat(s);$.each(u,function(e,o){if(o.Status==="C"){o.AddValues=parseFloat(o.AddValues)-parseFloat(l);o.OmissionValues=parseFloat(o.OmissionValues)-parseFloat(s);o.ChangeAmount=parseFloat(o.ChangeAmount)-parseFloat(n);o.ChangeInd="X";t.getModel("localJson").setProperty("/HeadToHeadVariation"+e,o)}});var h=[];h.push(new sap.ui.model.Filter("DelInd",sap.ui.model.FilterOperator.NE,"Y"));t.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(o)));t.getView().getModel("localJson").refresh();t.byId("TreeTableBasic").getBinding("rows").filter(new a("DelInd",r.NE,"Y"));t.getView().getModel("localJson").refresh();t.byId("IdBuildingTable").getBinding("rows").filter(new a("DelInd",r.NE,"Y"));t.byId("IdWBSTable").getBinding("rows").filter(new a("DelInd",r.NE,"Y"));var f=[];var i=JSON.parse(JSON.stringify(this.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var p=t.getView().getModel("localJson").getProperty("/selectedBuilding");$.each(i,function(e,t){if(t.condelete!=="DD"){f.push(t)}});this.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(f.sort((e,t)=>e.Data-t.Data))));this.BoqItemSetCalculate()},deletesrvv:function(e){var t=this;var o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var i=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var a="0.00",r="0.00",l="0.00";var s=t.getModel("localJson").getProperty("/HeadToHeadVariation");var n=this.getView().getModel("localJson").getProperty("/myBuildingSet");var d=this.getView().getModel("localJson").getProperty("/myWBSSet");var u=[];$.each(n,function(e,t){u.push(t)});$.each(d,function(e,t){u.push(t)});$.each(i,function(i,a){$.each(o,function(i,r){$.each(r.Categories,function(l,s){var n=0;$.each(r.Categories,function(e,t){if(t.DelInd!=="Y"){n=n+1}});if(n===1&&s.Name===e.Group&&s.Boq===e.Boq){o[i].DelInd="Y"}$.each(s.Categories,function(r,n){$.each(n.Categories,function(n,d){if(a.Serviceno===d.Serviceno&&a.Txt===d.Txt&&d.SrvStatus==="UA"){var g=false;$.each(u,function(t,o){if((o.Model.length===8?o.Model:"00000"+o.Model)===d.Boq&&s.Name===e.Group&&(o.Model.length===8?o.Model:"00000"+o.Model)===e.Boq){g=true}});if(g){if(o[i].Categories[l].Categories[r].Categories[n].SrvStatus==="UA"){o[i].Categories[l].Categories[r].Categories[n].DelInd="Y";o[i].Categories[l].Categories[r].Categories[n].SrvStatus="D";o[i].Categories[l].DelInd="Y";o[i].Categories[l].Categories[r].DelInd="Y";t.deleteserviceFromConsolidate(d)}}}})})})})});l=parseFloat(a)+parseFloat(r);$.each(s,function(e,o){if(o.Status==="C"){o.AddValues=parseFloat(o.AddValues)-parseFloat(a);o.OmissionValues=parseFloat(o.OmissionValues)-parseFloat(r);o.ChangeAmount=parseFloat(o.ChangeAmount)-parseFloat(l);o.ChangeInd="X";t.getModel("localJson").setProperty("/HeadToHeadVariation"+e,o)}});this.getView().getModel("localJson").setProperty("/myBuildingSet",n);this.getView().getModel("localJson").setProperty("/myWBSSet",d);var g=[];g.push(new sap.ui.model.Filter("DelInd",sap.ui.model.FilterOperator.NE,"Y"));t.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(o)));t.getView().getModel("localJson").refresh();t.byId("TreeTableBasic").bindRows({path:"localJson>/BoqItemSet",filters:g,parameters:{arrayNames:"Categories"}});t.getView().getModel("localJson").refresh();this.byId("IdBuildingTable").getBinding("items").filter(g);this.byId("IdWBSTable").getBinding("items").filter(g);var c=[];var i=JSON.parse(JSON.stringify(this.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(i,function(e,t){if(t.Qty!==0){c.push(t)}});this.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(c.sort((e,t)=>e.Data-t.Data))));this.BoqItemSetCalculate()},deleteVariation:function(e){var t=this;var o=t.getModel("localJson").getProperty("/HeadToHeadVariation"),i=t.getView().getModel("localJson").getProperty("/variationBuilding"),a=false,r=t.getModel("localJson");$.each(o,function(t,o){if(o.Status==="C"){$.each(o.OrderItemsSet,function(t,o){if(o.Boq===e.Group&&o.BuildingNo===e.BuildingNo&&(o.Model.length===8?o.Model:"00000"+o.Model)===(e.Boq.length===8?e.Boq:"00000"+e.Boq)){o.DeleteInd="Y";o.Group=o.Boq;i.push(o)}})}});t.getView().getModel("localJson").setProperty("/variationBuilding",i)},deleteserviceFromConsolidate:function(e){var t=[];var o=JSON.parse(JSON.stringify(this.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));e=e;$.each(o,function(t,o){if(e.Txt===o.Txt&&e.Data===o.Data){o.Qty=parseFloat(o.Qty)-parseFloat(e.Qty);o.Amount=parseFloat(o.Qty)*parseFloat(o.PriceUnit);var i=0;$.each(o.ModelBoq,function(t,i){if(e.Buildingno===i.Buildingno&&e.Model===i.Model&&e.SubModel===i.SubModel&&i.delind!=="X"){o.ModelBoq[t].delind="X"}});$.each(o.ModelBoq,function(e,t){if(t.delind!=="X"){i++}});if(i===0&&o.Qty===0){o.condelete="DD"}}});this.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(o.sort((e,t)=>e.Data-t.Data))));this.ContractValueHeader()},deleteBOQliseConsolidate:function(e){var t=JSON.parse(JSON.stringify(this.getView().getModel("localJson").getProperty("/BoqItemSet")));var o=this.getView().getModel("localJson").getProperty("/myBuildingSet");var i=this.getView().getModel("localJson").getProperty("/myWBSSet");var a=false;var r=[];var l="";var s="",n="";$.each(o,function(e,t){r.push(t)});$.each(i,function(e,t){r.push(t)});$.each(r,function(t,o){if(o.Group===e.Group&&e.Model===o.Model&&o.DelInd!=="Y"){a=true}});$.each(t,function(t,o){$.each(o.Categories,function(i,r){var d=0;var u=false;if(!a&&o.AddNew==="AN"&&r.Data===e.Group&&r.Model===(e.Model.length===8?e.Model:"00000"+e.Model)&&r.Data===e.Group){n=i;s=t}if(!a&&r.DelInd!=="Y"){d=d+1;if(d===1){u=false}if(d===2){u=true}}if(!a&&o.Categories.length===1&&r.DelInd==="Y"&&o.AddNew==="AN"){l=t}})});if(s!==""&&n!==""){t[s].Categories.splice(n,1)}if(l!==""){t.splice(l,1)}this.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(t)))},BoqItemSetCalculate:function(){var e=this,t="0.00",o="0.00",i="0.00";var a=this.getView().getModel("localJson");var r=JSON.parse(JSON.stringify(e.getModel("localJson").getProperty("/BoqItemSet")));var l=this.getView().getModel("localJson").getProperty("/myBuildingSet");var s=this.getView().getModel("localJson").getProperty("/myWBSSet");var n=[];$.each(l,function(e,t){n.push(t)});$.each(s,function(e,t){n.push(t)});var d=e.getModel("localJson").getProperty("/HeadToHeadVariation");var u=JSON.parse(JSON.stringify(e.getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(u,function(e,t){$.each(r,function(e,t){$.each(t.Categories,function(t,o){$.each(o.Categories,function(o,i){$.each(i.Categories,function(i,a){r[e].PriceUnit="0";r[e].Categories[t].PriceUnit="0";r[e].Categories[t].Categories[o].PriceUnit="0"})})})})});$.each(u,function(e,t){$.each(r,function(e,o){$.each(o.Categories,function(o,i){$.each(i.Categories,function(i,a){$.each(a.Categories,function(a,l){if(t.Data===l.Data&&t.Txt===l.Txt&&l.DelInd!=="Y"){r[e].Categories[o].Categories[i].Categories[a].PriceUnit=parseFloat(t.PriceUnit)*parseFloat(r[e].Categories[o].Categories[i].Categories[a].Qty);if(l.Eancat!=="C"&&l.Eancat!=="U"){r[e].PriceUnit=(parseFloat(r[e].PriceUnit)+parseFloat(t.PriceUnit)*parseFloat(r[e].Categories[o].Categories[i].Categories[a].Qty)).toString()}if(l.Eancat!=="C"&&l.Eancat!=="U"){r[e].Categories[o].PriceUnit=(parseFloat(r[e].Categories[o].PriceUnit)+parseFloat(t.PriceUnit)*parseFloat(r[e].Categories[o].Categories[i].Categories[a].Qty)).toString()}if(l.Eancat!=="C"&&l.Eancat!=="U"){r[e].Categories[o].Categories[i].PriceUnit=(parseFloat(r[e].Categories[o].Categories[i].PriceUnit)+parseFloat(t.PriceUnit)*parseFloat(r[e].Categories[o].Categories[i].Categories[a].Qty)).toString()}}})})})})});$.each(e.myWBSSet,function(t,o){$.each(n,function(i,a){if(a.BuildingNo===""){if(o.Model===a.Model){e.myBuildingSet[t].ChangeIndicator=a.ChangeIndicator}}})});$.each(u,function(e,t){t.Amount=parseFloat(t.PriceUnit)*parseFloat(t.Qty)});$.each(u,function(e,o){t=parseFloat(t)+1});$.each(l,function(e,t){if(t.DelInd!="Y"){i=parseFloat(i)+1}});$.each(s,function(e,t){if(t.DelInd!="Y"){o=parseFloat(o)+1}});a.setProperty("/BuildingNO",i);a.setProperty("/WbslistNo",o);a.setProperty("/ServicNOCount",t);e.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(r)))},deletesrvA:function(e){var t=this;var o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet")));var i=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var a=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(a,function(t,a){$.each(i,function(t,r){$.each(r.Categories,function(r,l){$.each(l.Categories,function(l,s){$.each(s.Categories,function(s,n){if(a.Serviceno===n.Serviceno&&a.Txt===n.Txt&&n.SrvStatus==="A"){var d=false;$.each(o,function(t,o){if((o.Model.length===8?o.Model:"00000"+o.Model)===n.Boq&&n.Boq===e.Boq){d=true;if(o.SrvStatus==="A"){o.SrvStatus="UD"}}});if(d){if(i[t].Categories[r].Categories[l].Categories[s].SrvStatus==="A"){i[t].Categories[r].Categories[l].Categories[s].ChangeIndicator="ChangeP";i[t].Categories[r].Categories[l].Categories[s].SrvStatus="UD"}}}})})})})});t.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(i)));t.getView().getModel("localJson").setProperty("/myBuildingSet",JSON.parse(JSON.stringify(o)));t.getModel("localJson").refresh(true)},Consoliatedservicesall:function(){var e=this;var t=this.getView().getModel("localJson").getProperty("/myBuildingSet"),o=this.getModel("localJson");var i=this.getView().getModel("localJson").getProperty("/myWBSSet");var a=[];$.each(t,function(e,t){a.push(t)});$.each(i,function(e,t){a.push(t)});var r=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/BoqItemSet")));var l=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var s=[];$.each(r,function(e,t){$.each(t.Categories,function(e,t){$.each(t.Categories,function(e,o){$.each(o.Categories,function(e,o){$.each(a,function(e,i){if((i.Model.length===8?i.Model:"00000"+i.Model)===o.Model&&i.Group===t.Data){o.ContractualIndicator=i.ContractualIndicator;o.Txt=i.Txt;o.MatlGroup=o.Item;o.Buildingno=i.BuildingNo;o.PriceUnit=o.Price;o.Amount=parseFloat(o.Price)*parseFloat(o.Qty);if(o.ContractualIndicator==="O"){o.sortNum=1}if(o.ContractualIndicator==="V"){o.sortNum=2}if(o.ContractualIndicator==="A"){o.sortNum=3}s.push(JSON.parse(JSON.stringify(o)))}})})})})});if(e.ViewCon==="V"){e.filterConsoliatedservices(s)}if(e.ViewCon!="V"){if(e.ViewCon==="V2"){e.groupConsolidscreen2(JSON.parse(JSON.stringify(s)))}if(e.ViewCon==="V3"){e.groupConsolidscreen3(JSON.parse(JSON.stringify(s)))}}o.refresh()},filterConsoliatedservices:function(e){var t=this,o=this.byId("idFContractualIndicator").getSelectedKeys(),i=this.getModel("localJso"),a=i.getProperty("/Buildingss"),r=[],l=[],s=[],n=[],d="00000"+t.ModelCodeFilter;if(!this.getModel("localJso").getProperty("/ViewCon3")||!this.getModel("localJso").getProperty("/ViewCon2")){if(o.length>0){o.map(function(t){$.each(e,function(e,o){if(t===o.ContractualIndicator){n.push(JSON.parse(JSON.stringify(o)))}})})}else{$.each(e,function(e,t){n.push(JSON.parse(JSON.stringify(t)))})}if(d!=="00000"){$.each(n,function(e,t){if(d===t.Model){l.push(JSON.parse(JSON.stringify(t)))}})}else{$.each(n,function(e,t){l.push(JSON.parse(JSON.stringify(t)))})}if(a.length>0){a.map(function(e){$.each(l,function(t,o){if(e.BuildingNo===o.Buildingno){r.push(JSON.parse(JSON.stringify(o)))}})})}else{$.each(l,function(e,t){r.push(JSON.parse(JSON.stringify(t)))})}}if(!this.getModel("localJso").getProperty("/ViewCon3")){t.groupConsolidscreen3(JSON.parse(JSON.stringify(r)))}else{t.groupConsolidscreen2(r)}},Consoliatedservices:function(){var e=this;var t=this.getView().getModel("localJson").getProperty("/myBuildingSet");var o=this.getView().getModel("localJson").getProperty("/myWBSSet");var i=[];$.each(t,function(e,t){i.push(t)});$.each(o,function(e,t){i.push(t)});var a=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/BoqItemSet")));var r=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var l=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/AsbuildService")));var s=[];$.each(a,function(e,t){$.each(t.Categories,function(e,t){$.each(t.Categories,function(e,o){$.each(o.Categories,function(e,o){$.each(i,function(e,i){if((i.Model.length===8?i.Model:"00000"+i.Model)===o.Model&&i.Group===t.Data&&i.AsBuild2===""){o.ContractualIndicator=i.ContractualIndicator;o.Txt=i.Txt;o.DelInd=i.DelInd;o.SrvStatus=i.SrvStatus;o.BuildingNo=i.BuildingNo;if(o.ContractualIndicator==="O"){o.sortNum=1}if(o.ContractualIndicator==="V"){o.sortNum=2}if(o.ContractualIndicator==="A"){o.sortNum=3}s.push(JSON.parse(JSON.stringify(o)))}})})})})});$.each(l,function(e,t){t.Uom=t.BaseUom;t.BuildingNo=t.Buildingno;t.Price=t.PriceUnit;t.LongDesc=t.SrvLongText;t.Eancat=t.ServiceType;t.Data=t.Serviceno;t.SubModel=t.SubBoq;s.push(JSON.parse(JSON.stringify(t)))});$.each(s,function(t,o){o.PriceUnit=o.Price;o.Amount=(parseFloat(o.Price)*parseFloat(o.Qty)).toFixed(e.CustomCurrency)});e.Consoliatedserviceslist(s.sort());e.getView().getModel("localJson").setProperty("/BuildingConsulidatedItemSetfilter",JSON.parse(JSON.stringify(s.sort((e,t)=>e.Data-t.Data))));e.getView().getModel("localJson").setProperty("/BuildingConsulidatedItemSet",JSON.parse(JSON.stringify(s.sort((e,t)=>e.Data-t.Data))))},Consoliatedserviceslist:function(e){var t=this;var o={},i=JSON.parse(JSON.stringify(e)),a=[],r=this.getModel("localJson"),l="0.00",s=false;e.map(function(e){s=false;o.ContractualIndicator=e.ContractualIndicator;o.Model=e.Model;o.Data=e.Data;o.AsBuild2=e.AsBuild2;o.AsBuild=e.AsBuild;o.Servicedesc=e.Servicedesc;o.Uom=e.Uom;o.SrvStatus=e.SrvStatus;o.Qty=0;o.sortNum=e.sortNum;o.Eancat=e.Eancat;o.PriceUnit=e.Price;o.LongDesc=e.LongDesc;o.Txt=e.Txt;o.SubModel=e.SubModel;o.ContractualIndicatorr=e.ContractualIndicator+"R";o.Datar=e.Data+"R";o.Txtr=e.Txt+"R";o.ShortDesc=e.ShortDesc;o.Amount=0;o.BuildingNo=e.BuildingNo;o.Buildings=[];o.ModelBoq=[];i.map(function(e){if(e.Data===o.Data&&e.DelInd!=="Y"&&e.Txt===o.Txt){s=true;var t=false;o.Amount+=parseFloat(e.Amount);o.Qty+=parseFloat(e.Qty);e.Data=o.Datar;e.Txt=o.Txtr;o.Buildings.map(function(o){if(o===e.Buildingno){t=true}});if(!t){var i={Model:e.Model,SubModel:e.SubModel,Buildingno:e.Buildingno===""?e.BuildingNo:e.BuildingNo};o.ModelBoq.push(i)}}});if(s){a.push(JSON.parse(JSON.stringify(o)));i=i.filter(function(e){return e.Data!==o.Datar&&e.Txt!==o.Txtr})}for(var t in o){delete o[t]}});$.each(a,function(e,t){l=parseFloat(l)+1});r.setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(a.sort((e,t)=>e.Data-t.Data))));r.setProperty("/ServicNOCount",l)},Consoliatedserviceslistobject:function(e){var t=this;var o={},i=JSON.parse(JSON.stringify(e)),a=[],r=this.getModel("localJson"),l=false;e.map(function(e){l=false;o.Acctasscat=e.Acctasscat;o.Amount=0;o.AsBuild=e.AsBuild;o.AsBuild2=e.AsBuild2;o.sortNum=e.sortNum;o.AsBuilt=e.AsBuilt;o.Uom=e.BaseUom;o.Boq=e.Boq;o.Buildingno=e.Buildingno;o.ContractualIndicator=e.ContractualIndicator;o.DeliveryDate=e.DeliveryDate;o.ItemCat=e.ItemCat;o.Matdesc=e.Matdesc;o.MatlGroup=e.MatlGroup;o.NoLimit=e.NoLimit;o.OvfTol=e.OvfTol;o.Plant=e.Plant;o.PoHeader=e.PoHeader;o.PoItem=e.PoItem;o.PriceUnit=e.PriceUnit;o.Project=e.Project;o.Qty=0;o.LongDesc=e.SrvLongText;o.sorttype=e.sorttype;o.Eancat=e.ServiceType;o.Servicedesc=e.Servicedesc;o.Data=e.Serviceno;o.ShortDesc=e.ShortText;o.SrvNo=e.SrvNo;o.SrvStatus=e.SrvStatus;o.SubBoq=e.SubBoq;o.Txt=e.Txt;o.VariationOrder=e.VariationOrder;o.ContractualIndicatorr=e.ContractualIndicator+"R";o.Datar=e.Serviceno+"R";o.Txtr=e.Txt+"R";o.SubBoqr=e.SubBoq+"R";o.ProvisionRate=e.ProvisionRate;o.Buildings=[];o.ModelBoq=[];i.map(function(e){if(e.Serviceno===o.Data&&e.Txt===o.Txt){l=true;var t=false;o.Qty+=parseFloat(e.Qty);e.ContractualIndicator=o.ContractualIndicatorr;e.Serviceno=o.Datar;e.Txt=o.Txtr;o.Buildings.map(function(o){if(o===e.Buildingno){t=true}});if(!t){var i={Model:e.Boq,SubModel:e.SubBoq,Buildingno:e.Buildingno===""?e.Boq:e.Buildingno};o.ModelBoq.push(i)}}});if(l){a.push(JSON.parse(JSON.stringify(o)));i=i.filter(function(e){return e.Serviceno!==o.Datar&&e.Txt!==o.Txtr})}for(var t in o){delete o[t]}});$.each(a,function(e,t){a[e].Amount=parseFloat(t.Qty)*parseFloat(t.PriceUnit)});return a},ConsoliatedserviceslistCreate:function(e){var t=this;var o={},i=JSON.parse(JSON.stringify(e)),a=[],r=this.getModel("localJson"),l=false;e.map(function(e){l=false;o.ContractualIndicator=e.ContractualIndicator;o.sortNum=e.sortNum;o.Model=e.Model;o.Data=e.Data;o.ShortDesc=e.ShortDesc;o.Uom=e.Uom;o.Qty=0;o.Eancat=e.Eancat;o.Item=e.Item;o.ModelType=e.ModelType;o.PriceUnit=e.PriceUnit;o.Datar=e.Data+"R";o.MatlGroup=e.MatlGroup;o.Txt=e.Txt;o.Amount=0;o.BuildingNo=e.BuildingNo;o.Buildings=[];o.ModelBoq=[];i.map(function(e){if(e.Data===o.Data){l=true;var t=false;o.Qty+=parseFloat(e.Qty);e.Data=o.Datar;o.Buildings.map(function(t){if(t===e.Buildingno){modelExists=true}});if(!modelExists){var i={Model:e.Model,SubModel:e.SubModel,Buildingno:e.Buildingno===""?e.Model:e.BuildingNo};o.ModelBoq.push(i)}}});if(l){a.push(JSON.parse(JSON.stringify(o)));i=i.filter(function(e){return e.Data!==o.Datar})}for(var t in o){delete o[t]}});$.each(a,function(e,t){a[e].Amount=parseFloat(t.Qty)*parseFloat(t.PriceUnit)});return a},treeHandel:function(e,t){var o=this;var i={},a=JSON.parse(JSON.stringify(e)),r=[],l=this.getModel("localJson"),s=false;t.map(function(e){s=false;i.ContractualIndicator=e.ContractualIndicator;i.sortNum=e.sortNum;i.Categories=e.Categories;i.Data=e.Data;i.Eancat=e.Eancat;i.Item=e.Item;i.LevelId=e.LevelId;i.LevelNo=e.LevelNo;i.LongDesc=e.LongDesc;i.Model=e.Model;i.Node=e.Node;i.Parent=e.Parent;i.Qty=e.Qty;i.ShortDesc=e.ShortDesc;i.SubModel=e.SubModel;i.Uom=e.Uom;i.LevelIdd=e.LevelId+"R";i.Modell=e.Model+"R";a.map(function(e){if(e.LevelId===i.LevelId&&e.Model===i.Model){s=true;e.ContractualIndicator=i.Modell;e.LevelId=i.LevelIdd}});if(s){r.push(JSON.parse(JSON.stringify(i)));a=a.filter(function(e){return e.LevelId!==i.LevelIdd&&e.Model!==i.Modell})}for(var t in i){delete i[t]}});return r},handleAddAttachmentPress:function(e){var t=this;if(t._addAttachmentDialog){t._addAttachmentDialog.destroy();t._addAttachmentDialog=null}if(!t._addAttachmentDialog){t._addAttachmentDialog=sap.ui.xmlfragment(t.getView().getId(),"com.cicre.po.view.fragments.Attachment",t);t.getView().addDependent(t._addAttachmentDialog)}t._addAttachmentDialog.open()},onAddAttachment:function(e){var t=this;var o={};var i=t.getModel("localJson").getProperty("/AttachmentSet");if(t.byId("idRequestAttachment").data("details")){o=$.extend(o,JSON.parse(t.byId("idRequestAttachment").data("details")))}i.push(o);t.getModel("localJson").setProperty("/AttachmentSet",i);t._addAttachmentDialog.close()},onCancelAttachment:function(e){this._addAttachmentDialog.close()},handleUploadPress:function(e){var t=["pdf","jpg","jpeg","png","txt","xls","xlsx","xlsm","xltx","xltm","doc","docx"];var o=this;var i=e.getParameters().id;var a=sap.ui.getCore().byId(i);a.data("details","");var r=a.getValue().lastIndexOf(".");var l=a.getValue().substring(0,r);if(!a.getValue()){o.handleErrorMessageBox(o.getResourceBundle().getText("baseMSGNoAttachment"));return}var s=jQuery.sap.domById(a.getId()+"-fu").files[0];var n=s.type;var d=s.name.substring(r+1,s.name.length);d=d.toLowerCase();if($.inArray(d,t)>-1){var u="data:"+s.type+";base64,";var g=new FileReader;g.onload=function(e){return function(e){var t=e.target.result.indexOf(u)+u.length;var o=e.target.result.substring(t);var i={Value:o,Extension:d,Filename:l,Flag:"A"};a.data("details",JSON.stringify(i))}}(s);g.readAsDataURL(s)}else{a.data("details",null);a.setValue("");o.handleErrorMessageBox(o.getResourceBundle().getText("baseMSGMismatchAttachmentType",[t.join(", ")]))}},onAttachmentDelete:function(e){var t=this;var o=e.getParameter("listItem").getBindingContext("localJson").getPath();i.confirm(t.getResourceBundle().getText("baseMSGConfirmDelete"),{title:t.getResourceBundle().getText("Confirm"),onClose:function(e){if(e==sap.m.MessageBox.Action.OK){var i=o.substring(0,o.lastIndexOf("/"));var a=parseInt(o.substring(o.lastIndexOf("/")+1,o.length));var r=t.getModel("localJson").getProperty(i);if(r[a].DocNo){r[a].Flag="D"}else{r.splice(a,1)}t.getModel("localJson").setProperty(i,r)}}})},_onAttachmentItemPress:function(e){if(e.getSource().getBindingContext("localJson").getObject().DocNo){var t=e.getSource().getBindingContext("localJson").getObject();var o=this.getOwnerComponent().getModel().sServiceUrl+"/AttachmentReadSet(DocNo='"+t.DocNo+"',AttachmentId='"+t.AttachmentId+"')/$value";window.open(o,"_blank")}},onSearchWBSDialog:function(){if(!this._WBSDialog){this._WBSDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.WBSSearchDialog",this);this._WBSDialog.setModel(this.getView().getModel())}this._WBSDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{SelectionParameter}"});var t=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"WBSSEARCH");var i=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var r=new sap.ui.model.Filter("SelectionParameter7",sap.ui.model.FilterOperator.Contains,this.WBSCodeGroup);t.push(o);t.push(i);t.push(a);if(this.WBSCodeGroup.length>0){t.push(r)}this._WBSDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchWBS:function(e){var t=new sap.m.StandardListItem({title:"{IdText}",description:"{SelectionParameter}"});var o=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"WBSSEARCH");var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var l=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,o);var s=new sap.ui.model.Filter("SelectionParameter7",sap.ui.model.FilterOperator.Contains,this.WBSCodeGroup);var n=[];n.push(i);n.push(a);n.push(r);n.push(l);if(this.WBSCodeGroup.length>0){n.push(s)}this._WBSDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:n})},onSelectWBSList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.WBSCode=e.getObject().IdNumber;t.getView().byId("idSearchWBSDialog").setValue(e.getObject().IdText)})}else{t.WBSCode="";t.getView().byId("idSearchWBSDialog").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchWBSGroup:function(){if(!this._WBSGroupDialog){this._WBSGroupDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.WBSGroupSearchDialog",this);this._WBSGroupDialog.setModel(this.getView().getModel())}this._WBSGroupDialog.open();var e=new sap.m.StandardListItem({title:"{SelectionParameter7}",description:"{IdNumber}"});var t=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"WBSGROUP");var i=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);t.push(o);t.push(i);t.push(a);this._WBSGroupDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchWBSGroup:function(e){var t=new sap.m.StandardListItem({title:"{SelectionParameter7}",description:"{IdNumber}"});var o=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"WBSGROUP");var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var l=new sap.ui.model.Filter("SelectionParameter7",sap.ui.model.FilterOperator.Contains,o);var s=[];s.push(i);s.push(a);s.push(r);s.push(l);this._WBSGroupDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:s})},onSelectWBSGroupList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.getView().getModel("localJson").setProperty("/selectGroupBoq",false);t.WBSCodeGroup=e.getObject().IdNumber;t.getView().byId("idSearchWBSGroupDialog").setValue(e.getObject().SelectionParameter7)})}else{t.WBSCodeGroup="";t.getView().byId("idSearchWBSGroupDialog").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},cleanWBSDialog:function(){this.WBSCode="";this.getView().byId("idSearchWBSDialog").setValue("")},cleanSearGroupWBS:function(){this.WBSCodeGroup="";this.getView().getModel("localJson").setProperty("/selectGroupBoq",false);this.getView().byId("idSearchWBSGroupDialog").setValue("");this.cleanGroupBoqDialog()},onSearchGroupBoqDialog:function(e){if(!this._GroupBoqDialog){this._GroupBoqDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.GroupBoqSearchDialog",this);this._GroupBoqDialog.setModel(this.getView().getModel())}this._GroupBoqDialog.open();this.sSubBoq2Id=e.getParameters().id;var t=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,this.WBSCodeGroup);var o=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sCoCode);var i=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.m.StandardListItem({title:"{BoqSub}",description:"{BoqDesc}"});var r=[];r.push(t);r.push(o);r.push(i);this._GroupBoqDialog.bindAggregation("items",{path:"/BoqSubItemSet",template:a,filters:r})},handleSearchSubGroupBoq:function(e){var t=new sap.m.StandardListItem({title:"{BoqSub}",description:"{BoqDesc}"});var o=e.getParameter("value");var i=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,this.WBSCodeGroup);var a=[];a.push(i);this._GroupBoqDialog.bindAggregation("items",{path:"/BoqSubItemSet",template:t,filters:a})},onSelectSubGroupBoqList:function(e){var t=this;var o=e.getParameter("selectedContexts");var i=this.getView().getModel("localJson").getProperty("/WBSSet");if(o&&o.length){o.map(function(e){t.sSubBoq=e.getObject().BoqSub;t.getView().byId("idSearchGroupBoqDialog").setValue(e.getObject().BoqDesc);$.each(i,function(t,o){i[t].Group=e.getObject().BoqSub;i[t].BoqDesc=e.getObject().BoqDesc});t.getView().getModel("localJson").setProperty("/WBSSet",i)})}else{sap.m.MessageToast.show("No new item was selected.");t.getView().byId("idSearchGroupBoqDialog").setValue("")}},cleanGroupBoqDialog:function(){var e=this.getView().getModel("localJson").getProperty("/WBSSet");$.each(e,function(t,o){e[t].Group="";e[t].BoqDesc=""});this.getView().getModel("localJson").setProperty("/WBSSet",e);this.getView().getModel("localJson").setProperty("/selectGroupBoq",false);this.getView().byId("idSearchGroupBoqDialog").setValue("")}})});
},
	"com/cicre/po/controller/CreateContract.controller.js":function(){
jQuery.sap.require("sap.m.MessageBox");sap.ui.define(["com/cicre/po/controller/BaseController","com/cicre/po/model/formatter"],function(e,t){"use strict";return e.extend("com.cicre.po.controller.CreateContract",{formatter:t,sCoCode:"",sCoText:"",sSearchCoText:"",sPONO:"",sVendor:"",sProj:"",sProjectCode:"",sPOrg:"",sPlant:"",sPGrp:"",sDocType:"",sDocTypeText:"",BUBoQs:[],WBSBoQs:[],Boqs:[],myBuildingSet:[],myWBSSet:[],aContexts:[],sSubBoq:"",sSubBoqId:"",sSubBoq2:"",sSubBoq2Id:"",_oBuildingDialog:null,_oWBSDialog:null,consultantIndecator:"",sConsultant:"",sConsultantName:"",compInd:"",vendorInd:"",pGrpInd:"",pOrgInd:"",sSearchCoCode:"",sSearchVendor:"",sSearchPGrp:"",sSearchPOrg:"",selectedRefContracts:[],sVendorName:"",GroupCode:"",ModelCode:"",SupeiorWBSCode:"",SupeiorWBSText:"",ODataTree:[],BoqDescR:"",Building:"",ContractCode:"",GroupCodefilter:"",ModelCodefilter:"",ZoneCodefilter:"",BuildingCodefilter:"",ModelCodeFilter:"",ViewCon:"",companycodeTxt:"",SERTYPE:"",SERTYPEText:"",BoqAll:"",BoqDescAll:"",currentYear:"",ccurrentYear:"",years:"",CustomCurrency:"",onInit:function(){var e=this.getRouter();e.getRoute("createContract").attachMatched(this._onRouteMatched,this)},_onRouteMatched:function(e){var t=this;t.sCoCode="1000";t.sCoText="EDSCO",t.getView().byId("idCompanyCode").setValue(t.sCoText);t.sPOrg="1000";t.getView().byId("idPurchaseOrganization").setValue("TMG CENTRAL Purch.");t.sPGrp="SRV";t.getView().byId("idPurchaseGroup").setValue("Service");t.sPlant="",t.getView().byId("idPlant").setValue("ARAB Company For Proj & Dev");t.CustomCurrency=2;t.sDocType="ZSES";t.sProjectCode="";t.getView().byId("_idSearchByProject").setValue("");t.getView().byId("_idSdocumenttype").setValue("");t.getView().byId("idCreationType").setSelectedKey("O");t.getView().byId("idContractDescription").setValue("");t.getView().byId("idLongDescription").setValue("");t.getView().byId("idCurrency").setValue("");t.getView().byId("idMeasurementMethod").setSelectedKey("REMS");t.getView().byId("idConstructionType").setSelectedKey("T");t.getView().byId("idRefrenceContract").setValue("");t.getView().byId("idDocumentDate").setValue("");t.getView().byId("idValidFromDate").setValue("");t.getView().byId("idValidToDate").setValue("");t.getView().byId("idDeliveryDate").setValue("");t.getView().byId("idRevisedValidToDate").setValue("");t.getView().byId("idIndexMonth").setSelectedKeys("");t.getView().byId("idResponsiblepersonSS").setSelectedKey("");t.getView().byId("idResponsiblepersonIR").setSelectedKey("");t.getView().byId("idSupeiorWBS").setValue("");t.getView().byId("idVendor").setValue("");t.getView().byId("idConsultant").setValue("");t.getView().byId("idTolerance").setValue("");t.getView().byId("idTolerance").setVisible(false);t.getView().byId("idMarkUp").setVisible(false);var i=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});t.getView().byId("idDocumentDate").setValue(i.format(new Date));t.IndexMonth();var o=new sap.ui.model.json.JSONModel;var a=[{id:"01",text:"Jan"},{id:"02",text:"Feb"},{id:"03",text:"Mar"},{id:"04",text:"Apr"},{id:"05",text:"May"},{id:"06",text:"Jun"},{id:"07",text:"Jul"},{id:"08",text:"Aug"},{id:"09",text:"Sep"},{id:"10",text:"Oct"},{id:"11",text:"Nov"},{id:"12",text:"Dec"}];var r=[{id:"C",text:"Contingency"},{id:"U",text:"Unit rate"},{id:"L",text:"lumpsum"},{id:"P",text:"Provisional Sum"},{id:"R",text:"Remeasured"}];o.setData({estimatedMode:false,BuildingSet:[],WBSSet:[],BoqModelSet:[],BoqItemSet:[],BoqMatGrpSet:[],myBuildingSet:[],AttachmentSet:[],myWBSSet:[],MessageSet:[],MessagesLength:[],selectedBuilding:[],IndexMonths:this.years,Service_TYPE:r,selectedRefContracts:[],EstimatedContracts:[],SupeiorWBSSet:[],selectedBuildingOrWBS:[],BoqConsulidatedItemSet:[],myBuildingSet:[],HeadToHeadVariation:[],AsbuildService:[],EstimatedContractValue:"0.00",OriginalContractValue:"0.00",VariationOrderValue:"0.00",AddendumValue:"0.00",TotalContractValue:"0.00",RevisedContractValue:"0.00",BuildingNO:"0.00",WbslistNo:"0:00",ServicNOCount:"0.00",projectText:"",selectBoq:false,selectGroupBoq:false,myPurchaseRequisition:[],selectedPR:[],PRItemSet:[]});t.getView().setModel(o,"localJson");var s=new sap.ui.model.json.JSONModel;s.setData({VariationMode:true,ViewCon1:false,ViewCon2:true,ViewCon4:false,ViewCon3:true,VReleasedMode:"",Buildings:[],Buildingss:[]});t.getView().setModel(s,"localJso")},onDisplaySearchCompDialog:function(e){this.compInd=e.getParameters().id;if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.CompanySearchDialog",this);this._oDialog.setModel(this.getView().getModel())}this._oDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var i=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"CompCode");i.push(o);this._oDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:i})},handleSearchComp:function(e){var t=e.getParameter("value");var i=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var a=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"CompCode");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);o.push(a);o.push(r);this._oDialog.bindAggregation("items",{path:"/ValueHelpSet",template:i,filters:o})},onSelectCompanyList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){if(t.compInd==="idSearchByCompany"){t.sSearchCoCode=e.getObject().IdNumber;sap.ui.getCore().byId("idSearchByCompany").setValue(e.getObject().IdText)}else{t.sCoCode=e.getObject().IdNumber;t.sCoText=e.getObject().IdText;t.getView().byId("idCompanyCode").setValue(e.getObject().IdText);t.getView().getModel("localJson").setProperty("/projectText",t.sCoText)}})}else{t.sCoCode="";t.sCoText="";t.getView().getModel("localJson").setProperty("/projectText",t.sCoText);sap.m.MessageToast.show("No new item was selected.");t.getView().byId("idCompanyCode").setValue("")}e.getSource().getBinding("items").filter([]);this.compInd=""},onSearchCompanyChange:function(){this.sCoCode="";this.sCoText="";this.getView().getModel("localJson").setProperty("/projectText",this.sCoText)},onserviceTypeValueHelpPress:function(){if(!this._oDocTypeDialog){this._oDocTypeDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ServiceTypeSearchDialog",this);this._oDocTypeDialog.setModel(this.getView().getModel())}this._oDocTypeDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"MSERTYPE");t.push(i);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchServicetype:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"MSERTYPE");var o=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];r.push(i);r.push(o);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:r})},onSelectServicetypeList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.SERTYPE=e.getObject().IdNumber;t.SERTYPEText=e.getObject().IdText;t.getView().byId("idserviceType").setValue(e.getObject().IdText)})}else{t.SERTYPE="";t.SERTYPEText="";t.getView().byId("idserviceType").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchDocTypeDialog:function(){if(!this._oDocTypeDialog){this._oDocTypeDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.DocumentSearchDialog",this);this._oDocTypeDialog.setModel(this.getView().getModel())}this._oDocTypeDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"DocType");t.push(i);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchDocument:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"DocType");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];r.push(i);r.push(o);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:r})},onSelectDocumentList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sDocType=e.getObject().IdNumber;t.sDocTypeText=e.getObject().IdText;t.getView().byId("idDocType").setValue(e.getObject().IdText)})}else{t.sDocType="";t.sDocTypeText="";t.getView().byId("idDocType").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchVendorDialog:function(e){this.vendorInd=e.getParameters().id;if(this._oVendorDialog){this._oVendorDialog.destroy();this._oVendorDialog=null}if(!this._oVendorDialog){this._oVendorDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.VendorSearchDialog",this);this._oVendorDialog.setModel(this.getView().getModel())}this._oVendorDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var i=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Vendor");var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.vendorInd==="idSearchByVendor"?this.sSearchCoText:this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.vendorInd==="idSearchByVendor"?this.sSearchPOrg:this.sPOrg);i.push(o);i.push(a);i.push(r);this._oVendorDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:i})},handleSearchVendor:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Vendor");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sPOrg);var s=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var l=[];l.push(i);l.push(o);l.push(a);l.push(r);this._oVendorDialog.bindAggregation("items",{path:"/ValueHelpSet",template:s,filters:l})},onSelectVendorList:function(e){var t=this;var i=t.getView().getModel();var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.sVendor=e.getObject().IdNumber;t.sVendorName=e.getObject().IdText;t.getView().byId("idVendor").setValue(e.getObject().IdText);let o=t.sVendor;let a=i.bindContext("/GetCurrencyExecuteAction(...)");a.setParameter("Vendor",o);a.execute().then(()=>{const e=a.getBoundContext();let i=e.getObject();console.log("Currency Data:",i);if(i&&i.Currency){t.getView().byId("idCurrency").setValue(i.Currency);t.getView().getModel("localJson").setProperty("/Currency",i.Currency)}else{sap.m.MessageToast.show("No currency data returned")}}).catch(e=>{console.error("Error executing action: ",e);sap.m.MessageBox.error("Failed to fetch currency")})})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([]);t.consultantIndecator="";t.vendorInd=""},onDisplaySearchProjDialog:function(){if(!this._oProjDialog){this._oProjDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ProjSearchDialog",this);this._oProjDialog.setModel(this.getView().getModel())}this._oProjDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Zone");var o=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var r=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,this.ModelCode);var s=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.Contains,this.Building);var l=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.Contains,this.GroupCode);t.push(i);t.push(o);t.push(a);if(this.ModelCode.length>0){t.push(r)}if(this.Building.length>0){t.push(s)}if(this.GroupCode.length>0){t.push(l)}this._oProjDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchProj:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Zone");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,this.ModelCode);var l=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.Contains,this.Building);var n=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.Contains,this.GroupCode);var d=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var g=[];g.push(i);g.push(o);g.push(a);g.push(r);if(this.ModelCode.length>0){g.push(s)}if(this.Building.length>0){g.push(l)}if(this.GroupCode.length>0){g.push(n)}this._oProjDialog.bindAggregation("items",{path:"/ValueHelpSet",template:d,filters:g})},onSelectProjList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sProj=e.getObject().IdNumber;t.getView().byId("idSearchByProject").setValue(e.getObject().IdText)})}else{t.sProj="";t.getView().byId("idSearchByProject").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchModel:function(){if(!this._ModelDialog){this._ModelDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ModelSearchDialog",this);this._ModelDialog.setModel(this.getView().getModel())}this._ModelDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Model");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,this.sCoCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var r=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.sProj);var s=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.EQ,this.Building);var l=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.Contains,this.GroupCode);t.push(i);t.push(o);t.push(a);if(this.sProj.length>0){t.push(r)}if(this.Building.length>0){t.push(s)}if(this.GroupCode.length>0){t.push(l)}this._ModelDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchModel:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Model");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.sProj);var l=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.EQ,this.Building);var n=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.Contains,this.GroupCode);var d=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var g=[];g.push(i);g.push(o);g.push(a);g.push(r);if(this.sProj.length>0){g.push(s)}if(this.Building.length>0){g.push(l)}if(this.GroupCode.length>0){g.push(n)}this._ModelDialog.bindAggregation("items",{path:"/ValueHelpSet",template:d,filters:g})},onSelectModelList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.ModelCode=e.getObject().IdNumber;t.getView().getModel("localJson").setProperty("/selectBoq",false);t.getView().byId("idSearchByModel").setValue(e.getObject().IdText)})}else{t.ModelCode="";t.getView().byId("idSearchByModel").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearBuilding:function(){if(!this._BuildingDialog){this._BuildingDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.BuildingSearchDialog",this);this._BuildingDialog.setModel(this.getView().getModel())}this._BuildingDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"BUILDINGID");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.sProj);var s=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.EQ,this.ModelCode);var l=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.EQ,this.GroupCode);t.push(i);if(this.sProjectCode.length>0){t.push(o)}if(this.sProj.length>0){t.push(r)}if(this.ModelCode.length>0){t.push(s)}if(this.GroupCode.length>0){t.push(l)}t.push(a);this._BuildingDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchBuilding:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"BUILDINGID");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.sProj);var l=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.EQ,this.ModelCode);var n=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.EQ,this.GroupCode);var d=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var g=[];g.push(i);if(this.sProjectCode.length>0){g.push(r)}g.push(a);g.push(o);if(this.sProj.length>0){g.push(s)}if(this.ModelCode.length>0){g.push(l)}if(this.GroupCode.length>0){g.push(n)}this._BuildingDialog.bindAggregation("items",{path:"/ValueHelpSet",template:d,filters:g})},onSelectBuilding:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.Building=e.getObject().IdNumber;t.getView().byId("_IdBuilding").setValue(e.getObject().IdText)})}else{t.Building="";t.getView().byId("_IdBuilding").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearGroup:function(){if(!this._GroupDialog){this._GroupDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.GroupSearchDialog",this);this._GroupDialog.setModel(this.getView().getModel())}this._GroupDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Group");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProj);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,this.ModelCode);var s=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.Contains,this.Building);t.push(i);if(this.sProj.length>0){t.push(o)}if(this.ModelCode.length>0){t.push(r)}if(this.Building.length>0){t.push(s)}t.push(a);this._GroupDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchGroup:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Group");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProj);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,this.ModelCode);var l=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.Contains,this.Building);var n=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var d=[];d.push(i);if(t!==""){d.push(r)}d.push(a);if(this.sProj.length>0){d.push(o)}if(this.ModelCode.length>0){d.push(s)}if(this.Building.length>0){d.push(l)}this._GroupDialog.bindAggregation("items",{path:"/ValueHelpSet",template:n,filters:d})},onSelectGroupList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.GroupCode=e.getObject().IdNumber;t.getView().byId("idSearchByGroup").setValue(e.getObject().IdText)})}else{t.GroupCode="";t.getView().byId("idSearchByGroup").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},handleSearWBS:function(){var e=this;if(!this._GroupDialog){this._GroupDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SuperiorWBSSearchDialog",this);this._GroupDialog.setModel(this.getView().getModel())}var t=e.getView().getModel();var i=new sap.ui.model.json.JSONModel;i.setData({SupeiorWBSSet:[]});e._SuperiorWBSDialog.setModel(i,"localJson");var o=[];var a=[];var r=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var s=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var l=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var n=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,sap.ui.getCore().byId("idDesc").getValue());var d=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().byId("idlenth").getValue());o.push(r);o.push(s);o.push(l);if(sap.ui.getCore().byId("idDesc").getValue()!==""){o.push(n)}if(sap.ui.getCore().byId("idlenth").getValue()!==""){o.push(d)}if(sap.ui.getCore().byId("idlenth").getValue()===""){var d=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,500);o.push(d)}t.read("/ValueHelpSet",{filters:o,success:function(t){var i=JSON.parse(JSON.stringify(t.results));e._SuperiorWBSDialog.getModel("localJson").setProperty("/SupeiorWBSSet",i)},error:function(e){sap.m.MessageToast.show("Error")}})},onSelectCheque:function(e){this.SupeiorWBSText=e.getParameters().rowContext.getObject().IdText;this.SupeiorWBSCode=e.getParameters().rowContext.getObject().IdNumber;this.getView().byId("idSupeiorWBS").setValue(this.SupeiorWBSText);this._SuperiorWBSDialog.close();this._SuperiorWBSDialog.destroy();this._SuperiorWBSDialog=null},_handleCancelPresswbs:function(){var e=this;this.SupeiorWBSText="";this.SupeiorWBSCode="";this.getView().byId("idSupeiorWBS").setValue("");e._SuperiorWBSDialog.close();e._SuperiorWBSDialog.destroy();e._SuperiorWBSDialog=null},onDisplaySearchidSupeiorWBSDialog:function(){if(this.sCoCode&&this.sProjectCode){if(!this._SuperiorWBSDialog){this._SuperiorWBSDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SuperiorWBSSearchDialog",this);this._SuperiorWBSDialog.setModel(this.getView().getModel())}this._SuperiorWBSDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,1e3);t.push(i);t.push(o);t.push(a);t.push(r);this._SuperiorWBSDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})}else{sap.m.MessageToast.show(this.getView().getModel("i18n").getResourceBundle().getText("Msg_Error_Select_WBS_C"))}},handleSearchSuperior:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,1e3);var l=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var n=[];n.push(i);n.push(o);n.push(a);n.push(r);n.push(s);this._SuperiorWBSDialog.bindAggregation("items",{path:"/ValueHelpSet",template:l,filters:n})},onSelectSuperiorList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.SupeiorWBSText=e.getObject().IdText;t.SupeiorWBSCode=e.getObject().IdNumber;t.getView().byId("idSupeiorWBS").setValue(e.getObject().IdText)})}else{t.SupeiorWBSText="";t.SupeiorWBSCode="";t.getView().byId("idSupeiorWBS").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchPOrgDialog:function(e){this.pOrgInd=e.getParameters().id;if(!this._oPOrgDialog){this._oPOrgDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.PurchaseOrgSearchDialog",this);this._oPOrgDialog.setModel(this.getView().getModel())}this._oPOrgDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var i=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PORG");var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.pOrgInd==="idSearchPurchaseOrganization"?this.sSearchCoCode:this.sCoCode);i.push(o);i.push(a);this._oPOrgDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:i})},handleSearchPOrg:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PORG");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sCoCode);var r=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var s=[];s.push(i);s.push(o);s.push(a);this._oPOrgDialog.bindAggregation("items",{path:"/ValueHelpSet",template:r,filters:s})},onSelectPOrgList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){if(t.pOrgInd==="idSearchPurchaseOrganization"){t.sSearchPOrg=e.getObject().IdNumber;sap.ui.getCore().byId("idSearchPurchaseOrganization").setValue(e.getObject().IdText)}else{t.sPOrg=e.getObject().IdNumber;t.getView().byId("idPurchaseOrganization").setValue(e.getObject().IdText)}})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([]);t.sSearchPOrg=""},onDisplayDocType:function(e){if(!this._sdoctypeDialog){this._sdoctypeDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.DocumentType",this);this._sdoctypeDialog.setModel(this.getView().getModel())}this._sdoctypeDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var i=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"DOC_TYPE");i.push(o);this._sdoctypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:i})},handleSearchDocType:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"DOC_TYPE");var o=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];r.push(i);r.push(o);this._sdoctypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:r})},onSelectDocTypeList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sDocTypeText=e.getObject().IdText;t.sDocType=e.getObject().IdNumber;t.getView().byId("_idSdocumenttype").setValue(e.getObject().IdText)})}else{t.sDocTypeText="";t.sDocType="";t.getView().byId("_idSdocumenttype").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchPGrpDialog:function(e){this.pGrpInd=e.getParameters().id;if(!this._oPGrpDialog){this._oPGrpDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.PurchaseGrpSearchDialog",this);this._oPGrpDialog.setModel(this.getView().getModel())}this._oPGrpDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var i=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PGRP");i.push(o);this._oPGrpDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:i})},handleSearchPGrp:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PGRP");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];r.push(i);r.push(o);this._oPGrpDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:r})},onSelectPGrpList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){if(t.pGrpInd==="idSearchPurchaseGroup"){t.sSearchPGrp=e.getObject().IdNumber;sap.ui.getCore().byId("idSearchPurchaseGroup").setValue(e.getObject().IdText)}else{t.sPGrp=e.getObject().IdNumber;t.getView().byId("idPurchaseGroup").setValue(e.getObject().IdText)}})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([]);t.pGrpInd=""},onDisplaySearchPlantDialog:function(){if(!this._oPlantDialog){this._oPlantDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.PlantSearchDialog",this);this._oPlantDialog.setModel(this.getView().getModel())}this._oPlantDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PLANT");var o=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sPOrg);t.push(i);t.push(o);this._oPlantDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchPlant:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PLANT");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sPOrg);var r=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var s=[];s.push(i);s.push(o);s.push(a);this._oPlantDialog.bindAggregation("items",{path:"/ValueHelpSet",template:r,filters:s})},onSelectPlantList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sPlant=e.getObject().IdNumber;t.getView().byId("idPlant").setValue(e.getObject().IdText)})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchSubBoqDialog:function(e){if(!this._oSubBoqDialog){this._oSubBoqDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SubBoqSearchDialog",this);this._oSubBoqDialog.setModel(this.getView().getModel())}this._oSubBoqDialog.open();this.sSubBoqId=e.getParameters().id;var t=e.getSource().getBindingContext("localJson").getObject().Model;this.BoqDescR=e.getSource().getBin=e.getSource().getBindingContext("localJson").getObject();var i=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,t);var o=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var r=new sap.m.StandardListItem({title:"{BoqSub}",description:"{BoqDesc}"});var s=[];s.push(i);s.push(o);s.push(a);this._oSubBoqDialog.bindAggregation("items",{path:"/BoqSubItemSet",template:r,filters:s})},onDisplay2SearchSubBoqDialog:function(e){if(!this._oSubBoq2Dialog){this._oSubBoq2Dialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SubBoqSearchDialog",this);this._oSubBoq2Dialog.setModel(this.getView().getModel())}this._oSubBoq2Dialog.open();this.sSubBoq2Id=e.getParameters().id;this.BoqDescR=e.getSource().getBindingContext("localJson").getObject();var t=e.getSource().getBindingContext("localJson").getObject().SelectionParameter6;var i=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,t);var o=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var r=new sap.m.StandardListItem({title:"{BoqSub}",description:"{BoqDesc}"});var s=[];s.push(i);s.push(o);s.push(a);this._oSubBoq2Dialog.bindAggregation("items",{path:"/BoqSubItemSet",template:r,filters:s})},onSelectSubBoqList:function(e){var t=this;var i;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){if(t.sSubBoqId!==""){t.sSubBoq=e.getObject().BoqSub;i=e.getObject().BoqDesc;sap.ui.getCore().byId(t.sSubBoqId).setValue(e.getObject().BoqSub);t.BoqDescR.BoqDesc=i}if(t.sSubBoq2Id!==""){t.sSubBoq2=e.getObject().BoqSub;i=e.getObject().BoqDesc;sap.ui.getCore().byId(t.sSubBoq2Id).setValue(e.getObject().BoqSub);t.BoqDescR.BoqDesc=i}})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([]);this.sSubBoq2Id="";this.sSubBoqId=""},onAddBuildingsCreate:function(){var e=this;if(e.sProjectCode!==""&&e.sCoCode!==""){if(!e._oBuildingDialog){e._oBuildingDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SelectMultiBuildingCreate",e.getView().getController());var t=new sap.ui.model.resource.ResourceModel({bundleUrl:"i18n/i18n.properties"});e._oBuildingDialog.setModel(t,"i18n");e._oBuildingDialog.setModel(e.getView().getModel())}e._oBuildingDialog.open();if(e._oBuildingDialog.getModel("localJson"))e._oBuildingDialog.getModel("localJson").setProperty("/BuildingSet",[]);e.aContexts=[];e.Boqs=[];e.BUBoQs=[];e.WBSBoQs=[]}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}},onAfterCloseWBS:function(e){var t=this;this._oWBSDialog.destroy();this._oWBSDialog=null},onAfterCloseBuilding:function(e){this._oBuildingDialog.destroy();this._oBuildingDialog=null},onActionAfterClose:function(e){var t=this;e.getSource().destroy();t._actionSheet=null},_handleCancelPressBuilding:function(e){var t=this;var i=t.getView().getModel("localJson").getProperty("/selectedBuilding");var o=[];for(var a=0;a<t.myBuildingSet.length;a++){var r=false;$.each(i,function(e,i){if(t.myBuildingSet[a].BuildingNo===i.BuildingNo)r=true});if(!r){o.push(t.myBuildingSet[a])}}t.myBuildingSet=JSON.parse(JSON.stringify(o));t.getView().getModel("localJson").setProperty("/myBuildingSet",t.myBuildingSet);t.getView().getModel("localJson").setProperty("/selectedBuilding",[]);t._oBuildingDialog.close();this.onAfterCloseBuilding(e)},handleSearchBuildingPress:function(e){var t=this;var i=t.getView().getModel(),o=[],a=t.getView().getModel("localJson"),r=true;var s=new sap.ui.model.Filter("Zone",sap.ui.model.FilterOperator.EQ,t.sProj);var l=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,t.sCoCode);var n=new sap.ui.model.Filter("BuildingNo",sap.ui.model.FilterOperator.EQ,t.Building);var d=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,t.sProjectCode);var g=new sap.ui.model.Filter("Group",sap.ui.model.FilterOperator.EQ,t.GroupCode);var u=new sap.ui.model.Filter("Model",sap.ui.model.FilterOperator.EQ,t.ModelCode);o.push(l);o.push(d);if(t.sProj!=="")o.push(s);if(t.Building!=="")o.push(n);if(t.GroupCode!==""){o.push(g)}if(t.ModelCode!==""){o.push(u)}i.read("/BuildingSet",{filters:o,success:function(e){$.each(e.results,function(i,o){e.results[i].Model=e.results[i].Model;if(i==0){t.oldmodelvalue=e.results[i].Model}if(t.oldmodelvalue!=e.results[i].Model||t.oldmodelvalue===""){r=false}});t.BoqAll="";t.BoqDescAll="";t.getView().byId("idhandboq").setValue(t.BoqDescAll);var i=JSON.parse(JSON.stringify(e.results));a.setProperty("/BuildingSet",i);a.refresh();if(t.oldmodelvalue===""){r=false}if(r){t.getView().getModel("localJson").setProperty("/selectBoq",true)}},error:function(e){sap.m.MessageToast.show("Error")}})},onSelectionChange:function(e){var t=this;var i=e.getSource();var o=true,a=[],r=[];t.BUBoQs=[];t.WBSBoQs=[];var s=t.getView().getModel("localJson").getProperty("/selectedBuilding"),l=this._BuildinDialog.getTable().getSelectedIndices();t.myBuildingSet=t.getView().getModel("localJson").getProperty("/myBuildingSet");var n=t.getView().getModel("localJson").getProperty("/selectedBuildingOrWBS");if(l.length>0){for(var d=0;d<l.length;d++){var g=this._BuildinDialog.getTable().getContextByIndex(l[d]).getObject();g.ChangeIndicator="AddB";a.push(g)}$.each(a,function(e,t){if(t.Group===""){r.push(t.BuildingNo);o=false}});$.each(t.myBuildingSet,function(e,t){$.each(a,function(e,i){if(i.BuildingNo===t.BuildingNo&&t.Model===i.Model&&t.Group===i.Group){r.push(t.BuildingNo);o=false}})});if(o){$.each(a,function(e,i){a[e].SubBoq=a[e].Group;a[e].ContractualIndicator="O";a[e].ModelType="BUILD";a[e].SrvStatus="UA";a[e].Txt="Original";a[e].DelInd="";t.myBuildingSet.push(a[e]);n.push(a[e]);s.push(a[e])});t.getView().getModel("localJson").setProperty("/selectedBuilding",s);t.getView().getModel("localJson").setProperty("/selectedBuildingOrWBS",n);t.aContexts.push(a);this.onBuildingContractClose();this._handleValueHelpCloseBuilding()}else if(!o){var u=r.join();sap.m.MessageToast.show("Model and  Boq is already added or don't select Boq"+u);r=[]}}},_handleValueHelpCloseBuilding:function(e){var t=this,i=t.getView().getModel();t.getView().setBusy(true);var o=t.getView().getModel();var a=t.getView().getModel("localJson").getProperty("/selectedBuilding");var r=t.getView().getModel("localJson").getProperty("/selectedBuildingOrWBS"),s=[];var l=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));if(t.aContexts.length===0)sap.m.MessageToast.show("Select one Building at least!");else{var n=false;$.each(t.myBuildingSet,function(e,t){if(t.Group===""){n=true}});if(n)sap.m.MessageToast.show("Select Boq for each Building!");else{$.each(a,function(e,i){t.BUBoQs.push(i.Model+i.Group)});t.BUBoQs.sort();var d=null;var g=0;var u=[];t.getView().getModel("localJson").setProperty("/selectBoq",false);t.oldmodelvalue="";t.BoqDescAll="";t.BoqAll="";t.getView().getModel("localJson").setProperty("/myBuildingSet",t.myBuildingSet);t.getView().getModel("localJson").setProperty("/myBuildingSet",t.myBuildingSet);this.objSet=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));this.selectedBuilding=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/selectedBuilding")));var c=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));this.getView().setBusy(true);$.each(r,function(e,t){var i=new sap.ui.model.Filter("Data",sap.ui.model.FilterOperator.BT,t.Model,t.Group);if(i!==""){u.push(i)}});var p=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,t.sProjectCode);if(p!==""){u.push(p)}var h=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,t.sCoCode);if(h!==""){u.push(h)}i.read("/BoqTreeSet",{filters:u,success:function(e,i){e=e.results;var o=1;var a=[];$.each(e,function(t,i){if(e[t].LevelNo==="1"){e[t].live="one";e[t].AddNew="AN"}if(e[t].Eancat===""&&parseInt(e[t].LevelNo)===4){e[t].Qty="0";e[t].Uom="";e[t].Price="0"}e[t].DelInd="";e[t].ModelType="BOQ";if(e[t].Eancat==="U"){e[t].Qty=0}if(parseInt(e[t].LevelNo)===4){e[t].Txt="Original";if(e[t].Eancat!=""){e[t].PriceUnit="1";e[t].Price="1"}e[t].DelInd="";e[t].ContractualIndicator="O";e[t].Indicator="Y"}else{e[t].Indicator="Z"}});for(o;o<e.length+1;o++){a.push({[o]:[]});for(var r=0;r<e.length;r++){e[r].Categories=[];if(parseInt(e[r].LevelNo)===o){a[o-1][o].push(e[r])}}}var s=[];$.each(a,function(e,t){if(e<3){$.each(t,function(t,i){if(i.length!==0){$.each(i,function(t,i){$.each(a[e+1],function(e,t){$.each(t,function(e,t){if(t.length!==0){if(i.LevelId===t.Parent){i.Categories.push(t)}}})})})}})}});$.each(a[0],function(e,t){if(t.length!==0){$.each(t,function(e,t){s.push(t)})}});var l=false;var n=false;$.each(s,function(e,i){l=false;n=false;if(t.objSet.length!==0){$.each(t.objSet,function(o,a){$.each(i.Categories,function(r,d){$.each(a.Categories,function(e,t){if(i.Data===a.Data){l=true;if(d.Data===t.Data){n=true}}});if(l&&!n){if(d.Model===a.Model){t.objSet[o].Categories.push(s[e].Categories[r]);n=false}}})});if(!l&&!n){t.objSet.push(i);l=false;n=false}}else{t.objSet.push(i)}n=false;l=false});t.getView().getModel("localJson").setProperty("/BoqItemSet",t.objSet);t.getView().getModel("localJson").setProperty("/selectedBuildingOrWBS",[]);t.Consoliatedservices();t.getView().setBusy(false);var a=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var d=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(a,function(e,t){$.each(t.Categories,function(t,i){$.each(i.Categories,function(i,o){$.each(o.Categories,function(o,r){a[e].PriceUnit="0";a[e].Categories[t].PriceUnit="0";a[e].Categories[t].Categories[i].PriceUnit="0";a[e].Categories[t].Categories[i].Categories[o].Matdesc=a[e].Categories[t].Categories[i].ShortDesc})})})});var g;$.each(a,function(e,i){$.each(i.Categories,function(i,o){$.each(o.Categories,function(o,r){$.each(r.Categories,function(r,s){g=d.find(e=>e.Data===s.Data);if(g.Data===s.Data){var l=false;$.each(t.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===s.Model){l=true}});$.each(t.myWBSSet,function(e,t){if(t.Model===s.Model){l=true}});if(l){var n=JSON.parse(JSON.stringify(g.PriceUnit));a[e].Categories[i].Categories[o].Categories[r].price=n;a[e].Categories[i].Categories[o].Categories[r].PriceUnit=(n*parseFloat(a[e].Categories[i].Categories[o].Categories[r].Qty)).toString();if(s.Eancat!=="C"&&s.Eancat!=="U"){a[e].PriceUnit=(parseFloat(a[e].PriceUnit)+n*parseFloat(a[e].Categories[i].Categories[o].Categories[r].Qty)).toString()}if(s.Eancat!=="C"&&s.Eancat!=="U"){a[e].Categories[i].PriceUnit=(parseFloat(a[e].Categories[i].PriceUnit)+n*parseFloat(a[e].Categories[i].Categories[o].Categories[r].Qty)).toString()}if(s.Eancat!=="C"&&s.Eancat!=="U"){a[e].Categories[i].Categories[o].PriceUnit=(parseFloat(a[e].Categories[i].Categories[o].PriceUnit)+n*parseFloat(a[e].Categories[i].Categories[o].Categories[r].Qty)).toString()}}}})})})});t.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(a.sort((e,t)=>e.Data-t.Data))));t.ContractValueHeader();t.getView().setBusy(false)},error:function(e){sap.m.MessageToast.show("Error")}})}}},_longTextDialog:null,onPressLongText:function(e){var t=this;t.itemIndex=e.getSource().getBindingContext("localJson").getPath();var i=e.getSource().getBindingContext("localJson").getObject();if(!t._longTextDialog){t._longTextDialog=sap.ui.xmlfragment(t.getView().getId(),"com.cicre.po.view.fragments.ServiceLongText",t);t.getView().addDependent(t._longTextDialog)}t._longTextDialog.open();t.getView().byId("idLongText").setText(i.LongDesc)},groupcon3:function(e){var t=this;var i=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var o=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(o,function(e,t){$.each(i,function(e,t){$.each(t.Categories,function(e,t){$.each(t.Categories,function(e,t){})})})})},onCloseLongTextFragment:function(e){this._longTextDialog.close()},onSavePress:function(){var e=this;var t=this.getView();var i=t.getModel("i18n").getResourceBundle();var o=e.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet");var a=e.getView().getModel("localJson").getProperty("/BoqItemSet");var r=e.getView().getModel("localJson").getProperty("/myPurchaseRequisition"),s=e.getView().getModel("localJson").getProperty("/PRItemSet");var l=e.getView().getModel("localJson").getProperty("/AttachmentSet"),n=e.getView().getModel("localJson").getProperty("/EstimatedContracts"),d=[],g=[],u=[],c=[],p=[],h={};var m=[this.getView().byId("idCompanyCode"),this.getView().byId("idPurchaseOrganization"),this.getView().byId("idPurchaseGroup"),this.getView().byId("idPlant"),this.getView().byId("idDocumentDate"),this.getView().byId("idValidFromDate"),this.getView().byId("idValidToDate"),this.getView().byId("idDeliveryDate"),this.getView().byId("_idSearchByProject"),this.getView().byId("idVendor"),this.getView().byId("idContractDescription"),this.getView().byId("_idSdocumenttype")];if(e.getView().byId("idCreationType").getSelectedKey()=="E"){if(e.SupeiorWBSCode==""){this.getView().byId("idSupeiorWBS").setValueState("Error");return}else{this.getView().byId("idSupeiorWBS").setValueState("None")}}var S=new sap.m.Dialog({title:i.getText("Confirm"),type:"Message",content:new sap.m.Text({text:i.getText("Msg_Confirm_Craete")}),beginButton:new sap.m.Button({text:i.getText("Confirm"),type:"Emphasized",press:function(){if(e.getView().byId("idMeasurementMethod").getSelectedKey()==="REMS")var t=true;jQuery.each(m,function(e,t){t.setValueState("None")});jQuery.each(m,function(e,t){if(!t.getValue()){t.setValueState("Error")}});jQuery.each(m,function(e,i){if("Error"===i.getValueState()){t=false;return}});if(!t){sap.m.MessageToast.show("Please Enter Manadatory Fields");S.close();return}else{$.each(e.myBuildingSet,function(e,t){p.push(t)});$.each(e.myWBSSet,function(e,t){p.push(t)});$.each(r,function(e,t){t.Group="";t.Project="";t.Model="";p.push(t)});$.each(p,function(e,t){c.push({PoHeader:"",Buildingno:t.BuildingNo,Zone:t.Project,Model:t.Model,Submodel:t.Group,ContractualIndicator:"O",TextContInd:"",VariationOrder:"",ChangeIndicator:"AddB",DeleteIndicator:"",SrvStatus:"UA",Network:t.Network,Type:t.ModelType})});if(r.length>0){$.each(s,function(t,i){$.each(i.Categories,function(t,o){$.each(o.Categories,function(t,a){d.push({PoHeader:"",PoItem:"",SubBoq:a.SubModel,DeleteInd:"",Plant:e.sPlant,MatlGroup:a.MatlGroup,Qty:parseFloat(a.Qty.toString()).toFixed(2),PoUnit:"",PriceUnit:a.PriceUnit.toString(),ItemCat:"",Acctasscat:"",Boq:a.Model,ShortText:a.ShortDesc,LongText:a.LongDesc,Serviceno:a.Data,Servicedesc:a.ShortDesc,BaseUom:a.Uom,WbsElement:"",NoLimit:"X",Buildingno:i.PrNumber,Project:"",OvfTol:a.OvfTol,ChangeIndicator:"AddB",DeliveryDate:e.getView().byId("idDeliveryDate").getValue(),ContractualIndicator:"O",SrvStatus:"UA",ServiceType:a.Eancat,Currency:e.getView().byId("idCurrency").getValue(),IuidRelevant:"P",PrItem:a.Item,Network:i.Network,ActivityNumber:o.ActivityNumber})})})})}$.each(a,function(t,i){$.each(i.Categories,function(t,o){$.each(o.Categories,function(t,o){$.each(o.Categories,function(t,a){d.push({PoHeader:"",PoItem:"",SubBoq:a.SubModel,DeleteInd:"",Plant:e.sPlant,MatlGroup:a.Item,Qty:parseFloat(a.Qty.toString()).toFixed(2),PoUnit:"",Matdesc:o.ShortDesc,PriceUnit:a.PriceUnit.toString(),ItemCat:"D",Acctasscat:"P",Boq:a.Model,ShortText:a.ShortDesc,LongText:a.LongDesc,Serviceno:a.Data,Servicedesc:a.ShortDesc,BaseUom:a.Uom,WbsElement:"",NoLimit:"X",Buildingno:"",Project:"",OvfTol:a.OvfTol,ChangeIndicator:"AddB",DeliveryDate:e.getView().byId("idDeliveryDate").getValue(),ContractualIndicator:"O",SrvStatus:"UA",ServiceType:a.Eancat,Currency:e.getView().byId("idCurrency").getValue(),IuidRelevant:i.ModelType==="WBS"?"X":""})})})})});var i;$.each(d,function(t,a){i=o.find(e=>e.Data===a.Serviceno);if(a.Serviceno===i.Data){d[t].PriceUnit=parseFloat(i.PriceUnit).toFixed(e.CustomCurrency);d[t].BaseUom=i.Uom;d[t].ProvisionRate=i.ProvisionRate?i.ProvisionRate.toString():"0"}});if(e.getView().byId("idNote").getValue()!==""){h={PoNumber:"",NoteText:e.getView().byId("idNote").getValue(),Flag:"X"}}setTimeout(function(){var t={PoNumber:"",Flag:"",DocType:e.sDocType,Project:e.sProjectCode,Vendor:e.sVendor,PurchOrg:e.sPOrg,PurchDoc:"",Message:"",PurGroup:e.sPGrp,CompCode:e.sCoCode,DocDate:e.getView().byId("idDocumentDate").getValue()===""?null:e.getView().byId("idDocumentDate").getValue(),VperStart:e.getView().byId("idValidFromDate").getValue()===""?null:e.getView().byId("idValidFromDate").getValue(),VperEnd:e.getView().byId("idValidToDate").getValue()===""?null:e.getView().byId("idValidToDate").getValue(),Status:"",DeleteInd:"",ContractDesc:e.getView().byId("idContractDescription").getValue(),LongDesc:e.getView().byId("idLongDescription").getValue(),Currency:e.getView().byId("idCurrency").getValue(),MeasMethod:e.getView().byId("idMeasurementMethod").getSelectedKey(),ConstructionType:e.getView().byId("idConstructionType").getSelectedKey(),RefContract:e.getView().byId("idRefrenceContract").getValue(),CreationDate:e.getView().byId("idDocumentDate").getValue()===""?null:e.getView().byId("idDocumentDate").getValue(),ValidFrom:e.getView().byId("idValidFromDate").getValue()===""?null:e.getView().byId("idValidFromDate").getValue(),ValidTo:e.getView().byId("idValidToDate").getValue()===""?null:e.getView().byId("idValidToDate").getValue(),SigninDate:e.getView().byId("idDeliveryDate").getValue()===""?null:e.getView().byId("idDeliveryDate").getValue(),RevisedValidTo:e.getView().byId("idRevisedValidToDate").getValue()===""?null:e.getView().byId("idRevisedValidToDate").getValue(),IndexMonth:e.getView().byId("idIndexMonth").getSelectedKeys().join(),Consultant:e.sConsultant,ConsultantName:e.sConsultantName,Ss:e.getView().byId("idResponsiblepersonSS").getSelectedKey(),Ir:e.getView().byId("idResponsiblepersonIR").getSelectedKey(),SuperiorWbs:e.SupeiorWBSCode,CreationType:e.getView().byId("idCreationType").getSelectedKey(),MarkUp:e.getView().byId("idMarkUp").getValue()===""?"0.0":e.getView().byId("idMarkUp").getValue(),VendorName:e.sVendorName,POHeaderToPOItem:d,POHeaderToPOBuildingNav:c,AttachmentSet:l,EstimatedContractValue:parseFloat(e.getModel("localJson").getProperty("/EstimatedContractValue")).toFixed(e.CustomCurrency),OriginalContractValue:parseFloat(e.getModel("localJson").getProperty("/OriginalContractValue")).toFixed(e.CustomCurrency),TotalContractValue:parseFloat(e.getModel("localJson").getProperty("/TotalContractValue")).toFixed(e.CustomCurrency),VariationOrderValue:parseFloat(e.getModel("localJson").getProperty("/VariationOrderValue")).toFixed(e.CustomCurrency),AddendumValue:parseFloat(e.getModel("localJson").getProperty("/AddendumValue")).toFixed(e.CustomCurrency),RevisedContractValue:parseFloat(e.getModel("localJson").getProperty("/RevisedContractValue")).toFixed(e.CustomCurrency),SerType:e.SERTYPE,ContractPONoteNav:h};var i=e.getView().getModel();console.log(t);e.getView().setBusy(true);const o=i.bindList("/ContractPOHeaderSet");o.attachCreateCompleted(e=>{console.log("Create Event Completed:",e)});const a=o.create(t);a.created().then(t=>{const i=a.getObject();if(i.PoNumber){sap.m.MessageBox.success("Contract "+i.PoNumber+" Created Successfully!",{title:"Success",onClose:function(t){e.getRouter().navTo("object",{objectId:i.PoNumber})}})}else{sap.m.MessageBox.error("Error: "+i.Message,{title:"Error"})}e.getView().setBusy(false)}).catch(t=>{e.getView().setBusy(false);sap.m.MessageToast.show("Error Creating Contract",{duration:4e3});let i="An unexpected error occurred.";try{const o=JSON.parse(t.responseText);const a=o.error?.innererror?.errordetails||[];if(a.length>0){let t=e.getView().getModel("localJson").getProperty("/MessageSet")||[];a.forEach(e=>{t.push({type:"Error",title:e.code.substring(0,10),description:e.message})});e.getView().getModel("localJson").setProperty("/MessageSet",t);e.getView().getModel("localJson").setProperty("/MessagesLength",t.length)}else{i=o.error?.message||"Unknown error."}}catch(e){console.error("Error Parsing Response:",e)}sap.m.MessageBox.error(i,{title:"Error"})})},2e3)}S.close()}}),endButton:new sap.m.Button({text:i.getText("Cancel"),press:function(){S.close()}}),afterClose:function(){S.destroy()}});S.open()},_createDialog:null,oncreatePO:function(e){var t=this;if(!this._createDialog){this._createDialog=new sap.m.Dialog({title:"{i18n>Confirm}",content:[new sap.m.Label({text:t.getResourceBundle().getText("detailRequestActivateMessage","CONTRACT-0007")})],beginButton:new sap.m.Button({text:"{i18n>Yes}",press:function(){this._createDialog.close();var e=t.getOwnerComponent().getModel();e.callFunction("/CreatePurchaseOrder",{method:"POST",urlParameters:{PoNo:"CONTRACT-0002"},success:function(e){},error:function(e){t.getView().getModel("detailView").setProperty("/busy",false);sap.m.MessageToast.show(t.getResourceBundle().getText("Error"),{duration:4e3})}})}.bind(this)}),endButton:new sap.m.Button({text:"{i18n>No}",press:function(){this._createDialog.close()}.bind(this)}),afterClose:function(){t._createDialog.destroy();t._createDialog=null}});this.getView().addDependent(this._createDialog)}this._createDialog.open()},onChangeTolerance:function(){var e=this;var t=e.getView().byId("idTolerance").getValue();var i=e.getView().getModel("localJson").getProperty("/BoqItemSet");$.each(i,function(e,o){$.each(o.Categories,function(o,a){$.each(a.Categories,function(a,r){$.each(r.Categories,function(r,s){i[e].Categories[o].Categories[a].Categories[r].OvfTol=t})})})});e.getView().getModel("localJson").setProperty("/BoqItemSet",i)},changeContractType:function(){var e=this;if(e.getView().byId("idMeasurementMethod").getSelectedKey()==="LUMP"||e.getView().byId("idMeasurementMethod").getSelectedKey()==="COST")e.getView().byId("idTolerance").setVisible(false);else if(e.getView().byId("idMeasurementMethod").getSelectedKey()==="COST")e.getView().byId("idMarkUp").setVisible(true);else e.getView().byId("idMarkUp").setVisible(false)},onChangeQty:function(e){var t=this;var i=e.getSource().getBindingContext("localJson").getPath();var o=t.getView().getModel("localJson").getProperty(i);var a=e.getParameters().newValue;var r=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var s=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet")));var l=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var n=0;var d=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myWBSSet")));var g=0;if(o.ModelType==="BOQ"){$.each(s,function(e,t){if("00000"+t.Model===o.Model)++g})}else{$.each(d,function(e,t){if(t.Model===o.Model)++g})}$.each(l,function(e,t){$.each(t.Categories,function(e,t){$.each(t.Categories,function(e,t){$.each(t.Categories,function(e,t){if(o.Data===t.Data){n=(parseFloat(n)+parseFloat(t.Qty)).toString()}})})})});$.each(r,function(e,t){if(t.Data===o.Data){r[e].Qty=n}});t.getView().getModel("localJson").setProperty(i+"/Qty",a===""?"0":JSON.parse(JSON.stringify(a)));t.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(r.sort((e,t)=>e.Data-t.Data))));t.onPriceConsolidatedChange("",o,JSON.parse(JSON.stringify(a)))},onPriceConsolidatedChange:function(e,t,i){var o=this;var a,r;var s=JSON.parse(JSON.stringify(o.getView().getModel("localJson").getProperty("/BoqItemSet")));var l=JSON.parse(JSON.stringify(o.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var n=JSON.parse(JSON.stringify(o.getView().getModel("localJson").getProperty("/PRItemSet")));var d=this.getView().getModel("localJson").getProperty("/myPurchaseRequisition");$.each(s,function(e,t){$.each(t.Categories,function(t,i){$.each(i.Categories,function(i,o){$.each(o.Categories,function(o,a){s[e].PriceUnit="0";s[e].Categories[t].PriceUnit="0";s[e].Categories[t].Categories[i].PriceUnit="0"})})})});$.each(n,function(e,t){$.each(t.Categories,function(e,i){$.each(i.Categories,function(e,o){t.PriceUnit="0";i.PriceUnit="0";o.PriceUnit="0"})})});if(e!==""){var g=e.getSource().getBindingContext("localJson").getObject();var u=JSON.parse(JSON.stringify(g.PriceUnit));var c=g.Serviceno;$.each(l,function(e,t){$.each(s,function(e,i){$.each(i.Categories,function(i,a){$.each(a.Categories,function(a,r){$.each(r.Categories,function(r,l){if(t.Data===l.Data){var n=false;$.each(o.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===l.Model){n=true}});$.each(o.myWBSSet,function(e,t){if(t.Model===l.Model){n=true}});if(n){var d=JSON.parse(JSON.stringify(t.PriceUnit));s[e].Categories[i].Categories[a].Categories[r].price=d;s[e].Categories[i].Categories[a].Categories[r].PriceUnit=(d*parseFloat(s[e].Categories[i].Categories[a].Categories[r].Qty)).toString();if(l.Eancat!=="C"&&l.Eancat!=="U"){s[e].PriceUnit=(parseFloat(s[e].PriceUnit)+d*parseFloat(s[e].Categories[i].Categories[a].Categories[r].Qty)).toString()}if(l.Eancat!=="C"&&l.Eancat!=="U"){s[e].Categories[i].PriceUnit=(parseFloat(s[e].Categories[i].PriceUnit)+d*parseFloat(s[e].Categories[i].Categories[a].Categories[r].Qty)).toString()}if(l.Eancat!=="C"&&l.Eancat!=="U"){s[e].Categories[i].Categories[a].PriceUnit=(parseFloat(s[e].Categories[i].Categories[a].PriceUnit)+d*parseFloat(s[e].Categories[i].Categories[a].Categories[r].Qty)).toString()}}}})})})})});$.each(n,function(e,t){$.each(t.Categories,function(e,i){$.each(i.Categories,function(e,o){a=l.find(e=>e.Data===o.Data);r=a.ModelBoq.find(e=>e.ModelType==="PR");if(a.Data===o.Data&&r.ModelType==="PR"){$.each(d,function(e,r){if(r.PrNo==t.PrNumber&&i.Data===o.Item){var s=JSON.parse(JSON.stringify(a.PriceUnit));o.price=s;o.PriceUnit=(s*parseFloat(o.Qty)).toString();o.Qty=parseFloat(o.Qty).toString();if(o.Eancat!=="C"&&o.Eancat!=="U"){t.PriceUnit=(parseFloat(t.PriceUnit)+s*parseFloat(o.Qty)).toString()}if(o.Eancat!=="C"&&o.Eancat!=="U"){i.PriceUnit=(parseFloat(i.PriceUnit)+s*parseFloat(o.Qty)).toString()}}})}})})})}else{var g=t;var c=g.Serviceno;$.each(l,function(e,t){$.each(s,function(e,i){$.each(i.Categories,function(i,a){$.each(a.Categories,function(a,r){$.each(r.Categories,function(r,l){if(t.Data===l.Data){var n=false;$.each(o.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===l.Model){n=true}});$.each(o.myWBSSet,function(e,t){if(t.Model===l.Model){n=true}});if(n){var d=JSON.parse(JSON.stringify(t.PriceUnit));s[e].Categories[i].Categories[a].Categories[r].price=d;s[e].Categories[i].Categories[a].Categories[r].PriceUnit=(d*parseFloat(s[e].Categories[i].Categories[a].Categories[r].Qty)).toString();if(l.Eancat!=="C"&&l.Eancat!=="U"){s[e].PriceUnit=(parseFloat(s[e].PriceUnit)+d*parseFloat(s[e].Categories[i].Categories[a].Categories[r].Qty)).toString()}if(l.Eancat!=="C"&&l.Eancat!=="U"){s[e].Categories[i].PriceUnit=(parseFloat(s[e].Categories[i].PriceUnit)+d*parseFloat(s[e].Categories[i].Categories[a].Categories[r].Qty)).toString()}if(l.Eancat!=="C"&&l.Eancat!=="U"){s[e].Categories[i].Categories[a].PriceUnit=(parseFloat(s[e].Categories[i].Categories[a].PriceUnit)+d*parseFloat(s[e].Categories[i].Categories[a].Categories[r].Qty)).toString()}}}})})})})})}$.each(l,function(e,t){l[e].Amount=parseFloat(l[e].Qty)*parseFloat(l[e].PriceUnit)});o.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(l.sort((e,t)=>e.Data-t.Data))));o.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(s.sort((e,t)=>e.Data-t.Data))));o.getView().getModel("localJson").setProperty("/PRItemSet",JSON.parse(JSON.stringify(n.sort((e,t)=>e.Data-t.Data))));this.ContractValueHeader()},onExpandFirstLevel:function(){var e=this.byId("TreeTableBasic");e.expandToLevel(3)},onCollapseAll:function(){var e=this.byId("TreeTableBasic");e.collapseAll()},handleOpenActionSheet1:function(e){var t=e.getSource();if(!this._actionSheet){this._actionSheet=sap.ui.xmlfragment("com.cicre.po.view.fragments.ActionSheetDialog",this);this.getView().addDependent(this._actionSheet)}this._actionSheet.openBy(t)},onWBSSelectionValueHelpPressB:function(e){if(e.getSource().getId().lastIndexOf("idAddPurchaseRequisitionc")>-1){this.fragmentType="PR";if(this.sProjectCode===""){sap.m.MessageToast.show(this.getView().getModel("i18n").getResourceBundle().getText("PleaseEnterTheProject"));return}else{this.onPRSelectionValueHelpPress()}}else{this.fragmentType="WBS";this.onWBSSelectionValueHelpPress()}this.getView().getModel("localJson").setProperty("/fragmentType",this.fragmentType)},onAddWBSCreate:function(){var e=this;if(e.sProjectCode!==""&&e.sCoCode!==""){if(!e._oWBSDialog){e._oWBSDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SelectMultiWBSCreate",e);var t=new sap.ui.model.resource.ResourceModel({bundleUrl:"i18n/i18n.properties"});e._oWBSDialog.setModel(t,"i18n");e._oWBSDialog.setModel(e.getView().getModel())}e._oWBSDialog.open();var i=e.getView().getModel();var o=new sap.ui.model.json.JSONModel;o.setData({WBSSet:[]});e._oWBSDialog.setModel(o,"localJson");var a=[];var r=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"WBS");var s=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var l=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);a.push(r);a.push(s);a.push(l);i.read("/ValueHelpSet",{filters:a,success:function(t){$.each(t.results,function(e,i){t.results[e].Group="";t.results[e].Model=t.results[e].IdNumber});var i=JSON.parse(JSON.stringify(t.results));e._oWBSDialog.getModel("localJson").setProperty("/WBSSet",i)},error:function(e){sap.m.MessageToast.show("Error")}});e.aContexts=[];e.Boqs=[];e.BUBoQs=[];e.WBSBoQs=[]}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}},_handleCancelPressWBS:function(){var e=this;var t=e.getView().getModel("localJson").getProperty("/selectedBuilding");var i=[];for(var o=0;o<e.myWBSSet.length;o++){var a=false;$.each(t,function(t,i){if(e.myWBSSet[o].Model===i.Model)a=true});if(!a){i.push(e.myWBSSet[o])}}e.myWBSSet=JSON.parse(JSON.stringify(i));e.getView().getModel("localJson").setProperty("/myWBSSet",e.myWBSSet);e.getView().getModel("localJson").setProperty("/selectedBuilding",[]);e._oWBSDialog.close()},onWBSSelectionChange:function(e){var t=this;var i=e.getSource();var o=true,a=[],r=[];t.BUBoQs=[];t.WBSBoQs=[];var s=t.getView().getModel("localJson").getProperty("/selectedBuildingOrWBS");var l=t.getView().getModel("localJson").getProperty("/selectedBuilding"),n=this._contractDialog.getTable().getSelectedIndices();t.myWBSSet=t.getView().getModel("localJson").getProperty("/myWBSSet");if(n.length>0){for(var d=0;d<n.length;d++){var g=this._contractDialog.getTable().getContextByIndex(n[d]).getObject();g.ChangeIndicator="AddB";a.push(g)}$.each(a,function(e,t){if(t.Group===""){r.push(t.IdNumber);o=false}});$.each(t.myWBSSet,function(e,t){$.each(a,function(e,i){if(i.IdNumber===t.IdNumber&&t.Model===i.Model&&t.Group===i.Group){r.push(t.IdNumber);o=false}})});if(o){$.each(a,function(e,i){a[e].ContractualIndicator="O";a[e].SrvStatus="UA";a[e].ModelType="WBS";a[e].DelInd="";a[e].AsBuild2="";a[e].WbsCode=a[e].SelectionParameter;a[e].Txt="Original";a[e].SubBoq=a[e].Group;a[e].GroupCode=a[e].SelectionParameter6;a[e].BuildingNo=parseInt(a[e].IdNumber).toString();t.myWBSSet.push(a[e]);s.push(a[e]);l.push(a[e])});t.aContexts.push(a);t.getView().getModel("localJson").setProperty("/selectedBuilding",l);t.getView().getModel("localJson").setProperty("/selectedBuildingOrWBS",s);this.onWBSContractClose();this._handleValueHelpCloseWBS()}else if(!o){var u=r.join();sap.m.MessageToast.show("WBS is already added or don't select Boq "+u)}}},_handleValueHelpCloseWBS:function(e){var t=this,i=t.getView().getModel(),o=[],a=4;var r=new sap.ui.model.json.JSONModel;var s=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/selectedBuilding")));var l=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));if(t.aContexts.length===0)sap.m.MessageToast.show("Select one WBS at least!");else{var n=false;$.each(t.myWBSSet,function(e,t){if(t.Group===""){n=true}});if(n)sap.m.MessageToast.show("Select Boq for each WBS!");else{$.each(s,function(e,i){t.BUBoQs.push(i.Model+i.Group)});t.BUBoQs.sort();var d=t.getView().getModel("localJson").getProperty("/selectedBuildingOrWBS");$.each(d,function(e,t){var i=new sap.ui.model.Filter("Data",sap.ui.model.FilterOperator.BT,t.Model,t.Group);if(i!==""){o.push(i)}});t.getView().setBusy(true);var g=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,t.sProjectCode);var u=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,t.sCoCode);var c=new sap.ui.model.Filter("Eancat",sap.ui.model.FilterOperator.EQ,"W");if(g!==""){o.push(g)}if(u!==""){o.push(u)}if(c!==""){o.push(c)}this.objSet=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));t.getView().getModel("localJson").setProperty("/selectedBuildingOrWBS",[]);t.getView().getModel("localJson").setProperty("/myWBSSet",JSON.parse(JSON.stringify(t.myWBSSet)));var p=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var h=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var m="/BoqTreeSet";var S=i.bindList(m,undefined,undefined,o);S.requestContexts(0,100).then(function(e){var i=e.map(e=>e.getObject());var o=1;var r=[];$.each(i,function(e,t){i[e].DelInd="";i[e].ModelType="WBS";if(i[e].LevelNo==="1"){i[e].live="one";i[e].AddNew="AN"}if(i[e].Eancat===""&&parseInt(i[e].LevelNo)===4){i[e].Qty="0";i[e].Uom="";i[e].Price="0"}i[e].DelInd="";i[e].ModelType="WBS";if(i[e].Eancat==="U"){i[e].Qty=0}if(parseInt(i[e].LevelNo)===4){i[e].Txt="Original";i[e].DelInd="";if(i[e].Eancat!=""){i[e].PriceUnit="1";i[e].Price="1"}i[e].ContractualIndicator="O";i[e].Indicator="Y"}else{i[e].Indicator="Z"}});for(o;o<=parseInt(a);o++){r.push({[o]:[]});for(var s=0;s<i.length;s++){i[s].Categories=[];if(parseInt(i[s].LevelNo)===o){r[o-1][o].push(i[s])}}}var l=[];$.each(r,function(e,t){if(e<3){$.each(t,function(t,i){if(i.length!==0){$.each(i,function(t,i){$.each(r[e+1],function(e,t){$.each(t,function(e,t){if(t.length!==0){if(i.LevelId===t.Parent){i.Categories.push(t)}}})})})}})}});$.each(r[0],function(e,t){if(t.length!==0){$.each(t,function(e,t){l.push(t)})}});var n=false;var d=false;$.each(l,function(e,i){n=false;d=false;if(t.objSet.length!==0){$.each(t.objSet,function(o,a){$.each(i.Categories,function(r,s){$.each(a.Categories,function(e,t){if(i.Data===a.Data){n=true;if(s.Data===t.Data){d=true}}});if(n&&!d){if(s.Model===a.Model){t.objSet[o].Categories.push(l[e].Categories[r]);d=false}}})});if(!n&&!d){t.objSet.push(i);n=false;d=false}}else{t.objSet.push(i)}d=false;n=false});t.getView().getModel("localJson").setProperty("/BoqItemSet",t.objSet);t.Consoliatedservices();t.getView().setBusy(false);var r=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var g=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(r,function(e,t){$.each(t.Categories,function(t,i){$.each(i.Categories,function(i,o){$.each(o.Categories,function(o,a){r[e].PriceUnit="0";r[e].Categories[t].PriceUnit="0";r[e].Categories[t].Categories[i].PriceUnit="0";r[e].Categories[t].Categories[i].Categories[o].Matdesc=r[e].Categories[t].Categories[i].ShortDesc})})})});var u;$.each(r,function(e,i){$.each(i.Categories,function(i,o){$.each(o.Categories,function(o,a){$.each(a.Categories,function(a,s){u=g.find(e=>e.Data===s.Data);if(u.Data===s.Data){var l=false;$.each(t.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===s.Model){l=true}});$.each(t.myWBSSet,function(e,t){if(t.Model===s.Model){l=true}});if(l){var n=JSON.parse(JSON.stringify(u.PriceUnit));r[e].Categories[i].Categories[o].Categories[a].price=n;r[e].Categories[i].Categories[o].Categories[a].PriceUnit=(n*parseFloat(r[e].Categories[i].Categories[o].Categories[a].Qty)).toString();if(s.Eancat!=="C"&&s.Eancat!=="U"){r[e].PriceUnit=(parseFloat(r[e].PriceUnit)+n*parseFloat(r[e].Categories[i].Categories[o].Categories[a].Qty)).toString()}if(s.Eancat!=="C"&&s.Eancat!=="U"){r[e].Categories[i].PriceUnit=(parseFloat(r[e].Categories[i].PriceUnit)+n*parseFloat(r[e].Categories[i].Categories[o].Categories[a].Qty)).toString()}if(s.Eancat!=="C"&&s.Eancat!=="U"){r[e].Categories[i].Categories[o].PriceUnit=(parseFloat(r[e].Categories[i].Categories[o].PriceUnit)+n*parseFloat(r[e].Categories[i].Categories[o].Categories[a].Qty)).toString()}}}})})})});t.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(r.sort((e,t)=>e.Data-t.Data))));t.ContractValueHeader();t.getView().setBusy(false)}).catch(function(e){sap.m.MessageToast.show("Error");t.getView().setBusy(false)})}}},onDisplaySearchProjectDialog:function(){if(this._pDialog){this._pDialog.destroy();this._pDialog=null}if(!this._pDialog){this._pDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ProjectSearchDialog",this);this._pDialog.setModel(this.getView().getModel())}this._pDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}",info:"{SelectionParameter}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PROJ");t.push(i);this._pDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchProject:function(e){var t=e.getParameter("value");var i=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var a=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PROJ");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);o.push(a);o.push(r);this._pDialog.bindAggregation("items",{path:"/ValueHelpSet",template:i,filters:o})},onSelectProjectList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sProjectCode=e.getObject().IdNumber;t.getView().byId("_idSearchByProject").setValue(e.getObject().IdText)})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchRefrenceContractDialog:function(){if(!this._oRefContractDialog){this._oRefContractDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SelectMultiRefrenceContract",this);this._oRefContractDialog.setModel(this.getView().getModel())}this._oRefContractDialog.open();var e=new sap.ui.model.resource.ResourceModel({bundleUrl:"i18n/i18n.properties"});this._oRefContractDialog.setModel(e,"i18n")},onSearchContract:function(){var e=this;var t=sap.ui.getCore().byId("table");t.setBusy(true);var i=this.getView().getModel();i.read("/ContractPOHeaderSet");t.setModel(i,"poModel");var o=new sap.ui.model.Filter("PurchDoc",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().byId("idSearchByPO").getValue());var a=new sap.ui.model.Filter("Vendor",sap.ui.model.FilterOperator.EQ,this.sSearchVendor);var r=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sSearchCoCode);var s=new sap.ui.model.Filter("PurchOrg",sap.ui.model.FilterOperator.EQ,this.sSearchPOrg);var l=new sap.ui.model.Filter("PurGroup",sap.ui.model.FilterOperator.EQ,this.sSearchPGrp);var n=new sap.ui.model.Filter("Flag",sap.ui.model.FilterOperator.EQ,"X");var d=[];if(sap.ui.getCore().byId("idSearchByPO").getValue().length>0){d.push(o)}if(this.sSearchVendor.length>0&&sap.ui.getCore().byId("idSearchByVendor").getValue()!==""){d.push(a)}if(this.sSearchCoCode.length>0){d.push(r)}if(this.sSearchPOrg.length>0&&sap.ui.getCore().byId("idSearchPurchaseOrganization").getValue()!==""){d.push(s)}if(this.sSearchPGrp.length>0&&sap.ui.getCore().byId("idSearchPurchaseGroup").getValue()!==""){d.push(l)}d.push(n);var g=t.getBinding("items");g.filter(d);t.setBusy(false)},_handleCancelPressContract:function(){var e=this;e._oRefContractDialog.close()},_handleValueHelpCloseContract:function(){var e=this;var t=e.selectedRefContracts.join();e.getView().byId("idRefrenceContract").setValue(t);e._oRefContractDialog.close()},onAfterClose:function(){if(this._oRefContractDialog){this._oRefContractDialog.destroy();this._oRefContractDialog=null}},onRefContSelectionChange:function(e){var t=this;var i=e.getSource();var o=true;t.selectedRefContracts=t.getView().getModel("localJson").getProperty("/selectedRefContracts");if(e.getParameters().selected===true){var a=e.getParameter("listItem").getBindingContext("poModel").getObject();$.each(t.selectedRefContracts,function(e,t){if(t===a.PurchDoc)o=false});if(o){t.selectedRefContracts.push(a.PurchDoc);t.getView().getModel("localJson").setProperty("/selectedRefContracts",t.selectedRefContracts);t.aContexts=i.getSelectedContexts(true)}else if(!o){var r=e.getSource();var s=r.getSelectedItem();s.setSelected(false);var l=e.getParameter("listItem").getBindingContextPath();var n=l.slice(l.lastIndexOf("/")+1);sap.m.MessageToast.show("Contract is already added!")}}else{var l=e.getParameter("listItem").getBindingContextPath();var n=l.slice(l.lastIndexOf("/")+1);t.selectedRefContracts.splice(n,1);t.aContexts.splice(n,1);t.getView().getModel("localJson").setProperty("/selectedRefContracts",t.selectedRefContracts)}},changeCreationType:function(){if(this.getView().byId("idCreationType").getSelectedKey()==="E")this.getView().getModel("localJson").setProperty("/estimatedMode",true);else this.getView().getModel("localJson").setProperty("/estimatedMode",false);this.getView().byId("idSupeiorWBS").setValueState("None")},handleAddEstimatedContract:function(){var e=this;var t=e.getModel("localJson").getProperty("/EstimatedContracts");var i={Servicedesc:"",Amount:""};t.push(i);e.getModel("localJson").setProperty("/EstimatedContracts",t)},deleteEstimatedContract:function(e){var t=this;var i=t.getModel("localJson").getProperty("/EstimatedContracts");var o=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var a=o[2];i.splice(a,1);t.getModel("localJson").setProperty("/EstimatedContracts",i);t.getModel("localJson").refresh(true);this.ContractValueHeader()},handlevariationOrder:function(){var e=this;var t=e.getModel("localJson").getProperty("/EstimatedContracts");var i={Servicedesc:"",Amount:""};t.push(i);e.getModel("localJson").setProperty("/EstimatedContracts",t)},onDeleteBuilding:function(e){var t=this;var i=this.getView().byId("IdBuildingTable").getModel("localJson");var o=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var a=parseInt(o[2]);var r=i.getProperty("/myBuildingSet/"+a);var s=e.getSource().getBindingContext("localJson").getPath();var l=this.getView();var n=l.getModel("i18n").getResourceBundle();var d=new sap.m.Dialog({title:n.getText("Delete"),type:"Message",content:new sap.m.Text({text:n.getText("Msg_Confirm_Delete")}),beginButton:new sap.m.Button({text:n.getText("Delete"),type:"Emphasized",press:function(){var e=t.getView().getModel("localJson");var i=e.getProperty(s);if(r.SrvStatus==="UA"){i.DelInd=i.DelInd==="Y"?"":"Y";d.close();r.Boq=r.Model.length===8?r.Model:"00000"+r.Model;t.deletesrv(r);t.deleteBOQliseConsolidate(r);e.setProperty(s,i)}else if(r.SrvStatus==="A"){sap.m.MessageToast.show("you should handel this service");i.DelInd=i.DelInd==="X"?"":"X";d.close();e.setProperty(s,i)}}}),endButton:new sap.m.Button({text:n.getText("Cancel"),press:function(){d.close()}}),afterClose:function(){d.destroy()}});d.open()},onDeleteWBS:function(e){var t=this;var i=this.getView().byId("IdWBSTable").getModel("localJson");var o=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var a=parseInt(o[2]);var r=i.getProperty("/myWBSSet/"+a);var s=e.getSource().getBindingContext("localJson").getPath();var l=this.getView();var n=l.getModel("i18n").getResourceBundle();var d=new sap.m.Dialog({title:n.getText("Delete"),type:"Message",content:new sap.m.Text({text:n.getText("Msg_Confirm_Delete")}),beginButton:new sap.m.Button({text:n.getText("Delete"),type:"Emphasized",press:function(){var e=t.getView().getModel("localJson");var i=e.getProperty(s);if(r.SrvStatus==="UA"){i.DelInd="Y";i.ChangeIndicator="Y";d.close();r.Boq=r.Model.length===8?r.Model:"00000"+r.Model;t.deletesrv(r);t.deleteBOQliseConsolidate(r);e.setProperty(s,i)}else if(r.SrvStatus==="A"){sap.m.MessageToast.show("you should handel this service");i.DelInd=i.DelInd==="X"?"":"X";t.deletesrvA(r,s);d.close();e.setProperty(s,i)}}}),endButton:new sap.m.Button({text:n.getText("Cancel"),press:function(){d.close()}}),afterClose:function(){d.destroy()}});d.open()},onPRSelectionChange:function(e){var t=this;var i=true,o=[],a=[];var r=t.getView().getModel("localJson").getProperty("/selectedPR");var s=t.getView().getModel("localJson").getProperty("/myPurchaseRequisition"),l=this._contractDialogPR.getTable().getSelectedIndices();t.myWBSSet=t.getView().getModel("localJson").getProperty("/myWBSSet");if(l.length>0){for(var n=0;n<l.length;n++){var d=this._contractDialogPR.getTable().getContextByIndex(l[n]).getObject();d.ChangeIndicator="AddB";o.push(d)}$.each(s,function(e,t){$.each(o,function(e,o){if(o.IdNumber===t.IdNumber&&t.Model===o.Model&&t.Group===o.Group){a.push(t.IdNumber);i=false}})});if(i){$.each(o,function(e,t){o[e].ContractualIndicator="O";o[e].SrvStatus="UA";o[e].DelInd="";o[e].AsBuild2="";o[e].ModelType="PR";o[e].BoqDesc=o[e].ActivityNumberDesc;o[e].Txt="Original";o[e].ActivityNumber=o[e].ActivityNumber;o[e].Network=o[e].Network;o[e].PrNo=parseInt(o[e].PrNo).toString();o[e].PrNumber=parseInt(o[e].PrNo).toString();o[e].BuildingNo=parseInt(o[e].PrNo).toString();o[e].Model=parseInt(o[e].PrNo).toString();r.push(o[e]);s.push(o[e])});t.aContexts.push(o);t.getView().getModel("localJson").setProperty("/myPurchaseRequisition",s);t.getView().getModel("localJson").setProperty("/selectedPR",r);t.onPRContractClose();t._handleValueHelpClosePR()}else if(!i){var g=a.join();sap.m.MessageToast.show("WBS is already added or don't select Boq "+g)}}},calculatestartDate:function(){var e=new Date(this.getView().byId("idDeliveryDate").getValue()),t=new Date(this.getView().byId("idCommencementDate").getValue());if(e>t){this.getView().byId("idValidFromDate").setValue(this.getView().byId("idDeliveryDate").getValue())}else{this.getView().byId("idValidFromDate").setValue(this.getView().byId("idCommencementDate").getValue())}this.calculateCompletionDate()},calculateCompletionDate:function(){var e=new Date(this.getView().byId("idValidFromDate").getValue()),t=parseInt(this.getView().byId("idContractDurationDays").getValue()),i=parseInt(this.getView().byId("idContractDurationMonth").getValue());if(this.getView().byId("idValidFromDate").getValue()!==""){var o=this.calculateDates(e,i,t);var a=this.DateObjectToYYYYMMDD(o);var r=+a.substring(0,4);var s=+a.substring(4,6);var l=+a.substring(6,8);var n=r+"-"+s+"-"+l;this.getView().byId("idValidToDate").setValue(n)}}})});
},
	"com/cicre/po/controller/Object.controller.js":function(){
jQuery.sap.require("sap.ui.core.util.Export");jQuery.sap.require("sap.ui.core.util.ExportTypeCSV");sap.ui.define(["com/cicre/po/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","com/cicre/po/model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/export/Spreadsheet"],function(e,t,o,i,a,r,s){"use strict";return e.extend("com.cicre.po.controller.Object",{formatter:i,PoNumber:"",PurchDoc:"",DocParNo:"",sCoCode:"",sCoText:"",sPONO:"",sVendor:"",sProj:"",sPOrg:"",sPlant:"",sPGrp:"",sDocType:"",sDocTypeText:"",BUBoQs:[],WBSBoQs:[],Boqs:[],myBuildingSet:[],myWBSSet:[],myPurchaseRequisition:[],aContexts:[],sSubBoq:"",sSubBoqId:"",sSubBoq2:"",sSubBoq2Id:"",POHeaderToPOSrv:[],_oBuilding2Dialog:null,_oWBS2Dialog:null,consultantIndecator:"",sConsultant:"",sConsultantName:"",compInd:"",vendorInd:"",pGrpInd:"",pOrgInd:"",sSearchCoCode:"",sSearchVendor:"",sSearchPGrp:"",sSearchPOrg:"",selectedRefContracts:[],sVendorName:"",SupeiorWBSText:"",GroupCode:"",ModelCode:"",Amount:"",Omission:"",sValueAction:"",sValueorderType:"",Composing:"",addVA:"0",addVAOld:"0",myBuildingSet:"",ModelCodeFilter:"",sProjj:"",ModelCodee:"",GroupCodee:"",Building:"",BoqDescR:"",variationBuildingVorA:[],GroupCodefilter:"",ModelCodefilter:"",ZoneCodefilter:"",BuildingCodefilter:"",ContractCode:"",HeadToHeadVariationG:[],ViewCon:"",SERTYPE:"",SERTYPEText:"",BoqAll:"",BoqDescAll:"",currentYear:"",years:[],onInit:function(){var e=[{id:"R",text:"Released"},{id:"C",text:"Composing"}];var o=new sap.ui.model.json.JSONModel;o.setData({variationOrderContract:[],variationBuilding:[],selectedBuildinglist:[],VariationMode:true,ViewCon1:false,ViewCon2:true,ViewCon4:false,ViewCon3:true,VReleasedMode:"",Action:e,Buildings:[],Buildingss:[]});this.getView().setModel(o,"localJso");var i,a=new t({busy:true,delay:0});this.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched,this);i=this.getView().getBusyIndicatorDelay();this.setModel(a,"objectView")},onShareInJamPress:function(){var e=this.getModel("objectView"),t=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:location.href,share:e.getProperty("/shareOnJamTitle")}}});t.open()},_onObjectMatched:function(e){var t=this.getView().getModel();var o=this;o.getView().setBusy(true);if(e)var i=e.getParameter("arguments").objectId;else var i=o.PoNumber;o.PoNumber=i;o.IndexMonth();var a=new sap.ui.model.json.JSONModel;var r=[{id:"01",text:"Jan"},{id:"02",text:"Feb"},{id:"03",text:"Mar"},{id:"04",text:"Apr"},{id:"05",text:"May"},{id:"06",text:"Jun"},{id:"07",text:"Jul"},{id:"08",text:"Aug"},{id:"09",text:"Sep"},{id:"10",text:"Oct"},{id:"11",text:"Nov"},{id:"12",text:"Dec"}];var s=[{id:"C",text:"Cancel"},{id:"R",text:"Released"}];var n=[{id:"R",text:"Released"},{id:"C",text:"Composing"}];var l=[{id:"O",text:"Original"},{id:"E",text:"Estimated"}];var d=[{id:"A",text:"Active"},{id:"D",text:"Deleted"},{id:"UA",text:"Under Processing-Active"},{id:"UD",text:"Under Processing-Deleted"}];var g=[{id:"C",text:"Contingency"},{id:"U",text:"Unit rate"},{id:"L",text:"lumpsum"},{id:"P",text:"Provisional Sum"},{id:"R",text:"Remeasured"}];var c=[{id:"O",text:"Original"},{id:"V",text:"Variation"},{id:"A",text:"Addendum"}];t.bindContext("/ContractPOHeaderSet('"+i+"')",null,{$expand:"POHeaderToBoqItem,ContractPONoteNav,POHeaderToPOItem,ContractPOSrvItemSet,AttachmentSet,POHeaderToPOGetbuildingNav,ReleaseerrorSet,PermissionNav,WFContractInboxNAV,POPurchaseRequisitionTreeNav"}).requestObject().then(function(e){e.IndexMonths=o.years;e.VAction=s;e.VStatus=n;e.Currency=e.Currency;e.AuthInd=e.PermissionNav.AuthInd;if(e.Currency==="USD"){o.CustomCurrency=2}else{o.CustomCurrency=2}e.STATUSBoqlist=d;e.Service_TYPE=g;e.Actiontype="O";e.STATUSBoqlist=d;e.selectedRefContracts=e.RefContract.split(",");var t=0,i=0;var a=[],r=[];var l=e.ReleaseerrorSet.results;var c=[];for(var u=0;u<l.length;u++){var p={type:"Error",title:l[u].ErrItem+"-"+l[u].ErrMsg2,description:l[u].ErrMsg1};c.push(p)}e.MessageSet=c;$.each(e.POHeaderToPOGetbuildingNav.results,function(e,t){t.AsBuild="";if(t.Project===""){r.push(t)}else{a.push(t)}});e.myBuildingSet=a;e.myWBSSet=r;$.each(e.myBuildingSet,function(i,a){e.myBuildingSet[i].DelInd="";e.myBuildingSet[i].ChangeIndicator="";e.myBuildingSet[i].Group=e.myBuildingSet[i].SubBoq;t=parseFloat(t)+1;if(e.myBuildingSet[i].ContractualIndicator==="O"){e.myBuildingSet[i].sortNum=1}if(e.myBuildingSet[i].ContractualIndicator==="V"){e.myBuildingSet[i].sortNum=2}if(e.myBuildingSet[i].ContractualIndicator==="A"){e.myBuildingSet[i].sortNum=3}$.each(o.HeadToHeadVariationG,function(t,o){if(e.myBuildingSet[i].Txt===o.OrderType+"-"+o.UserOrder){e.myBuildingSet[i].OrderNo=o.OrderNo}})});if(e.WFContractInboxNAV.results.length>0){var h=e.WFContractInboxNAV.results;var m=o.onprocessworkflowBuilding(h);e.lanes=m.lanes;e.nodes=m.nodes}else{e.lanes=[];e.nodes=[]}$.each(e.myWBSSet,function(t,a){e.myWBSSet[t].DelInd="";e.myWBSSet[t].ChangeIndicator="";e.myWBSSet[t].Group=e.myWBSSet[t].SubBoq;e.myWBSSet[t].Model=e.myWBSSet[t].Boq;e.myWBSSet[t].BuildingNo=e.myWBSSet[t].BuildingNo;e.myWBSSet[t].IdText=e.myWBSSet[t].ModelDesc;e.myWBSSet[t].WbsCode=e.myWBSSet[t].Wbs;i=parseFloat(i)+1;if(e.myWBSSet[t].ContractualIndicator==="O"){e.myWBSSet[t].sortNum=1}if(e.myWBSSet[t].ContractualIndicator==="V"){e.myWBSSet[t].sortNum=2}if(e.myWBSSet[t].ContractualIndicator==="A"){e.myWBSSet[t].sortNum=3}$.each(o.HeadToHeadVariationG,function(o,i){if(e.myWBSSet[t].Txt===i.OrderType+"-"+i.UserOrder){e.myWBSSet[t].OrderNo=i.OrderNo}})});e.WbslistNo=i;e.BuildingNO=t;o.myBuildingSet=e.myBuildingSet;o.myWBSSet=e.myWBSSet;e.HeadToHeadVariation=e.HeadToHeadVariationNav.results;e.variationBuilding=[];e.selectedBuildingOrWBS=[];o.PurchDoc=e.PurchDoc;o.getView().getModel("localJso").setProperty("/VariationMode",false);o.sCoCode=e.CompCode;o.sCoCode=e.CompCode;o.ContractNo=e.PoNumber;o.sProjectCode=e.ProjetTemp;o.sDocType=e.DocType;o.sVendor=e.Vendor;o.sVendorName=e.VendorName;o.SupeiorWBSCode=e.SuperiorWbs;e.ReleaseedMode=false;o.sConsultant=e.Consultant;o.sConsultantName=e.ConsultantName;o.SERTYPE=e.SerType;o.sPOrg=e.PurchOrg;o.sPGrp=e.PurGroup;o.DocParNo=e.DocParNo;e.IndexMonth=e.IndexMonth.split(",");if(e.CreationType==="E"&&e.Status==="COMPOSING")e.estimatedMode=true;else e.estimatedMode=false;o.getView().byId("idVendor").setValue(e.VendorName);o.getView().byId("idConsultant").setValue(e.ConsultantName);o.getView().byId("idserviceType").setValue(e.SerTypeDesc);var S=[o.getView().byId("idCompCode"),o.getView().byId("idProject")];var f=[o.sCoCode,o.sProjectCode];$.each(S,function(e,t){t.getBinding("items").attachEventOnce("dataReceived",function(){t.setSelectedKey(f[e])},this)});if(e.CreationType==="E"){var v=[];$.each(e.ContractPOSrvItemSet.results,function(t,o){if(o.SrvStatus!=="A"){e.ReleaseedMode=true}o.DelInd="";o.ChangeIndicator="";v.push(o)});e.EstimatedContracts=v;e.AttachmentSet=e.AttachmentSet.results;e.editMode=false;e.selectBoq=false;e.selectGroupBoq=false;e.BuildingSet=[],e.BoqModelSet=[];e.BoqItemSet=[];e.BoqMatGrpSet=[];e.BoqConsulidatedItemSet=[];e.BuildingConsulidatedItemSetfilter=[];e.myBuildingSet=[];o.myBuildingSet=[];e.AsbuildService=[];o.myWBSSet=[];e.myWBSSet=[];e.selectedBuilding=[];o.getView().setModel(new sap.ui.model.json.JSONModel(e),"localJson");o.getView().setBusy(false)}else{var y=e.POHeaderToBoqItem.results;var C=e.POHeaderToPOItem.results;o.POHeaderToPOSrv=e.ContractPOSrvItemSet.results;var v=[];var P=[];var B=[];var V=[];var w=[];var M=[];var I=JSON.parse(JSON.stringify(o.POHeaderToPOSrv));$.each(C,function(e,t){if(t.ContractualIndicator!=="E"){v.push(t)}});C=v;$.each(o.POHeaderToPOSrv,function(t,i){if(i.AsbuildVar!==""){$.each(e.HeadToHeadVariation,function(t,a){if(a.OrderDesc===i.AsbuildVar){var r=JSON.parse(JSON.stringify(i));r.Amount=JSON.parse(JSON.stringify((parseFloat(r.Qty)*parseFloat(r.PriceUnit)*-1).toFixed(o.CustomCurrency)));e.HeadToHeadVariation[t].OrderItemsSrvSet.push(r)}})}if(i.AsBuild2==="X"&&i.AsBuild==="X"){M.push(i)}i.ChangeIndicator="";if(i.SrvStatus!=="A"){e.ReleaseedMode=true}if(i.ContractualIndicator==="E"){i.DelInd="";B.push(i)}else{if(i.ServiceType===""){i.sorttype=1}else{i.sorttype=2}if(i.ContractualIndicator==="O"){i.sortNum=1}if(i.ContractualIndicator==="V"){i.sortNum=2}if(i.ContractualIndicator==="A"){i.sortNum=3}i.ProvisionRate=parseInt(i.ProvisionRate);i.Matdesc=i.ShortText;i.Qty=parseFloat(i.Qty);P.push(i)}});e.BuildingConsulidatedItemSetfilter=JSON.parse(JSON.stringify(P));o.POHeaderToPOSrv=P;e.AsbuildService=M;e.EstimatedContracts=B;var O=[];var D=[];D=o.Consoliatedserviceslistobject(JSON.parse(JSON.stringify(o.POHeaderToPOSrv)));D=D.sort((e,t)=>e.Data-t.Data);e.ServicNOCount=D.length;var r=[];var T=[];var b=[];var T={};var x=[];$.each(C,function(e,t){var o=false;if(O.length!==0){$.each(O,function(e,i){if(i.Buildingno!==""){if(i.Boq===t.Boq&&i.SubBoq===t.SubBoq&&i.MatlGroup===t.MatlGroup){o=true}}else{if(i.Boq===t.Boq&&i.SubBoq===t.SubBoq&&i.MatlGroup===t.MatlGroup){o=true}}})}else{O.push(t);o=true}if(!o)O.push(t)});setTimeout(function(){var t=[];$.each(O,function(e,o){var i=false;if(t.length===0)t.push({Data:o.Boq,ShortDesc:o.BoqStxt,LongDesc:o.BoqLtxt,DelInd:"",Indicator:"Z",live:"one",Model:o.Boq,PriceUnit:"0",MoiceUnit:"0",ModelType:o.Project!==""?"BOQ":"WBS",Categories:[{Data:o.SubBoq,DelInd:"",Indicator:"Z",ShortDesc:o.SubboqStxt,LongDesc:o.SubboqLtxt,Model:o.Boq,ModelType:o.Project!==""?"BOQ":"WBS",PriceUnit:"0",Categories:[{Data:o.MatlGroup,Item:o.MatlGroup,ShortDesc:o.Matdesc,LongDesc:o.Matdesc,DelInd:"",Indicator:"Z",Matdesc:o.ShortText,ModelType:o.Project!==""?"BOQ":"WBS",ChangeIndicator:"",PriceUnit:"0",Boq:o.Boq,SubBoq:o.SubBoq,Categories:[]}]}]});else{$.each(t,function(e,a){if(o.Boq===a.Model){var r=false;var s=false;$.each(t[e].Categories,function(a,n){if(o.SubBoq===n.Data){s=true}$.each(n.Categories,function(e,t){if(o.MatlGroup===t.Item&&o.SubBoq===n.Data){r=true}});if(!r)if(o.SubBoq===n.Data){t[e].Categories[a].Categories.push({Data:o.MatlGroup,Item:o.MatlGroup,Matdesc:o.Matdesc,LongDesc:o.Matdesc,ShortDesc:o.Matdesc,DelInd:"",Indicator:"Z",PriceUnit:"0",SubBoq:o.SubBoq,Boq:o.Boq,ModelType:o.Project!==""?"BOQ":"WBS",ChangeIndicator:"",Categories:[]})}i=true});if(!s)t[e].Categories.push({Data:o.SubBoq,Model:o.Boq,ShortDesc:o.SubboqStxt,LongDesc:o.SubboqLtxt,DelInd:"",Indicator:"Z",ModelType:o.Project!==""?"BOQ":"WBS",PriceUnit:"0",Categories:[{Data:o.MatlGroup,ShortDesc:o.Matdesc,LongDesc:o.Matdesc,DelInd:"",Indicator:"Z",Item:o.MatlGroup,Matdesc:o.ShortText,ModelType:o.Project!==""?"BOQ":"WBS",ChangeIndicator:"",PriceUnit:"0",SubBoq:o.SubBoq,Boq:o.Boq,Categories:[]}]})}});if(!i)t.push({Data:o.Boq,Model:o.Boq,ShortDesc:o.BoqStxt,LongDesc:o.BoqLtxt,live:"one",DelInd:"",Indicator:"Z",ModelType:o.Project!==""?"BOQ":"WBS",PriceUnit:"0",Categories:[{Data:o.SubBoq,Model:o.Boq,ShortDesc:o.SubboqStxt,LongDesc:o.SubboqLtxt,DelInd:"",Indicator:"Z",ModelType:o.Project!==""?"BOQ":"WBS",PriceUnit:"0",Categories:[{Data:o.MatlGroup,ShortDesc:o.Matdesc,LongDesc:o.Matdesc,Item:o.MatlGroup,DelInd:"",Indicator:"Z",Matdesc:o.ShortText,ModelType:o.Project!==""?"BOQ":"WBS",ChangeIndicator:"",PriceUnit:"0",SubBoq:o.SubBoq,Boq:o.Boq,Categories:[]}]}]})}});$.each(o.POHeaderToPOSrv,function(e,t){$.each(y,function(e,o){if(o.Serviceno===t.Serviceno&&o.SubBoq===t.SubBoq&&o.Boq===t.Boq&&o.Item===t.MatlGroup&&t.ContractualIndicator===o.ContractualIndicator){y[e].PriceUnit=t.PriceUnit;y[e].OvfTol=t.OvfTol;y[e].SubModel=t.SubBoq;y[e].UnitMeas=t.BaseUom;y[e].VariationOrder=t.VariationOrder;y[e].Txt=t.Txt;y[e].SrvStatus=t.SrvStatus;y[e].Eancat=t.ServiceType;y[e].LongText=t.SrvLongText;y[e].Qty_Srv=t.Qty;y[e].ProvisionRate=t.ProvisionRate}})});$.each(t,function(e,o){$.each(y,function(i,a){if(o.Model===a.Boq){$.each(t[e].Categories,function(o,i){if(i.Data===a.SubBoq&&i.Model===a.Boq){$.each(t[e].Categories[o].Categories,function(i,r){if(r.Data===a.Item&&r.SubBoq===a.SubBoq&&r.Boq===a.Boq){t[e].Categories[o].Categories[i].Categories.push({DelInd:"",Indicator:"Y",Model:a.Boq,LongDesc:a.LongText,ShortDesc:a.Servicedesc,Matdesc:a.Matdesc,Data:a.Serviceno,PriceUnit:a.PriceUnit,ProvisionRate:a.ProvisionRate,Price:a.PriceUnit,Data:a.Serviceno,Flag:a.Flag,UnitMeas:a.UnitMeas,Qty:a.Qty_Srv,SubModel:a.SubModel,ModelType:r.ModelType,ChangeIndicator:"",ContractualIndicator:a.ContractualIndicator,Item:a.Item,MatlGroup:a.Item,SrvNo:a.SrvNo,Txt:a.Txt,Uom:a.UnitMeas,Eancat:a.Eancat,VariationOrder:a.VariationOrder,SrvStatus:a.SrvStatus})}})}})}})});e.BuildingSet=[],e.BoqModelSet=y;e.BoqItemSet=t;e.BoqMatGrpSet=[];e.BoqConsulidatedItemSet=D;e.WbslistNo=i;e.selectedBuildinglist=[];e.selectedBuilding=[];$.each(o.myBuildingSet,function(e,t){o.BUBoQs.push(t.Model+t.Group)});$.each(o.myWBSSet,function(e,t){o.BUBoQs.push(t.Model+t.Group)});o.BUBoQs.sort();var a=null;var r=0;for(var s=0;s<=o.BUBoQs.length;s++){if(o.BUBoQs[s]!=a){if(r>0){o.Boqs.push({Model:a.substr(0,8),BoqSub:a.substr(8,4),Count:r,Categories:[],Services:[]})}a=o.BUBoQs[s];r=1}else{r++}}e.ContractPOSrvItemSet=I;if(C[0]){e.DeliveryDate=C[0].DeliveryDate;e.OvfTol=C[0].OvfTol}else{e.DeliveryDate="";e.OvfTol="0"}e.AttachmentSet=e.AttachmentSet.results;e.editMode=false;o.getView().setModel(new sap.ui.model.json.JSONModel(e),"localJson");o.getView().byId("idDisplayProcessFlow").updateModel();if(e.WFContractInboxNAV.results.length>0){o._readWFType()}var n=JSON.parse(JSON.stringify(o.getView().getModel("localJson").getProperty("/BuildingConsulidatedItemSetfilter")));var l=JSON.parse(JSON.stringify(o.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var d=JSON.parse(JSON.stringify(o.getView().getModel("localJson").getProperty("/BoqItemSet")));$.each(l,function(e,t){$.each(d,function(e,t){$.each(t.Categories,function(t,i){$.each(i.Categories,function(a,r){$.each(r.Categories,function(r,s){var n=false;$.each(o.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===s.Model&&i.Data===t.Group&&t.AsBuild2===""){n=true}});$.each(o.myWBSSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===s.Model&&i.Data===t.Group&&t.AsBuild2===""){n=true}});if(n){d[e].PriceUnit="0";d[e].Categories[t].PriceUnit="0";d[e].Categories[t].Categories[a].PriceUnit="0"}})})})})});var g=[];$.each(l,function(e,t){$.each(d,function(e,o){$.each(o.Categories,function(o,i){$.each(i.Categories,function(i,a){$.each(a.Categories,function(a,r){if(t.Data===r.Data&&t.Txt===r.Txt){d[e].Categories[o].Categories[i].Categories[a].ProvisionRate=parseFloat(t.ProvisionRate);d[e].Categories[o].Categories[i].Categories[a].PriceUnit=parseFloat(t.PriceUnit)*parseFloat(d[e].Categories[o].Categories[i].Categories[a].Qty);if(r.Eancat!=="C"&&r.Eancat!=="U"){d[e].PriceUnit=(parseFloat(d[e].PriceUnit)+parseFloat(t.PriceUnit)*parseFloat(d[e].Categories[o].Categories[i].Categories[a].Qty)).toString()}if(r.Eancat!=="C"&&r.Eancat!=="U"){d[e].Categories[o].PriceUnit=(parseFloat(d[e].Categories[o].PriceUnit)+parseFloat(t.PriceUnit)*parseFloat(d[e].Categories[o].Categories[i].Categories[a].Qty)).toString()}if(r.Eancat!=="C"&&r.Eancat!=="U"){d[e].Categories[o].Categories[i].PriceUnit=(parseFloat(d[e].Categories[o].Categories[i].PriceUnit)+parseFloat(t.PriceUnit)*parseFloat(d[e].Categories[o].Categories[i].Categories[a].Qty)).toString()}}})})})})});$.each(n,function(e,t){});$.each(l,function(e,t){t.Amount=parseFloat(t.PriceUnit)*parseFloat(t.Qty)});o.addVAOld=0;$.each(d,function(e,t){o.addVAOld=parseFloat(o.addVAOld)+parseFloat(d[e].PriceUnit)});o.getView().getModel("localJson").setProperty("/BuildingConsulidatedItemSetfilter",JSON.parse(JSON.stringify(n)));o.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(l.sort((e,t)=>e.Data-t.Data))));o.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(d.sort((e,t)=>e.Data-t.Data))));o.getView().setBusy(false)},8e3)}}).catch(function(e){sap.m.MessageToast.show("Error");o.getView().setBusy(false)})},_bindView:function(e){var t=this.getModel("Contract"),o=this.getModel();this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){o.metadataLoaded().then(function(){t.setProperty("/busy",true)})},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getModel("objectView"),o=e.getElementBinding();this.getResourceBundle()},_actionDialog:null,onActivateReleaseedPO:function(e){var t=this;var o="";var i=true;var a="",r="0004",s=t.getView().getModel("localJson").getProperty("/CreationType");var n=t.getModel("localJson").getProperty("/HeadToHeadVariation");if(n.length===0){i=true}else{$.each(n,function(e,t){if(t.VarStatus!=="R"){o=t.VarStatus;i=false}else{a=t.OrderNo;s=t.OrderType}})}if(i===true){if(!this._activateDialog){this._activateDialog=new sap.m.Dialog({title:"{i18n>Confirm}",content:[new sap.m.Label({text:t.getResourceBundle().getText("Are you sure you want to Activate ",this.docNo)})],beginButton:new sap.m.Button({text:"{i18n>Yes}",press:function(){this._activateDialog.close();var e=t.getView().getModel("localJson").getProperty("/PoNumber"),o=t.getOwnerComponent().getModel();t.getView().setBusy(true);o.callFunction("/POExecuteAction",{method:"POST",urlParameters:{PoNo:e,Decision:r,Notes:"",WorkitemId:t.getView().getModel("localJson").getProperty("/Workitem"),CreationType:t.getView().getModel("localJson").getProperty("/CreationType"),OrderNo:a,ActionType:s,Comments:""},success:function(o){t.getView().setBusy(false);sap.m.MessageBox.success(t.getView().getModel("i18n").getResourceBundle().getText("Contract "+e+" Release Triggered Workflow"),{title:t.getView().getModel("i18n").getResourceBundle().getText("Msg_Success"),onClose:function(e){t._onObjectMatched()}})},error:function(o){t.getView().setBusy(false);sap.m.MessageToast.show("Error in Activating contract "+e)}})}.bind(this)}),endButton:new sap.m.Button({text:"{i18n>No}",press:function(){this._activateDialog.close()}.bind(this)}),afterClose:function(){t._activateDialog.destroy();t._activateDialog=null}});this.getView().addDependent(this._activateDialog)}}else{sap.m.MessageToast.show(" Variation or Addendum should be is confirmed ")}this._activateDialog.open()},_activateDialog:null,onActivatePO:function(e){var t=this;var o="";var i=true,a="",r=r,s=t.getView().getModel("localJson").getProperty("/PoNumber"),n=t.getOwnerComponent().getModel();if(e.getSource().getId().lastIndexOf("idSubmitTermsBtn")>-1){a="0003";r=t.getView().getModel("i18n").getResourceBundle().getText("AreyousureyouwanttoActivate",s)}else if(e.getSource().getId().lastIndexOf("idDeteteContract")>-1){a="0008";r=t.getView().getModel("i18n").getResourceBundle().getText("AreyousureyouwanttoDetete",s)}if(i===true){if(!this._activateDialog){this._activateDialog=new sap.m.Dialog({title:"{i18n>Confirm}",content:[new sap.m.Label({text:r})],beginButton:new sap.m.Button({text:"{i18n>Yes}",press:function(){this._activateDialog.close();t.getView().setBusy(true);const e=n.bindContext("/POExecuteAction(...)");e.setParameter("PoNo",s);e.setParameter("Decision",a);e.setParameter("Notes"," ");e.setParameter("WorkitemId","");e.setParameter("CreationType",t.getView().getModel("localJson").getProperty("/CreationType"));e.setParameter("OrderNo","");e.setParameter("ActionType","");e.setParameter("Comments","");e.execute().then(()=>{t.getView().setBusy(false);if(a==="0003"){sap.m.MessageBox.success(t.getView().getModel("i18n").getResourceBundle().getText("Contract "+s+" Release triggered"),{title:t.getView().getModel("i18n").getResourceBundle().getText("Msg_Success"),onClose:function(e){t._onObjectMatched()}})}else if(a==="0008"){sap.m.MessageBox.success(t.getView().getModel("i18n").getResourceBundle().getText("Contract "+s+" IS Deleted"),{title:t.getView().getModel("i18n").getResourceBundle().getText("Msg_Success"),onClose:function(e){t.onWorklistPress()}})}}).catch(e=>{t.getView().setBusy(false);sap.m.MessageToast.show("Error in Activating contract "+s)})}.bind(this)}),endButton:new sap.m.Button({text:"{i18n>No}",press:function(){this._activateDialog.close()}.bind(this)}),afterClose:function(){t._activateDialog.destroy();t._activateDialog=null}});this.getView().addDependent(this._activateDialog)}}else{sap.m.MessageToast.show(" Variation or Addendum should be is confirmed ")}this._activateDialog.open()},onWorklistPress:function(e){this.getRouter().navTo("worklist",{},true)},_actionDialog:null,onActivatePOWF:function(e){var t=this;var o="";var i=true,a="",r="",s,n=t.getView().getModel("localJson").getProperty("/CreationType");if(e.getSource().getId().lastIndexOf("idAprove")>-1){r="0001";s=t.getView().getModel("i18n").getResourceBundle().getText("detailMsgConfirmApprovell")}else if(e.getSource().getId().lastIndexOf("idreject")>-1){r="0002";s=t.getView().getModel("i18n").getResourceBundle().getText("detailMsgConfirmReject")}else{r="0004";s=t.getView().getModel("i18n").getResourceBundle().getText("ContractReleasetriggeredWorkflow")}var l=t.getModel("localJson").getProperty("/HeadToHeadVariation");if(l.length===0){i=true}else{$.each(l,function(e,t){if(t.VarStatus!=="R"){o=t.VarStatus;i=false}else if(t.WfStatus===""||t.WfStatus==="INPROGRESS"){a=t.OrderNo;n=t.OrderType}})}if(i===true){if(!this._actionDialog){this._actionDialog=new sap.m.Dialog({title:s,type:"Message",content:[new sap.m.TextArea("Notes",{width:"100%",placeholder:s})],beginButton:new sap.m.Button({text:"{i18n>Confirm}",press:function(){var e=sap.ui.getCore().byId("Notes").getValue();var o=t.getView().getModel("localJson").getProperty("/PoNumber"),i=t.getOwnerComponent().getModel();t._actionDialog.close();t._actionDialog.destroy();t._actionDialog=null;i.callFunction("/POExecuteAction",{method:"POST",urlParameters:{PoNo:o,Decision:r,Notes:"",WorkitemId:t.getView().getModel("localJson").getProperty("/Workitem"),CreationType:t.getView().getModel("localJson").getProperty("/CreationType"),OrderNo:a,ActionType:n,Comments:e},success:function(e){if(r==="0004"){t.getView().setBusy(false);sap.m.MessageBox.success(t.getView().getModel("i18n").getResourceBundle().getText("Contract "+o+" Release triggered Workflow"),{title:t.getView().getModel("i18n").getResourceBundle().getText("Msg_Success"),onClose:function(e){t._onObjectMatched()}})}else{t.getView().setBusy(false);sap.m.MessageBox.success(t.getView().getModel("i18n").getResourceBundle().getText("Contract "+o+" Successfully Action"),{title:t.getView().getModel("i18n").getResourceBundle().getText("Msg_Success"),onClose:function(e){t._onObjectMatched()}})}},error:function(e){t.getView().setBusy(false);sap.m.MessageToast.show("Error in Activating contract "+o)}})}}),endButton:new sap.m.Button({text:"{i18n>Cancel}",press:function(){t._actionDialog.close();t._actionDialog.destroy();t._actionDialog=null}}),afterClose:function(){t._actionDialog.destroy()}});this.getView().addDependent(this._actionDialog);this._actionDialog.open()}}else{sap.m.MessageToast.show(" Variation or Addendum should be is confirmed ")}},_createDialog:null,oncreatePO:function(e){var t=this;this.rowContext=e.getSource().getBindingContext("dataModel");if(!this._createDialog){this._createDialog=new sap.m.Dialog({title:"{i18n>Confirm}",content:[new sap.m.Label({text:t.getResourceBundle().getText("detailRequestActivateMessage",this.docNo)})],beginButton:new sap.m.Button({text:"{i18n>Yes}",press:function(){this._createDialog.close();var e=t.getView().getModel("dataModel").getProperty("/PoNumber"),o=t.getOwnerComponent().getModel();t.getView().getModel("detailView").setProperty("/busy",true);o.callFunction("/CreatePurchaseOrder",{method:"POST",urlParameters:{PoNo:e},success:function(e){t.getView().getModel("detailView").setProperty("/busy",false);t.getView().getModel("detailView").setProperty("/bEnabled",false);t.getView().getModel("dataModel").setProperty("/Status","SUBMITTED FOR APPROVAL");t.handleSuccessMessageBox(t.getResourceBundle().getText("detailActivateSuccess",t.docNo))},error:function(e){t.getView().getModel("detailView").setProperty("/busy",false);sap.m.MessageToast.show(t.getResourceBundle().getText("detailActivateError"),{duration:4e3})}})}.bind(this)}),endButton:new sap.m.Button({text:"{i18n>No}",press:function(){this._createDialog.close()}.bind(this)}),afterClose:function(){t._createDialog.destroy();t._createDialog=null}});this.getView().addDependent(this._createDialog)}this._createDialog.open()},onEditPress:function(){var e=this;var t=this.getView();var o;this.Composing="";e.getView().getModel("localJson").setProperty("/editMode",true);var i=e.getView().byId("idCreationType").getSelectedKey();if(this.PurchDoc!==""&&this.getView().byId("idCreationType").getSelectedKey()==="O"){var a=e.getModel("localJson").getProperty("/HeadToHeadVariation");for(var r=0;r<a.length;r++){if(a[r].Status==="C"){this.Composing=a[r].Status;o=a[r].VarStatus}else{this.Composing=a[r].Status;o=a[r].VarStatus}}if(this.Composing==="C"){e.getView().getModel("localJso").setProperty("/VariationMode",false);e.getView().getModel("localJson").setProperty("/editMode",true)}else if(this.Composing==="R"&&o===""){e.getView().getModel("localJso").setProperty("/VariationMode",false);e.getView().getModel("localJson").setProperty("/editMode",true)}else if(this.Composing==="R"&&o==="R"){e.getView().getModel("localJso").setProperty("/VariationMode",true);e.getView().getModel("localJson").setProperty("/editMode",true)}else if(this.Composing===""&&i==="O"){e.getView().getModel("localJso").setProperty("/VariationMode",true);e.getView().getModel("localJson").setProperty("/editMode",true)}}else{e.getView().getModel("localJso").setProperty("/VariationMode",false);e.getView().getModel("localJson").setProperty("/editMode",true)}},onCancelPress:function(){var e=this;var t=this.getView();e.getView().getModel("localJson").setProperty("/editMode",false);e.getView().getModel("localJso").setProperty("/VariationMode",true);e._onObjectMatched();e._onBindingChange()},onChangeTolerance:function(){var e=this;var t=e.getView().byId("idTolerance").getValue();var o=e.getView().getModel("localJson").getProperty("/BoqItemSet");$.each(o,function(e,i){$.each(i.Categories,function(i,a){$.each(a.Categories,function(a,r){$.each(r.Categories,function(r,s){o[e].Categories[i].Categories[a].Categories[r].OvfTol=t})})})});e.getView().getModel("localJson").setProperty("/BoqItemSet",o)},onDisplaySearBuilding:function(){if(!this._BuildingDialog){this._BuildingDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.BuildingSearchDialog",this);this._BuildingDialog.setModel(this.getView().getModel())}this._BuildingDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"BUILDINGID");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.sProj);var s=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.EQ,this.ModelCode);var n=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.EQ,this.GroupCode);t.push(o);if(this.sProjectCode.length>0){t.push(i)}if(this.sProj.length>0){t.push(r)}if(this.ModelCode.length>0){t.push(s)}if(this.GroupCode.length>0){t.push(n)}t.push(a);this._BuildingDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchBuilding:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"BUILDINGID");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,this.sProj);var n=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.EQ,this.ModelCode);var l=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.EQ,this.GroupCode);var d=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var g=[];g.push(o);if(this.sProjectCode.length>0){g.push(r)}if(this.sProj.length>0){g.push(s)}if(this.ModelCode.length>0){g.push(n)}if(this.GroupCode.length>0){g.push(l)}g.push(a);g.push(i);this._BuildingDialog.bindAggregation("items",{path:"/ValueHelpSet",template:d,filters:g})},onSelectBuilding:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.Building=e.getObject().IdNumber;t.getView().byId("_IdBuilding").setValue(e.getObject().IdText)})}else{t.Building="";t.getView().byId("_IdBuilding").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchidSupeiorWBSDialog:function(){if(this.sCoCode&&this.sProjectCode){if(!this._SuperiorWBSDialog){this._SuperiorWBSDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SuperiorWBSSearchDialog",this);this._SuperiorWBSDialog.setModel(this.getView().getModel())}this._SuperiorWBSDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,1e3);t.push(o);t.push(i);t.push(a);t.push(r);this._SuperiorWBSDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})}else{sap.m.MessageToast.show(this.getView().getModel("i18n").getResourceBundle().getText("Msg_Error_Select_WBS_C"))}},handleSearWBS:function(){var e=this;if(!this._GroupDialog){this._GroupDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SuperiorWBSSearchDialog",this);this._GroupDialog.setModel(this.getView().getModel())}var t=e.getView().getModel();var o=new sap.ui.model.json.JSONModel;o.setData({SupeiorWBSSet:[]});e._SuperiorWBSDialog.setModel(o,"localJson");var i=[];var a=[];var r=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var s=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var n=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var l=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,sap.ui.getCore().byId("idDesc").getValue());var d=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().byId("idlenth").getValue());i.push(r);i.push(s);i.push(n);if(sap.ui.getCore().byId("idDesc").getValue()!==""){i.push(l)}if(sap.ui.getCore().byId("idlenth").getValue()!==""){i.push(d)}if(sap.ui.getCore().byId("idlenth").getValue()===""){var d=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,500);i.push(d)}t.read("/ValueHelpSet",{filters:i,success:function(t){var o=JSON.parse(JSON.stringify(t.results));e._SuperiorWBSDialog.getModel("localJson").setProperty("/SupeiorWBSSet",o)},error:function(e){sap.m.MessageToast.show("Error")}})},onSelectCheque:function(e){this.SupeiorWBSText=e.getParameters().rowContext.getObject().IdText;this.SupeiorWBSCode=e.getParameters().rowContext.getObject().IdNumber;this.getView().byId("idSupeiorWBS").setValue(this.SupeiorWBSText);this._SuperiorWBSDialog.close();that._SuperiorWBSDialog.destroy();that._SuperiorWBSDialog=null},_handleCancelPresswbs:function(){var e=this;e._SuperiorWBSDialog.close();e._SuperiorWBSDialog.destroy();e._SuperiorWBSDialog=null},handleSearchSuperior:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,1e3);var n=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var l=[];l.push(o);l.push(i);l.push(a);l.push(r);l.push(s);this._SuperiorWBSDialog.bindAggregation("items",{path:"/ValueHelpSet",template:n,filters:l})},onSelectSuperiorList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.SupeiorWBSText=e.getObject().IdText;t.SupeiorWBSCode=e.getObject().IdNumber;t.getView().byId("idSupeiorWBS").setValue(e.getObject().IdText)})}else{t.SupeiorWBSText="";t.SupeiorWBSCode="";t.getView().byId("idSupeiorWBS").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearGroup:function(e){this.idSelestGroup=e.getSource().getId();if(!this._GroupDialog){this._GroupDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.GroupSearchDialog",this);this._GroupDialog.setModel(this.getView().getModel())}this._GroupDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Group");var a=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProj);var r=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,this.ModelCode);var n=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.Contains,this.Building);o.push(i);if(this.sProj.length>0){o.push(a)}if(this.ModelCode.length>0){o.push(s)}if(this.Building.length>0){o.push(n)}o.push(r);this._GroupDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:o})},handleSearchGroup:function(e){var t=this;var o=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Group");var a=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProj);var r=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var s=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,o);var n=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,this.ModelCode);var l=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.Contains,this.Building);var d=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var g=[];g.push(i);if(o!==""){g.push(s)}g.push(r);if(this.sProj.length>0){g.push(a)}if(this.ModelCode.length>0){g.push(n)}if(this.Building.length>0){g.push(l)}this._GroupDialog.bindAggregation("items",{path:"/ValueHelpSet",template:d,filters:g})},onSelectGroupList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){if(t.idSelestGroup==="idSearchByGroupp"){t.GroupCodee=e.getObject().IdNumber;t.getView().byId("idSearchByGroupp").setValue(e.getObject().IdText)}else{t.GroupCode=e.getObject().IdNumber;t.getView().byId("idSearchByGroup").setValue(e.getObject().IdText)}})}else{t.GroupCodee="";t.getView().byId("idSearchByGroup").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},_BuildinDialog:null,onBuildingSelectionValueHelpPress:function(){var e=this;var t=this.getModel("localJson").getProperty("/StatusOr");this.getView().getModel("localJson").setProperty("/selectBoq",false);if(this.PurchDoc!==""&&t==="Released Original"&&this.getView().byId("idCreationType").getSelectedKey()==="O"){if(t==="Released Original"){var o=e.getModel("localJson").getProperty("/HeadToHeadVariation");for(var i=0;i<o.length;i++){if(o[i].Status==="C"){if(o[i].UserOrder===""||o[i].OrderDesc===""){sap.m.MessageToast.show("Please Enter Manadatory Fields");return}this.Composing=o[i].Status}}if(this.Composing==""||this.Composing==="R"){sap.m.MessageToast.show("Please Create Variation order or Addenum");e.getView().getModel("localJso").setProperty("/VariationMode",false)}else{if(e.sProjectCode!==""&&e.sCoCode!==""){this.getView().getModel("localJson").setProperty("/BuildingSet",[]);var a=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.SelectMultiBuildingTable",this);if(!this._BuildinDialog){this._BuildinDialog=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.SelectMultiBuildingDialoge",this);this._BuildinDialog.setTable(a);this.getView().addDependent(this._BuildinDialog);e.aContexts=[];e.Boqs=[];e.BUBoQs=[]}e._BuildinDialog.open()}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}}}else{sap.m.MessageToast.show("Please select Creation Type is Original .")}}else{if(e.sProjectCode!==""&&e.sCoCode!==""){this.getView().getModel("localJson").setProperty("/BuildingSet",[]);var a=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.SelectMultiBuildingTable",this);if(!this._BuildinDialog){this._BuildinDialog=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.SelectMultiBuildingDialoge",this);this._BuildinDialog.setTable(a);this.getView().addDependent(this._BuildinDialog);e.aContexts=[];e.Boqs=[];e.BUBoQs=[]}e._BuildinDialog.open();e.aContexts=[];e.Boqs=[];e.BUBoQs=[]}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}}},onAfterClose:function(e){var t=this;t._oBuilding2Dialog.destroy();t._oBuilding2Dialog=null},onAfterCloseWBS:function(e){var t=this;e.getSource().destroy();t._oWBS2Dialog=null},onActionAfterClose:function(e){var t=this;t._action2Sheet.destroy();t._action2Sheet=null},_handleCancelPressBuilding:function(){var e=this;var t=e.getView().getModel("localJson").getProperty("/selectedBuilding");var o=[];for(var i=0;i<e.myBuildingSet.length;i++){var a=false;$.each(t,function(t,o){if(e.myBuildingSet[i].BuildingNo===o.BuildingNo&&e.myBuildingSet[i].Model===o.Model&&e.myBuildingSet[i].Group===o.Group)a=true});if(!a){o.push(e.myBuildingSet[i])}}e.myBuildingSet=JSON.parse(JSON.stringify(o));e.getView().getModel("localJson").setProperty("/myBuildingSet",e.myBuildingSet);e.getView().getModel("localJson").setProperty("/selectedBuilding",[]);e._oBuilding2Dialog.close();this.afterCloseBuilding()},afterCloseBuilding:function(){if(this._oBuilding2Dialog){this._oBuilding2Dialog.destroy();this._oBuilding2Dialog=null}},onProvisionRateChange:function(e){var t=this;if(e!==""){var o=e.getSource().getBindingContext("localJson").getPath();var i=this.getView().getModel("localJson");var a=i.getProperty(o);a.ChangeIndicator="X";i.setProperty(o,a);var r=e.getSource().getBindingContext("localJson").getObject();$.each(t.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===r.Boq&&r.SubBoq===t.Group&&t.Txt===r.Txt){t.ChangeIndicator="ChangeP"}});$.each(t.myWBSSet,function(e,t){if(t.Model===r.Boq){t.ChangeIndicator="ChangeP"}})}},onPriceConsolidatedChange:function(e,t,o){var i=this;var a="0.00",r="0.00",s="0.00";var n=i.getModel("localJson").getProperty("/HeadToHeadVariation");var l=JSON.parse(JSON.stringify(i.getView().getModel("localJson").getProperty("/BoqItemSet")));var d=JSON.parse(JSON.stringify(i.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet"))),g=JSON.parse(JSON.stringify(i.getView().getModel("localJson").getProperty("/PRItemSet"))),c=this.getView().getModel("localJson").getProperty("/myPurchaseRequisition");if(e!==""){var u=e.getSource().getBindingContext("localJson").getPath();var p=this.getView().getModel("localJson");var h=p.getProperty(u);h.ChangeIndicator="X";p.setProperty(u,h);var m=e.getSource().getBindingContext("localJson").getObject();var S=m.Data;$.each(l,function(e,t){$.each(t.Categories,function(t,o){$.each(o.Categories,function(o,i){$.each(i.Categories,function(i,a){l[e].PriceUnit="0";l[e].Categories[t].PriceUnit="0";l[e].Categories[t].Categories[o].PriceUnit="0"})})})});$.each(g,function(e,t){$.each(t.Categories,function(e,o){$.each(o.Categories,function(e,i){t.PriceUnit="0";o.PriceUnit="0";i.PriceUnit="0"})})});$.each(d,function(e,t){$.each(l,function(e,o){$.each(o.Categories,function(a,r){$.each(r.Categories,function(s,n){$.each(n.Categories,function(n,d){if(d.Data===S&&m.Txt===d.Txt){if(o.AddNew!=="AN"){d.ChangeIndicator="ChangeP"}}if(t.Data===d.Data&&t.Txt===d.Txt){var g=false;$.each(i.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===m.Boq&&m.SubBoq===t.Group&&t.Txt===m.Txt){if(o.AddNew!=="AN"){t.ChangeIndicator="ChangeP"}}if((t.Model.length===8?t.Model:"00000"+t.Model)===d.Model&&r.Data===t.Group){g=true}});$.each(i.myWBSSet,function(e,t){if(t.Model===d.Model){if(o.AddNew!=="AN"){t.ChangeIndicator="ChangeP"}}if(t.Model===d.Model){g=true}});if(g){t.PriceUnit=parseFloat(t.PriceUnit).toFixed(i.CustomCurrency);var c=JSON.parse(JSON.stringify(t.PriceUnit));l[e].Categories[a].Categories[s].Categories[n].Price=c;l[e].Categories[a].Categories[s].Categories[n].PriceUnit=(c*parseFloat(l[e].Categories[a].Categories[s].Categories[n].Qty)).toString();if(d.Eancat!=="C"&&d.Eancat!=="U"){l[e].PriceUnit=(parseFloat(l[e].PriceUnit)+c*parseFloat(l[e].Categories[a].Categories[s].Categories[n].Qty)).toString()}if(d.Eancat!=="C"&&d.Eancat!=="U"){l[e].Categories[a].PriceUnit=(parseFloat(l[e].Categories[a].PriceUnit)+c*parseFloat(l[e].Categories[a].Categories[s].Categories[n].Qty)).toString()}if(d.Eancat!=="C"&&d.Eancat!=="U"){l[e].Categories[a].Categories[s].PriceUnit=(parseFloat(l[e].Categories[a].Categories[s].PriceUnit)+c*parseFloat(l[e].Categories[a].Categories[s].Categories[n].Qty)).toString()}}}})})})})});$.each(d,function(e,t){$.each(g,function(e,o){$.each(o.Categories,function(e,i){$.each(i.Categories,function(e,a){if(a.Data===S&&m.Txt===a.Txt){if(o.AddNew!=="AN"){a.ChangeIndicator="ChangeP"}}if(t.Data===a.Data&&t.Txt===a.Txt){$.each(c,function(e,r){if(o.AddNew!=="AN"){r.ChangeIndicator="ChangeP"}if(r.PrNo==o.PrNumber&&i.Data===a.Item){var s=JSON.parse(JSON.stringify(t.PriceUnit));a.price=s;a.PriceUnit=(s*parseFloat(a.Qty)).toString();a.Qty=parseFloat(a.Qty).toString();if(a.Eancat!=="C"&&a.Eancat!=="U"){o.PriceUnit=(parseFloat(o.PriceUnit)+s*parseFloat(a.Qty)).toString()}if(a.Eancat!=="C"&&a.Eancat!=="U"){i.PriceUnit=(parseFloat(i.PriceUnit)+s*parseFloat(a.Qty)).toString()}}})}})})})})}else{var m=t;var S=m.Data;var f="1";$.each(l,function(e,t){$.each(t.Categories,function(t,o){$.each(o.Categories,function(o,i){$.each(i.Categories,function(i,a){l[e].PriceUnit="0";l[e].Categories[t].PriceUnit="0";l[e].Categories[t].Categories[o].PriceUnit="0"})})})});$.each(g,function(e,t){$.each(t.Categories,function(e,o){$.each(o.Categories,function(e,i){t.PriceUnit="0";o.PriceUnit="0";i.PriceUnit="0"})})});$.each(d,function(e,t){$.each(l,function(e,o){$.each(o.Categories,function(a,r){$.each(r.Categories,function(s,n){$.each(n.Categories,function(n,d){if(t.Data===d.Data&&t.Txt===d.Txt){if(d.Data===S&&m.Txt===d.Txt){if(o.AddNew!=="AN"){d.ChangeIndicator="ChangeP"}}var g=false;$.each(i.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===d.Model&&r.Data===t.Group){g=true}});$.each(i.myWBSSet,function(e,t){if(t.Model===d.Model){g=true}});if(g){t.PriceUnit=parseFloat(t.PriceUnit).toFixed(i.CustomCurrency);var c=JSON.parse(JSON.stringify(t.PriceUnit));l[e].Categories[a].Categories[s].Categories[n].Price=c;l[e].Categories[a].Categories[s].Categories[n].PriceUnit=(c*parseFloat(l[e].Categories[a].Categories[s].Categories[n].Qty)).toString();if(d.Eancat!=="C"&&d.Eancat!=="U"){l[e].PriceUnit=(parseFloat(l[e].PriceUnit)+c*parseFloat(l[e].Categories[a].Categories[s].Categories[n].Qty)).toString()}if(d.Eancat!=="C"&&d.Eancat!=="U"){l[e].Categories[a].PriceUnit=(parseFloat(l[e].Categories[a].PriceUnit)+c*parseFloat(l[e].Categories[a].Categories[s].Categories[n].Qty)).toString()}if(d.Eancat!=="C"&&d.Eancat!=="U"){l[e].Categories[a].Categories[s].PriceUnit=(parseFloat(l[e].Categories[a].Categories[s].PriceUnit)+c*parseFloat(l[e].Categories[a].Categories[s].Categories[n].Qty)).toString()}}}})})})})});$.each(d,function(e,t){$.each(g,function(e,o){$.each(o.Categories,function(e,i){$.each(i.Categories,function(e,a){if(a.Data===S&&m.Txt===a.Txt){if(o.AddNew!=="AN"){a.ChangeIndicator="ChangeP"}}if(t.Data===a.Data&&t.Txt===a.Txt){$.each(c,function(e,r){if(o.AddNew!=="AN"){r.ChangeIndicator="ChangeP"}if(r.PrNo==o.PrNumber&&i.Data===a.Item){var s=JSON.parse(JSON.stringify(t.PriceUnit));a.price=s;a.PriceUnit=(s*parseFloat(a.Qty)).toString();a.Qty=parseFloat(a.Qty).toString();if(a.Eancat!=="C"&&a.Eancat!=="U"){o.PriceUnit=(parseFloat(o.PriceUnit)+s*parseFloat(a.Qty)).toString()}if(a.Eancat!=="C"&&a.Eancat!=="U"){i.PriceUnit=(parseFloat(i.PriceUnit)+s*parseFloat(a.Qty)).toString()}}})}})})})})}var n=i.getModel("localJson").getProperty("/HeadToHeadVariation");$.each(n,function(e,t){if(n[e].Status==="C"){i.AddValueVariation(l)}});i.onAfterClose();$.each(d,function(e,t){t.Amount=(parseFloat(t.PriceUnit).toFixed(i.CustomCurrency)*parseFloat(t.Qty)).toFixed(i.CustomCurrency)});s=parseFloat(a)+parseFloat(r);i.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(d.sort((e,t)=>e.Data-t.Data))));i.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(l.sort((e,t)=>e.Data-t.Data))));i.getView().getModel("localJson").setProperty("/PRItemSet",JSON.parse(JSON.stringify(g.sort((e,t)=>e.Data-t.Data))));c=this.getView().getModel("localJson").setProperty("/myPurchaseRequisition",c);i.ContractValueHeader()},_handleValueHelpCloseBuilding:function(e){var t=this,o=t.getView().getModel();t.getView().setBusy(true);var i=t.getView().getModel();var a=t.getView().getModel("localJson").getProperty("/selectedBuilding");var r=t.getView().getModel("localJson").getProperty("/selectedBuildingOrWBS"),s=t.getModel("localJson").getProperty("/HeadToHeadVariation"),n=[],l=[];var d=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));if(t.aContexts.length===0)sap.m.MessageToast.show("Select one Building at least!");else{var g=false;$.each(t.myBuildingSet,function(e,t){if(t.Group===""){g=true}});if(g)sap.m.MessageToast.show("Select Boq for each Building!");else{$.each(a,function(e,o){t.BUBoQs.push(o.Model+o.Group)});t.BUBoQs.sort();this.objSet=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));this.selectedBuilding=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/selectedBuilding")));var c=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var u="0.00";$.each(r,function(e,t){var o=new sap.ui.model.Filter("Data",sap.ui.model.FilterOperator.BT,t.Model,t.Group);if(o!==""){l.push(o)}});var p=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,t.sProjectCode);if(p!==""){l.push(p)}var h=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,t.sCoCode);if(h!==""){l.push(h)}o.read("/BoqTreeSet",{filters:l,success:function(e,o){e=e.results;var i=1;var a=[];var r="O";var n="";var l="UA";var d="";$.each(s,function(e,t){if(s[e].Status==="C"){r=s[e].OrderType;n=s[e].OrderNo;d=s[e].UserOrder}});if(r==="O"){var g="Original"}else{var g=r+"-"+d}$.each(e,function(t,o){if(e[t].LevelNo==="1"){e[t].AddNew="AN";e[t].live="one"}e[t].ModelType="BOQ";if(e[t].Eancat===""&&parseInt(e[t].LevelNo)===4){e[t].Qty="0";e[t].Uom="";e[t].Price="0"}if(e[t].Eancat==="U"){e[t].Qty=0}if(parseInt(e[t].LevelNo)===4){e[t].Txt=g;e[t].SrvStatus=l;if(e[t].Eancat!=""){e[t].PriceUnit="1";e[t].Price="1"}e[t].DelInd="";e[t].VariationOrder=n;e[t].ChangeIndicator="addB";e[t].ContractualIndicator=r;e[t].Indicator="Y";u=parseFloat(u)+parseFloat(e[t].Qty)*parseFloat(e[t].Price)}else{e[t].Indicator="Z"}});t.getView().getModel("localJson").setProperty("/myBuildingSet",t.myBuildingSet);t.getView().getModel("localJson").setProperty("/myBuildingSet",t.myBuildingSet);for(i;i<e.length+1;i++){a.push({[i]:[]});for(var c=0;c<e.length;c++){e[c].Categories=[];if(parseInt(e[c].LevelNo)===i){a[i-1][i].push(e[c])}}}var p=[];$.each(a,function(e,t){if(e<3){$.each(t,function(t,o){if(o.length!==0){$.each(o,function(t,o){$.each(a[e+1],function(e,t){$.each(t,function(e,t){if(t.length!==0){if(o.LevelId===t.Parent){o.Categories.push(t)}}})})})}})}});$.each(a[0],function(e,t){if(t.length!==0){$.each(t,function(e,t){p.push(t)})}});var h=false;var m=false;$.each(p,function(e,o){h=false;if(t.objSet.length!==0){$.each(t.objSet,function(i,a){$.each(o.Categories,function(r,s){$.each(a.Categories,function(e,t){if(o.Data===a.Data){h=true;if(s.Data===t.Data){m=true}}});if(h&&!m){if(s.Model===a.Model){t.objSet[i].Categories.push(p[e].Categories[r]);m=false}}})});if(!h&&!m){t.objSet.push(o);h=false}}else{t.objSet.push(o)}m=false;h=false});t.getView().getModel("localJson").setProperty("/BoqItemSet",t.objSet);t.getView().getModel("localJson").setProperty("/selectedBuildingOrWBS",[]);t.Consoliatedservices();var a=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var S=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(a,function(e,t){$.each(t.Categories,function(t,o){$.each(o.Categories,function(o,i){$.each(i.Categories,function(i,r){a[e].PriceUnit="0";a[e].Categories[t].PriceUnit="0";a[e].Categories[t].Categories[o].PriceUnit="0";a[e].Categories[t].Categories[o].Categories[i].Matdesc=a[e].Categories[t].Categories[o].ShortDesc})})})});$.each(S,function(e,o){$.each(a,function(e,i){$.each(i.Categories,function(i,r){$.each(r.Categories,function(r,s){$.each(s.Categories,function(s,n){if(o.Data===n.Data&&o.Txt===n.Txt){var l=false;$.each(t.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===n.Model){l=true}});$.each(t.myWBSSet,function(e,t){if(t.Model===n.Model){l=true}});if(l){var d=JSON.parse(JSON.stringify(parseFloat(o.PriceUnit).toFixed(t.CustomCurrency)));a[e].Categories[i].Categories[r].Categories[s].price=d;a[e].Categories[i].Categories[r].Categories[s].PriceUnit=(d*parseFloat(a[e].Categories[i].Categories[r].Categories[s].Qty)).toString();if(n.Eancat!=="C"&&n.Eancat!=="U"){a[e].PriceUnit=(parseFloat(a[e].PriceUnit)+d*parseFloat(a[e].Categories[i].Categories[r].Categories[s].Qty)).toString()}if(n.Eancat!=="C"&&n.Eancat!=="U"){a[e].Categories[i].PriceUnit=(parseFloat(a[e].Categories[i].PriceUnit)+d*parseFloat(a[e].Categories[i].Categories[r].Categories[s].Qty)).toString()}if(n.Eancat!=="C"&&n.Eancat!=="U"){a[e].Categories[i].Categories[r].PriceUnit=(parseFloat(a[e].Categories[i].Categories[r].PriceUnit)+d*parseFloat(a[e].Categories[i].Categories[r].Categories[s].Qty)).toString()}}}})})})})});t.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(a)));t.ContractValueHeader();t.addBuildingForvariation()},error:function(e){sap.m.MessageToast.show("Error")}})}}},onDisplaySearchSubBoqDialog:function(e){var t=this;if(!this._oSubBoqDialog){this._oSubBoqDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SubBoqSearchDialog",this);this._oSubBoqDialog.setModel(this.getView().getModel())}this._oSubBoqDialog.open();this.sSubBoqId=e.getParameters().id;var o=e.getSource().getBindingContext("localJson").getObject().Model;var i=e.getSource().getBindingContext("localJson").getObject().Usagetype;this.BoqDescR=e.getSource().getBindingContext("localJson").getObject();var a=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,o);var r=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,t.sCoCode);var s=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,t.sProjectCode);var n=new sap.m.StandardListItem({title:"{BoqSub}",description:"{BoqDesc}"});var l=[];l.push(a);l.push(r);l.push(s);this._oSubBoqDialog.bindAggregation("items",{path:"/BoqSubItemSet",template:n,filters:l})},onDisplay2SearchSubBoqDialog:function(e){if(!this._oSubBoq2Dialog){this._oSubBoq2Dialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SubBoqSearchDialog",this);this._oSubBoq2Dialog.setModel(this.getView().getModel())}this._oSubBoq2Dialog.open();this.sSubBoq2Id=e.getParameters().id;var t=e.getSource().getBindingContext("localJson").getObject().SelectionParameter6;this.BoqDescR=e.getSource().getBindingContext("localJson").getObject();var o=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,t);var i=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var r=new sap.m.StandardListItem({title:"{BoqSub}",description:"{BoqDesc}"});var s=[];s.push(o);s.push(i);s.push(a);this._oSubBoq2Dialog.bindAggregation("items",{path:"/BoqSubItemSet",template:r,filters:s})},onSelectSubBoqList:function(e){var t=this;var o;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){if(t.sSubBoqId!==""){o=e.getObject().BoqDesc;t.sSubBoq=e.getObject().BoqSub;sap.ui.getCore().byId(t.sSubBoqId).setValue(e.getObject().BoqSub);t.BoqDescR.BoqDesc=o}if(t.sSubBoq2Id!==""){o=e.getObject().BoqDesc;t.sSubBoq=e.getObject().BoqSub;t.sSubBoq2=e.getObject().BoqSub;sap.ui.getCore().byId(t.sSubBoq2Id).setValue(e.getObject().BoqSub);t.BoqDescR.BoqDesc=o}})}else{sap.m.MessageToast.show("No new item was selected.")}this.sSubBoq2Id="";this.sSubBoqId=""},_longTextDialog:null,onPressLongText:function(e){var t=this;t.itemIndex=e.getSource().getBindingContext("localJson").getPath();var o=e.getSource().getBindingContext("localJson").getObject();if(!t._longTextDialog){t._longTextDialog=sap.ui.xmlfragment(t.getView().getId(),"com.cicre.po.view.fragments.ServiceLongText",t);t.getView().addDependent(t._longTextDialog)}t._longTextDialog.open();t.getView().byId("idLongText").setText(o.ShortDesc)},onCloseLongTextFragment:function(e){this._longTextDialog.close()},onExpandFirstLevel:function(){var e=this.byId("TreeTableBasic");e.expandToLevel(3)},onCollapseAll:function(){var e=this.byId("TreeTableBasic");e.collapseAll()},handleOpenActionSheetVOA:function(e){var t=e.getSource();if(!this._actionSheetVOA){this._actionSheetVOA=sap.ui.xmlfragment("com.cicre.po.view.fragments.ActionVOADialog",this);this.getView().addDependent(this._actionSheetVOA)}this._actionSheetVOA.openBy(t)},onvariation_Order:function(){var e=this;if(e.sProjectCode!==""&&e.sCoCode!==""){if(!e._varOrdDialog){e._varOrdDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SelectMultiWBS",e);var t=new sap.ui.model.resource.ResourceModel({bundleUrl:"i18n/i18n.properties"});e._varOrdDialog.setModel(t,"i18n");e._varOrdDialog.setModel(e.getView().getModel())}e._varOrdDialog.open();var o=e.getView().getModel();var i=new sap.ui.model.json.JSONModel;i.setData({VariationOrderSet:[]});e._varOrdDialog.setModel(i,"localJson");var a=[];var r=new sap.ui.model.Filter("ContractNo",sap.ui.model.FilterOperator.EQ,"00235");a.push(r);o.read("/OrderHeaderSet",{filters:a,success:function(t){var o=JSON.parse(JSON.stringify(t.results));e._varOrdDialog.getModel("localJson").setProperty("/VariationOrderSet",o)},error:function(e){sap.m.MessageToast.show("Error")}})}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}},onVoewAfterClose:function(e){var t=this;e.getSource().destroy();t._View2Sheet=null},_action2Sheet:null,handleOpenActionSheet:function(e){if(this.getView().byId("idCreationType").getSelectedKey()==="O"){var t=e.getSource();if(!this._action2Sheet){this._action2Sheet=sap.ui.xmlfragment("com.cicre.po.view.fragments.ActionSheetDialog",this);this.getView().addDependent(this._action2Sheet)}this._action2Sheet.openBy(t);sap.ui.getCore().byId("idonAddBuildings").setVisible(false);sap.ui.getCore().byId("idonAddWBS").setVisible(true);sap.ui.getCore().byId("idonAddBuildingsC").setVisible(false);sap.ui.getCore().byId("idonAddWBSC").setVisible(false)}else{sap.m.MessageToast.show("you should select Creation original order")}},onWBSSelectionValueHelpPressB:function(e){var t=this;t.fragmentType="";var o=this.getModel("localJson").getProperty("/StatusOr");if(e.getSource().getId().lastIndexOf("idAddPurchaseRequisitionc")>-1){t.fragmentType="PR"}if(this.PurchDoc!==""&&o==="Released Original"&&this.getView().byId("idCreationType").getSelectedKey()==="O"){if(o==="Released Original"){var i=t.getModel("localJson").getProperty("/HeadToHeadVariation");for(var a=0;a<i.length;a++){if(i[a].Status==="C"){if(i[a].UserOrder===""||i[a].OrderDesc===""){sap.m.MessageToast.show("Please Enter Manadatory Fields");return}this.Composing=i[a].Status}}if(this.Composing==""||this.Composing==="R"){sap.m.MessageToast.show("Please Create Variation order or Addenum");t.getView().getModel("localJso").setProperty("/VariationMode",false)}else{if(t.sProjectCode!==""&&t.sCoCode!==""){if(t.fragmentType==="PR"){this.onPRSelectionValueHelpPress()}else{t.onWBSSelectionValueHelpPress()}}else{sap.m.MessageToast.show("Please select Company Code and Project first.")}}}else{sap.m.MessageToast.show("Please select Creation Type is Original .")}}else{if(t.fragmentType==="PR"){this.onPRSelectionValueHelpPress()}else{t.onWBSSelectionValueHelpPress()}}},_handleCancelPressWBS:function(){var e=this;var t=e.getView().getModel("localJson").getProperty("/selectedBuilding");var o=[];for(var i=0;i<e.myWBSSet.length;i++){var a=false;$.each(t,function(t,o){if(e.myWBSSet[i].Model===o.Model)a=true});if(!a){o.push(e.myWBSSet[i])}}e.myWBSSet=JSON.parse(JSON.stringify(o));e.getView().getModel("localJson").setProperty("/myWBSSet",e.myWBSSet);e.getView().getModel("localJson").setProperty("/selectedBuilding",[]);e._oWBS2Dialog.close()},handleSearchBuildingPress:function(){var e=this;var t=e.getView().getModel(),o=true,i=e.getView().getModel("localJson");var a=[];var r=new sap.ui.model.Filter("Zone",sap.ui.model.FilterOperator.EQ,e.sProj);var s=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,e.sCoCode);var n=new sap.ui.model.Filter("BuildingNo",sap.ui.model.FilterOperator.EQ,e.Building);var l=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,e.sProjectCode);var d=new sap.ui.model.Filter("Group",sap.ui.model.FilterOperator.EQ,e.GroupCode);var g=new sap.ui.model.Filter("Model",sap.ui.model.FilterOperator.EQ,e.ModelCodee);if(e.sProj!=="")a.push(r);if(e.Building!=="")a.push(n);if(e.GroupCode!==""){a.push(d)}if(e.ModelCodee!==""){a.push(g)}a.push(s);a.push(l);t.read("/BuildingSet",{filters:a,success:function(t){$.each(t.results,function(i,a){if(a.Status==="")a.Status="COMPOSING";if(i==0){e.oldmodelvalue=t.results[i].Model}if(e.oldmodelvalue!=t.results[i].Model||e.oldmodelvalue===""){o=false}});e.BoqAll="";e.BoqDescAll="";e.getView().byId("idhandboq").setValue(e.BoqDescAll);var a=JSON.parse(JSON.stringify(t.results));i.setProperty("/BuildingSet",a);if(e.oldmodelvalue===""){o=false}if(o){e.getView().getModel("localJson").setProperty("/selectBoq",true)}i.refresh()},error:function(e){sap.m.MessageToast.show("Error")}})},onDisplaySearchProjDialog:function(e){this.idSearch=e.getSource().getId();if(!this._oProjDialog){this._oProjDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ProjSearchDialog",this);this._oProjDialog.setModel(this.getView().getModel())}this._oProjDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Zone");var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,this.ModelCode);var n=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.Contains,this.Building);var l=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.Contains,this.GroupCode);o.push(i);o.push(a);o.push(r);if(this.ModelCode.length>0){o.push(s)}if(this.Building.length>0){o.push(n)}if(this.GroupCode.length>0){o.push(l)}this._oProjDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:o})},handleSearchProj:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Zone");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.Contains,this.ModelCode);var n=new sap.ui.model.Filter("SelectionParameter5",sap.ui.model.FilterOperator.Contains,this.Building);var l=new sap.ui.model.Filter("SelectionParameter6",sap.ui.model.FilterOperator.Contains,this.GroupCode);var d=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var g=[];g.push(o);g.push(i);g.push(a);g.push(r);if(this.ModelCode.length>0){g.push(s)}if(this.Building.length>0){g.push(n)}if(this.GroupCode.length>0){g.push(l)}this._oProjDialog.bindAggregation("items",{path:"/ValueHelpSet",template:d,filters:g})},onSelectProjList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.sProj=e.getObject().IdNumber;if(t.idSearch==="idSearchByProjectt"){t.getView().byId("idSearchByProjectt").setValue(e.getObject().IdText);t.sProjj=e.getObject().IdNumber}else{t.getView().byId("idSearchByProject").setValue(e.getObject().IdText);t.sProj=e.getObject().IdNumber}})}else{t.sProjj="";t.sProj="";t.getView().byId("idSearchByProject").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},handleSuggestProj:function(e){var t=e.getParameter("suggestValue");var o=[];if(t){o.push(new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"BE"));o.push(new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t))}e.getSource().getBinding("suggestionItems").filter(o)},onSelectProjSuggestion:function(e){this.sProj=e.getSource().getSelectedKey()},addBuildingForvariation:function(){var e=this;var t=e.getView().getModel("localJson").getProperty("/variationBuilding");var o=e.getModel("localJson").getProperty("/HeadToHeadVariation");var i=e.getView().getModel("localJson").getProperty("/BoqItemSet");var a=e.getView().getModel("localJson").getProperty("/PRItemSet"),r=e.getView().getModel("localJson").getProperty("/myPurchaseRequisition");var s=JSON.parse(JSON.stringify(e.getView().getModel("localJson").getProperty("/selectedBuilding")));var n=t;var l=0;var d,g={};$.each(s,function(t,o){if(o.vlive==="V"){var a=false;$.each(i,function(r,l){$.each(i[r].Categories,function(i,r){if(o.Group===r.Data&&(o.Model.length===8?o.Model:"00000"+o.Model)===(r.Model.length===8?r.Model:"00000"+r.Model)){s[t].Add="A";g={Group:s[t].Zzgroup,Status:"C",DeleteInd:s[t].DeleteInd,Action:s[t].Add,ContractNo:e.ContractNo,BuildingNo:s[t].BuildingNo===""?s[t].Model:s[t].BuildingNo,Zzone:s[t].Project,Model:s[t].Model,ModelDesc:s[t].ModelDesc===""?s[t].IdText:s[t].ModelDesc,Boq:s[t].Group,Amount:r.PriceUnit,Type:""};$.each(n,function(e,t){if(o.Group===t.Boq&&o.Model===t.Model&&o.BuildingNo===t.BuildingNo){a=true}});if(a===false){n.push(g)}}})})}});$.each(r,function(t,o){if(o.vlive==="V"&&o.SrvStatus!=="A"){var i=false;$.each(a,function(t,a){if(o.BuildingNo===a.PrNumber){o.Add="A";g={Group:"",Status:"C",DeleteInd:o.DeleteInd,Action:o.Add,ContractNo:e.ContractNo,BuildingNo:a.PrNumber,Zzone:"",Model:"",ModelDesc:o.BoqDesc,Boq:"",Amount:a.PriceUnit,Type:"PR"};$.each(n,function(e,t){if(o.BuildingNo===t.BuildingNo){i=true}});if(i===false){n.push(g)}}})}});$.each(o,function(e,t){if(o[e].Status==="C"){o[e].ChangeInd="X";$.each(n,function(e,o){o.OrderNo=t.OrderNo;t.OrderItemsSet.push(o)})}});e.getView().getModel("localJson").setProperty("/variationBuilding",n);e.getView().getModel("localJson").setProperty("/HeadToHeadVariation",o)},getModeandBoq:function(e,t){var o=this;var i=o.getView().getModel("localJson").getProperty("/variationBuilding");var a=this.getView().getModel("localJson");var r=e.substring(0,13),s=a.getProperty(r+"/Name"),n=a.getProperty(r+"/PriceUnit");var l=e.substring(0,26),d=a.getProperty(l+"/Name");$.each(o.myBuildingSet,function(e,a){if(d==a.Group&&s=="00000"+a.Model){if(i.length==0){o.myBuildingSet[e].Add=t;o.myBuildingSet[e].PriceUnit=n;i.push(o.myBuildingSet[e])}else{$.each(i,function(e,t){if("00000"+i[e].Model==s&&i[e].Group==d){i.splice(e,1)}});o.myBuildingSet[e].Add=t;o.myBuildingSet[e].PriceUnit=n;i.push(o.myBuildingSet[e])}}});return s,d},onDeleteService:function(e){var t=this;var o=e.getSource().getBindingContext("localJson").getPath();var i=this.getView();var a=i.getModel("i18n").getResourceBundle();var r=new sap.m.Dialog({title:a.getText("Delete"),type:"Message",content:new sap.m.Text({text:a.getText("Msg_srv_Delete")}),beginButton:new sap.m.Button({text:a.getText("Delete"),type:"Emphasized",press:function(){r.close();var e=t.getView().getModel("localJson");var i="D";var a=t.getView().getModel("localJson").getProperty(o);if(a.EanCat==="R"||"U"||"C"&&a.SrvStatus==="A"){sap.m.MessageToast.show("Can delete this service from App As Build")}else if(a.EanCat==="L"&&a.SrvStatus==="A"){}else if(a.SrvStatus==="UA"){var s=e.getProperty(o);s.DelInd=s.DelInd==="Y"?"":"Y";s.Add="D";e.setProperty(o,s);t.onChangeQty("",o,"0")}}}),endButton:new sap.m.Button({text:a.getText("Cancel"),press:function(){r.close()}}),afterClose:function(){r.destroy()}});r.open()},onDeleteBuilding:function(e){var t=this;var o=this.getView().byId("IdBuildingTable").getModel("localJson");var i=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var a=parseInt(i[2]);var r=o.getProperty("/myBuildingSet/"+a);var s=e.getSource().getBindingContext("localJson").getPath();var n=this.getView();var l=n.getModel("i18n").getResourceBundle();var d=new sap.m.Dialog({title:l.getText("Delete"),type:"Message",content:new sap.m.Text({text:l.getText("Msg_Confirm_Delete")}),beginButton:new sap.m.Button({text:l.getText("Delete"),type:"Emphasized",press:function(){var e=t.getView().getModel("localJson");var o=e.getProperty(s);if(r.SrvStatus==="UA"){o.DelInd="Y";o.ChangeIndicator="Y";d.close();r.Boq=r.Model.length===8?r.Model:"00000"+r.Model;t.deletesrv(r);t.deleteBOQliseConsolidate(r);e.setProperty(s,o)}}}),endButton:new sap.m.Button({text:l.getText("Cancel"),press:function(){d.close()}}),afterClose:function(){d.destroy()}});d.open()},onDeleteWBS:function(e){var t=this;var o=this.getView().byId("IdWBSTable").getModel("localJson");var i=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var a=parseInt(i[2]);var r=o.getProperty("/myWBSSet/"+a);var s=e.getSource().getBindingContext("localJson").getPath();var n=this.getView();var l=n.getModel("i18n").getResourceBundle();var d=new sap.m.Dialog({title:l.getText("Delete"),type:"Message",content:new sap.m.Text({text:l.getText("Msg_Confirm_Delete")}),beginButton:new sap.m.Button({text:l.getText("Delete"),type:"Emphasized",press:function(){var e=t.getView().getModel("localJson");var o=e.getProperty(s);if(r.SrvStatus==="UA"){o.DelInd="Y";o.ChangeIndicator="Y";d.close();r.Boq=r.Model.length===8?r.Model:"00000"+r.Model;t.deletesrv(r);t.deleteBOQliseConsolidate(r);e.setProperty(s,o)}else if(r.SrvStatus==="A"){sap.m.MessageToast.show("you should handel this service");o.DelInd=o.DelInd==="X"?"":"X";t.deletesrvA(r,s);d.close();e.setProperty(s,o)}}}),endButton:new sap.m.Button({text:l.getText("Cancel"),press:function(){d.close()}}),afterClose:function(){d.destroy()}});d.open()},onSave:function(){var e=this;var t=e.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet");var o=e.getView().getModel("localJson").getProperty("/BoqItemSet");var i=e.getView().getModel("localJson").getProperty("/AttachmentSet");var a=e.getView().getModel("localJson").getProperty("/EstimatedContracts");var r=e.getView().getModel("localJson").getProperty("/HeadToHeadVariation");var s=e.getView().getModel("localJso").getProperty("/variationOrderContract/Description");var n=e.getView().getModel("localJson").getProperty("/variationBuilding");var l=parseFloat(e.getView().getModel("localJson").getProperty("/AddendumValue"));var d=parseFloat(e.getView().getModel("localJson").getProperty("/VariationOrderValue"));var g=parseFloat(e.getView().getModel("localJson").getProperty("/OriginalContractValue"));var c=parseFloat(e.getView().getModel("localJson").getProperty("/VariationOrderPre"));var u=e.getView().getModel("localJson").getProperty("/myPurchaseRequisition"),p=e.getView().getModel("localJson").getProperty("/PRItemSet"),h=e.getView().getModel("localJson").getProperty("/ContractPONoteSet");var m=parseFloat(g)*.2;var S="";var f=[];var v=[];var y=[];var C=[];var P=[];var B=[];var V=this.getView();var w=V.getModel("i18n").getResourceBundle();var M=new sap.m.Dialog({title:w.getText("Edit"),type:"Message",content:new sap.m.Text({text:w.getText("Msg_Confirm_Save_Change")}),beginButton:new sap.m.Button({text:w.getText("SaveChange"),type:"Emphasized",press:function(){var s=parseFloat(g)*((parseFloat(c)+parseFloat(l))/100);if(s<d){sap.m.MessageToast.show(e.getView().getModel("i18n").getResourceBundle().getText("Total_of_variationorder_you_must_less_than",s));e.getView().setBusy(false);return}if(m<=d&&parseFloat(d)!=0){sap.m.MessageBox.warning(e.getView().getModel("i18n").getResourceBundle().getText("Total_variation_orders_exceeds_20_from_the_original"))}$.each(r,function(e,t){$.each(t.OrderItemsSet,function(e,o){o.Status=t.Status;n.push(o)})});$.each(r,function(t,i){if(e.PurchDoc!==""&&r[t].VarStatus!=="R"){C.push({OrderNo:r[t].OrderNo===""?"":r[t].OrderNo,UserOrder:r[t].UserOrder,OrderType:r[t].OrderType,OrderDesc:r[t].OrderDesc,Type:r[t].Type,OrderDate:r[t].OrderDate===""?null:e.formatDate(r[t].OrderDate)+"T00:00:00",MonthIndex:r[t].MonthIndex.toString(),AddValues:""+parseFloat(r[t].AddValues).toFixed(e.CustomCurrency)+""===""?"0.0":""+parseFloat(r[t].AddValues).toFixed(e.CustomCurrency)+"",OmissionValues:""+parseFloat(r[t].OmissionValues).toFixed(e.CustomCurrency)+""===""?"0.0":""+parseFloat(r[t].OmissionValues).toFixed(e.CustomCurrency)+"",ChangeAmount:""+parseFloat(r[t].ChangeAmount).toFixed(e.CustomCurrency)+""===""?"0.0":""+parseFloat(r[t].ChangeAmount).toFixed(e.CustomCurrency)+"",DaysNo:r[t].DaysNo.toString(),MonthNo:r[t].MonthNo.toString(),Action:r[t].Action,ContractNo:e.ContractNo,Status:r[t].Status,OrderItemsSet:f,ChangeInd:r[t].ChangeInd,Currency:e.getView().byId("idCurrency").getValue()});$.each(n,function(t,i){if(i.Status==="C"){$.each(o,function(t,a){$.each(o[t].Categories,function(t,o){if(i.Boq===o.Data&&(i.Model.length===8?i.Model:"00000"+i.Model)===(o.Model.length===8?o.Model:"00000"+o.Model)){f.push({Group:i.Group,OrderNo:i.OrderNo,OrderItem:i.OrderItem,DeleteInd:i.DeleteInd,Action:i.Action,ContractNo:e.ContractNo,BuildingNo:i.BuildingNo,Zzone:i.Zzone,Model:i.Model,ModelDesc:i.ModelDesc,Boq:i.Boq,Amount:parseFloat(o.PriceUnit).toFixed(2).toString()})}})})}})}});$.each(e.myBuildingSet,function(e,t){B.push(t)});$.each(e.myWBSSet,function(e,t){B.push(t)});$.each(u,function(e,t){t.Group="";t.Project="";t.Model="";B.push(t)});$.each(B,function(t,o){if(o.ChangeIndicator!==""||o.DelInd!==""){P.push({PoHeader:e.PoNumber,Buildingno:o.BuildingNo,Zone:o.Project,Model:o.Model,Submodel:o.Group,ContractualIndicator:o.ContractualIndicator===""?"O":o.ContractualIndicator,TextContInd:o.Txt,VariationOrder:o.OrderNo,ChangeIndicator:o.ChangeIndicator,DeleteIndicator:o.DelInd,SrvStatus:o.SrvStatus,Network:o.Network,Type:o.ModelType})}});if(u.length>0){$.each(p,function(t,o){$.each(o.Categories,function(t,i){$.each(i.Categories,function(t,a){v.push({PoHeader:e.PoNumber,PoItem:"",SubBoq:a.SubModel,DeleteInd:a.DelInd,Plant:"",MatlGroup:a.MatlGroup,Qty:parseFloat(a.Qty.toString()).toFixed(2),PoUnit:"",PriceUnit:a.PriceUnit.toString(),ItemCat:"",Acctasscat:"",Boq:a.Model,ShortText:a.ShortDesc,LongText:a.LongDesc,Serviceno:a.Data,Servicedesc:a.ShortDesc,BaseUom:a.Uom,WbsElement:"",NoLimit:"X",Buildingno:o.PrNumber,Project:"",OvfTol:a.OvfTol?a.OvfTol.toString():"0",ChangeIndicator:"",DeliveryDate:e.getView().byId("idDeliveryDate").getValue(),ContractualIndicator:"",SrvStatus:"UA",ServiceType:a.Eancat,Currency:e.getView().byId("idCurrency").getValue(),IuidRelevant:"P",PrItem:a.Item,Network:o.Network,ActivityNumber:i.ActivityNumber})})})})}if(P.length>0){$.each(o,function(t,i){$.each(i.Categories,function(a,r){$.each(r.Categories,function(r,s){$.each(s.Categories,function(r,n){v.push({PoHeader:e.PoNumber,Project:"",Boq:n.Model,SubBoq:o[t].Categories[a].Data,Flag:"U",DeleteInd:n.DelInd,Plant:"",Matdesc:s.ShortDesc,MatlGroup:n.Item,Qty:parseFloat(n.Qty.toString()).toFixed(2),PoUnit:"",ItemCat:"D",Acctasscat:"P",ShortText:n.ShortDesc,LongText:n.LongDesc,Serviceno:n.Data,Servicedesc:n.ShortDesc,NoLimit:"X",BaseUom:n.Uom,OvfTol:n.OvfTol?n.OvfTol.toString():"0",Buildingno:"",DeliveryDate:e.getView().byId("idDeliveryDate").getValue(),ChangeIndicator:"",ContractualIndicator:"",SrvStatus:"",ServiceType:n.Eancat,VariationOrder:"",Txt:"",Currency:e.getView().byId("idCurrency").getValue(),IuidRelevant:i.ModelType==="WBS"?"X":""})})})})})}$.each(v,function(o,i){$.each(t,function(t,a){if(i.Serviceno===a.Data){v[o].Plant=a.Plant;v[o].PriceUnit=parseFloat(a.PriceUnit).toFixed(e.CustomCurrency);v[o].OvfTol=a.OvfTol?a.OvfTol.toString():"0";v[o].ProvisionRate=a.ProvisionRate?a.ProvisionRate.toString():"0"}});$.each(e.POHeaderToPOSrv,function(e,t){if(i.Buildingno===t.Buildingno&&i.Txt===t.Txt&&i.MatlGroup===t.MatlGroup&&i.Serviceno===t.Serviceno&&i.SubBoq===t.SubBoq){v[o].SrvNo=t.SrvNo;v[o].PoItem=t.PoItem}})});$.each(y,function(o,i){$.each(e.POHeaderToPOSrv,function(e,t){if(i.Boq===t.Boq&&i.Txt===t.Txt&&i.MatlGroup===t.MatlGroup&&i.Serviceno===t.Serviceno&&i.SubBoq===t.SubBoq){y[o].SrvNo=t.SrvNo;y[o].PoItem=t.PoItem}});$.each(t,function(t,a){if(i.Serviceno===a.Data&&i.Txt===a.Txt){y[o].PriceUnit=parseFloat(a.PriceUnit).toFixed(e.CustomCurrency);y[o].Currency=e.getView().byId("idCurrency").getValue();y[o].ProvisionRate=a.ProvisionRate?a.ProvisionRate.toString():"0"}})});$.each(a,function(t,o){if(o.ChangeIndicator!==""||o.DelInd!==""){v.push({PoHeader:e.PoNumber,PoItem:o.PoItem===""?"":o.PoItem,SubBoq:"",DeleteInd:o.DelInd,Plant:"",MatlGroup:"",Amount:parseFloat(o.Amount).toFixed(e.CustomCurrency),PoUnit:"",Boq:"",ShortText:"",Serviceno:"",Servicedesc:o.Servicedesc,BaseUom:"",WbsElement:"",NoLimit:"",Buildingno:"",Project:"",ContractualIndicator:"E",ChangeIndicator:o.ChangeIndicator,ServiceType:"E",DeliveryDate:e.getView().byId("idDeliveryDate").getValue()})}});if(h.Flag!="X"){h={}}setTimeout(function(){var t={PoNumber:e.PoNumber,Flag:"U",DocType:e.getView().getModel("localJson").getProperty("/DocType"),Project:e.sProjectCode,Vendor:e.getView().getModel("localJson").getProperty("/Vendor"),PurchOrg:e.getView().getModel("localJson").getProperty("/PurchOrg"),PurGroup:e.getView().getModel("localJson").getProperty("/PurGroup"),CompCode:e.getView().getModel("localJson").getProperty("/CompCode"),DocDate:e.getView().getModel("localJson").getProperty("/DocDate")===""?null:e.getView().byId("idDocumentDate").getValue()+"T00:00:00",VperStart:e.getView().getModel("localJson").getProperty("/VperStart")===""?null:e.getView().byId("idValidFromDate").getValue()+"T00:00:00",VperEnd:e.getView().getModel("localJson").getProperty("/VperEnd")===""?null:e.getView().byId("idValidToDate").getValue()+"T00:00:00",Status:"",DeleteInd:"",ContractDesc:e.getView().byId("idContractDescription").getValue(),LongDesc:e.getView().byId("idLongDescription").getValue(),Currency:e.getView().byId("idCurrency").getValue(),MeasMethod:e.getView().byId("idMeasurementMethod").getSelectedKey(),ConstructionType:e.getView().byId("idConstructionType").getSelectedKey(),RefContract:e.getView().byId("idRefrenceContract").getValue(),CreationDate:e.getView().byId("idDocumentDate").getValue()===""?null:e.getView().byId("idDocumentDate").getValue()+"T00:00:00",ValidFrom:e.getView().byId("idValidFromDate").getValue()===""?null:e.getView().byId("idValidFromDate").getValue()+"T00:00:00",ValidTo:e.getView().byId("idValidToDate").getValue()===""?null:e.getView().byId("idValidToDate").getValue()+"T00:00:00",SigninDate:e.getView().byId("idDeliveryDate").getValue()===""?null:e.getView().byId("idDeliveryDate").getValue()+"T00:00:00",RevisedValidTo:e.getView().byId("idRevisedValidToDate").getValue()===""?null:e.getView().byId("idRevisedValidToDate").getValue()+"T00:00:00",IndexMonth:e.getView().byId("idIndexMonth").getSelectedKeys().join(),Consultant:e.sConsultant,ConsultantName:e.sConsultantName,Ss:e.getView().byId("idResponsiblepersonSS").getSelectedKey(),Ir:e.getView().byId("idResponsiblepersonIR").getSelectedKey(),SuperiorWbs:e.SupeiorWBSCode,CreationType:e.getView().byId("idCreationType").getSelectedKey(),MarkUp:e.getView().byId("idMarkUp").getValue(),VendorName:e.sVendorName,PurchDoc:e.PurchDoc,ContractType:e.getView().getModel("localJson").getProperty("/ContractType"),AttachmentSet:i,POHeaderToPOItem:v,POHeaderToPOBuildingNav:P,DocParNo:e.DocParNo,HeadToHeadVariationNav:C,EstimatedContractValue:parseFloat(e.getModel("localJson").getProperty("/EstimatedContractValue")).toFixed(e.CustomCurrency),OriginalContractValue:parseFloat(e.getModel("localJson").getProperty("/OriginalContractValue")).toFixed(e.CustomCurrency),TotalContractValue:parseFloat(e.getModel("localJson").getProperty("/TotalContractValue")).toFixed(e.CustomCurrency),VariationOrderValue:parseFloat(e.getModel("localJson").getProperty("/VariationOrderValue")).toFixed(e.CustomCurrency),AddendumValue:parseFloat(e.getModel("localJson").getProperty("/AddendumValue")).toFixed(e.CustomCurrency),RevisedContractValue:parseFloat(e.getModel("localJson").getProperty("/RevisedContractValue")).toFixed(e.CustomCurrency),SerType:e.SERTYPE,Overviewstatus:e.getModel("localJson").getProperty("/Overviewstatus"),ContractPONoteNav:h};var o=e.getView().getModel();console.log(t);e.getView().setBusy(true);o.create("/ContractPOHeaderSet",t,{success:function(t){sap.m.MessageBox.success("Contract "+t.PurchDoc+" Edited Successfully!",{title:"Success",onClose:function(t){e._onObjectMatched()}});e.getView().setBusy(false)},error:function(t){sap.m.MessageBox.error("Error in editing Contract",{title:"Error"});e.getView().setBusy(false)}})},2e3);M.close()}}),endButton:new sap.m.Button({text:w.getText("Cancel"),press:function(){M.close()}}),afterClose:function(){M.destroy()}});M.open()},onChangeQty:function(e,t,o,i){var a=this;var r=this.getView().getModel("localJson");if(e!==""){var s=e.getSource().getBindingContext("localJson").getPath();var n=e.getParameters().newValue}else{var s=t;var n=o}var l=a.getView().getModel("localJson").getProperty(s);if(l===null){l=i}var d=s.substring(0,13),g=r.getProperty(d+"/Name"),c=r.getProperty(d+"/PriceUnit"),u=r.getProperty(d+"/AddNew");if(u!=="AN"){l.ChangeIndicator="ChangeP"}if(e!==""){var p=e.getSource().getBindingContext("localJson").getPath();var h=this.getView().getModel("localJson");var m=h.getProperty(p);var S="A"}var f=JSON.parse(JSON.stringify(a.getView().getModel("localJson").getProperty("/BoqItemSet")));var v=JSON.parse(JSON.stringify(a.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var y=JSON.parse(JSON.stringify(a.getView().getModel("localJson").getProperty("/myBuildingSet")));var C=JSON.parse(JSON.stringify(a.getView().getModel("localJson").getProperty("/myWBSSet")));var P=0;var B=0;if(l.ModelType==="BOQ"){$.each(y,function(e,t){if(t.Model===l.Boq)++P})}else{$.each(C,function(e,t){if(t.Model===l.Boq)++P})}$.each(f,function(e,t){$.each(t.Categories,function(e,t){$.each(t.Categories,function(e,t){$.each(t.Categories,function(e,t){if(l.Serviceno===t.Serviceno&&l.Txt===t.Txt){B=(parseFloat(B)+parseFloat(t.Qty)).toString()}})})})});$.each(v,function(e,t){if(t.Serviceno===l.Serviceno&&t.Txt===l.Txt){v[e].Qty=B}});a.getView().getModel("localJson").setProperty(s+"/Qty",n===""?"0":JSON.parse(JSON.stringify(n)));a.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSet",JSON.parse(JSON.stringify(v.sort((e,t)=>e.Data-t.Data))));a.onPriceConsolidatedChange("",l,JSON.parse(JSON.stringify(n)))},DataExport:function(e){var t=this,o=[];var i=t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet");$.each(i,function(e,t){if(t.AsBuild2!=="X"&&t.AsBuild!=="X"){o.push({PoHeader:t.PoHeader,ContractualIndicator:t.Txt,Services:t.Data,Servicedesc:t.LongDesc,Uom:t.Uom,Qty:t.Qty,PurchDoc:t.PurchDoc,PriceUnit:t.PriceUnit,sortNum:t.sortNum})}});JSON.parse(JSON.stringify(o.sort((e,t)=>e.Services-t.Services)));o.sort((e,t)=>e.sortNum-t.sortNum);t.getView().getModel("localJson").setProperty("/BoqConsulidatedItemSetex",o);var a,r,n,l;var d,o=[],a=t.createColumnConfig();r=t.getModel("localJson").getProperty("/BoqConsulidatedItemSetex");n={workbook:{columns:a},dataSource:r};l=new s(n);l.build().then(function(){}).finally(l.destroy)},createColumnConfig:function(){var e=this.getView().getModel("i18n").getResourceBundle();return[{label:"PoHeader",property:"PoHeader",width:"20"},{label:"ContractualIndicator",property:"ContractualIndicator",width:"20"},{label:"Services",property:"Services",width:"25"},{label:"Servicedesc",property:"Servicedesc",width:"30"},{label:"Uom",property:"Uom",width:"20"},{label:"Qty",property:"Qty",width:"23"},{label:"PriceUnit",property:"PriceUnit",width:"23"}]},exportExcel:function(e,t,o,i){var a=this;var r=[];var s="/";var n=false;var l=false;var d=e.getData();for(var g in d){if(g==t){s=s+g;var c=d[g];for(var g in c){var u=c[g];for(var g in u){var p=u[g];var h={name:g,template:{content:"{"+g+"}"}};if(typeof i==="undefined"){if(g!="__metadata")r.push(h)}else{if(i.includes(g)){r.push(h)}}}if(typeof i!=="undefined"){r.sort(function(e,t){return i.indexOf(e.name)-i.indexOf(t.name)})}break}}}$.each(d[t],function(e,o){for(var i in o){if(o.hasOwnProperty(i)){if(!isNaN(d[t][e][i])&&i!="Services"){if(i!="Accumulative")d[t][e][i]=a.ceilNumberWithCommas(d[t][e][i]);else d[t][e][i]=a.NumberWithCommas(d[t][e][i])}}}});var m=new sap.ui.model.json.JSONModel(d);var S=new sap.ui.core.util.Export({exportType:new sap.ui.core.util.ExportTypeCSV({separatorChar:","}),models:m,rows:{path:s},columns:r});if(o!=""){S.saveFile(o).always(function(){this.destroy()})}},ceilNumberWithCommas:function(e){var t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return t.join(".")},NumberWithCommas:function(e){var t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return t.join(".")},_handleValueHelpCloseWBS:function(e){var t=this,o=t.getView().getModel(),i=[],a=[];var r=new sap.ui.model.json.JSONModel;var s=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/selectedBuilding")));var n=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var l="0.00";if(t.aContexts.length===0)sap.m.MessageToast.show("Select one WBS at least!");else{var d=false;$.each(t.myWBSSet,function(e,t){if(t.Group===""){d=true}});if(d)sap.m.MessageToast.show("Select Boq for each WBS!");else{$.each(s,function(e,o){t.BUBoQs.push(o.Model+o.Group)});t.BUBoQs.sort();var g=t.getView().getModel("localJson").getProperty("/selectedBuildingOrWBS"),c=t.getModel("localJson").getProperty("/HeadToHeadVariation");$.each(g,function(e,t){var o=new sap.ui.model.Filter("Data",sap.ui.model.FilterOperator.BT,t.Model,t.Group);if(o!==""){i.push(o)}});var u=new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,t.sProjectCode);if(u!==""){i.push(u)}var p=new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,t.sCoCode);if(p!==""){i.push(p)}var h=new sap.ui.model.Filter("Eancat",sap.ui.model.FilterOperator.EQ,"W");if(h!==""){i.push(h)}this.objSet=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));t.getView().getModel("localJson").setProperty("/selectedBuildingOrWBS",[]);var m=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));var S=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));o.read("/BoqTreeSet",{filters:i,success:function(e,o){e=e.results;var i=1,a=[],r="O",s="",n="UA",d="";$.each(e,function(t,o){$.each(c,function(e,t){if(c[e].Status==="C"){r=c[e].OrderType;s=c[e].OrderNo;d=c[e].UserOrder}});if(r==="O"){var i="Original"}else{var i=r+"-"+d}if(e[t].LevelNo==="1"){e[t].AddNew="AN";e[t].live="one"}if(e[t].Eancat===""&&parseInt(e[t].LevelNo)===4){e[t].Qty="0";e[t].Uom="";e[t].Price="0"}e[t].ModelType="WBS";if(e[t].Eancat==="U"){e[t].Qty=0}if(parseInt(e[t].LevelNo)===4){e[t].Txt=i;e[t].SrvStatus=n;if(e[t].Eancat!=""){e[t].PriceUnit="1";e[t].Price="1"}e[t].DelInd="";e[t].VariationOrder=s;e[t].ChangeIndicator="addB";e[t].ContractualIndicator=r;e[t].Indicator="Y";l=parseFloat(l)+parseFloat(e[t].Qty)*parseFloat(e[t].Price)}else{e[t].Indicator="Z"}});t.getView().getModel("localJson").setProperty("/myWBSSet",JSON.parse(JSON.stringify(t.myWBSSet)));for(i;i<e.length+1;i++){a.push({[i]:[]});for(var g=0;g<e.length;g++){e[g].Categories=[];if(parseInt(e[g].LevelNo)===i){a[i-1][i].push(e[g])}}}var u=[];$.each(a,function(e,t){if(e<3){$.each(t,function(t,o){if(o.length!==0){$.each(o,function(t,o){$.each(a[e+1],function(e,t){$.each(t,function(e,t){if(t.length!==0){if(o.LevelId===t.Parent){o.Categories.push(t)}}})})})}})}});$.each(a[0],function(e,t){if(t.length!==0){$.each(t,function(e,t){u.push(t)})}});var p=false;var h=false;$.each(u,function(e,o){p=false;if(t.objSet.length!==0){$.each(t.objSet,function(i,a){$.each(o.Categories,function(r,s){$.each(a.Categories,function(e,t){if(o.Data===a.Data){p=true;if(s.Data===t.Data){h=true}}});if(p&&!h){if(s.Model===a.Model){t.objSet[i].Categories.push(u[e].Categories[r]);h=false}}})});if(!p&&!h){t.objSet.push(o);p=false}}else{t.objSet.push(o)}h=false;p=false});t.getView().getModel("localJson").setProperty("/BoqItemSet",t.objSet);t.Consoliatedservices();t.ContractValueHeader();t.getView().setBusy(false);var a=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));var m=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(a,function(e,t){$.each(t.Categories,function(t,o){$.each(o.Categories,function(o,i){$.each(i.Categories,function(i,r){a[e].PriceUnit="0";a[e].Categories[t].PriceUnit="0";a[e].Categories[t].Categories[o].PriceUnit="0";a[e].Categories[t].Categories[o].Categories[i].Matdesc=a[e].Categories[t].Categories[o].ShortDesc})})})});$.each(m,function(e,o){$.each(a,function(e,i){$.each(i.Categories,function(i,r){$.each(r.Categories,function(r,s){$.each(s.Categories,function(s,n){if(o.Data===n.Data&&o.Txt===n.Txt){var l=false;$.each(t.myBuildingSet,function(e,t){if((t.Model.length===8?t.Model:"00000"+t.Model)===n.Model){l=true}});$.each(t.myWBSSet,function(e,t){if(t.Model===n.Model){l=true}});if(l){var d=JSON.parse(JSON.stringify(parseFloat(o.PriceUnit).toFixed(t.CustomCurrency)));a[e].Categories[i].Categories[r].Categories[s].price=d;a[e].Categories[i].Categories[r].Categories[s].PriceUnit=(d*parseFloat(a[e].Categories[i].Categories[r].Categories[s].Qty)).toString();if(n.Eancat!=="C"&&n.Eancat!=="U"){a[e].PriceUnit=(parseFloat(a[e].PriceUnit)+o.PriceUnit*parseFloat(a[e].Categories[i].Categories[r].Categories[s].Qty)).toString()}if(n.Eancat!=="C"&&n.Eancat!=="U"){a[e].Categories[i].PriceUnit=(parseFloat(a[e].Categories[i].PriceUnit)+o.PriceUnit*parseFloat(a[e].Categories[i].Categories[r].Categories[s].Qty)).toString()}if(n.Eancat!=="C"&&n.Eancat!=="U"){a[e].Categories[i].Categories[r].PriceUnit=(parseFloat(a[e].Categories[i].Categories[r].PriceUnit)+o.PriceUnit*parseFloat(a[e].Categories[i].Categories[r].Categories[s].Qty)).toString()}}}})})})})});t.getView().getModel("localJson").setProperty("/BoqItemSet",JSON.parse(JSON.stringify(a)));t.addBuildingForvariation()},error:function(e){sap.m.MessageToast.show("Error")}})}}},_oMessagePopover:null,onPressMessagePopover:function(e){if(!this._oMessagePopover){this._oMessagePopover=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.MessagePopover",this);this.getView().addDependent(this._oMessagePopover)}this._oMessagePopover.toggle(e.getSource())},onWBSSelectionChange:function(e){var t=this;var o=e.getSource();var i=true,a=[],r=[];t.BUBoQs=[];t.WBSBoQs=[];t.aContexts=[];var s=t.getView().getModel("localJson").getProperty("/variationBuilding"),n=t.getView().getModel("localJson").getProperty("/selectedBuildingOrWBS"),l=this._contractDialog.getTable().getSelectedIndices();var d=t.getView().getModel("localJson").getProperty("/selectedBuilding");var g=t.getModel("localJson").getProperty("/HeadToHeadVariation");t.myWBSSet=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myWBSSet")));if(l.length>0){for(var c=0;c<l.length;c++){var u=this._contractDialog.getTable().getContextByIndex(l[c]).getObject();u.ChangeIndicator="AddB";a.push(u)}$.each(a,function(e,t){if(t.Group===""){r.push(t.IdNumber);i=false}});$.each(t.myWBSSet,function(e,t){$.each(a,function(e,o){if(o.IdNumber===t.Boq&&t.Model===o.Model&&t.Group===o.Group){r.push(t.Boq);i=false}})});if(i){$.each(a,function(e,o){a[e].ContractualIndicator="O";a[e].Txt="Original";a[e].BuildingNo=parseInt(a[e].IdNumber).toString();$.each(g,function(t,o){if(g[t].Status==="C"){a[e].ContractualIndicator=g[t].OrderType;a[e].SrvStatus="UA";a[e].vlive="V";a[e].ModelType="WB";a[e].Txt=g[t].OrderType+"-"+g[t].UserOrder}});a[e].SrvStatus="UA";a[e].DelInd="";a[e].WbsCode=a[e].SelectionParameter;a[e].DelInd="";a[e].AsBuild2="";a[e].SubBoq=a[e].Group;a[e].BuildingNo=parseInt(a[e].IdNumber).toString();t.myWBSSet.push(a[e]);n.push(a[e]);d.push(a[e])});t.aContexts.push(a);t.getView().getModel("localJson").setProperty("/selectedBuildingOrWBS",n);t.getView().getModel("localJson").setProperty("/selectedBuilding",d);this.onWBSContractClose();this._handleValueHelpCloseWBS()}else if(!i){var p=r.join();sap.m.MessageToast.show("WBS and  Boq is already added or don't select Boq"+p)}}else{}},onSelectionChange:function(e){var t=this;var o=e.getSource();var i=true,a=[],r=[];t.BUBoQs=[];t.WBSBoQs=[];var s=t.getView().getModel("localJson").getProperty("/variationBuilding");var n=this.getView().getModel("localJson").getProperty("/BuildingSet");var l=t.getView().getModel("localJson").getProperty("/selectedBuilding"),d=this._BuildinDialog.getTable().getSelectedIndices(),g=t.getView().getModel("localJson").getProperty("/selectedBuildingOrWBS");var c=t.getModel("localJson").getProperty("/HeadToHeadVariation");t.myBuildingSet=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/myBuildingSet")));if(d.length>0){for(var u=0;u<d.length;u++){var p=this._BuildinDialog.getTable().getContextByIndex(d[u]).getObject();p.ChangeIndicator="AddB";a.push(p)}$.each(a,function(e,t){if(t.Group===""){r.push(t.BuildingNo);i=false}});$.each(t.myBuildingSet,function(e,t){$.each(a,function(e,o){if(o.BuildingNo===t.BuildingNo&&t.Model===o.Model&&t.Group===o.Group){r.push(t.BuildingNo);i=false}})});if(i){$.each(a,function(e,o){a[e].ContractualIndicator="O";a[e].Txt="Original";$.each(c,function(t,o){if(c[t].Status==="C"){a[e].ContractualIndicator=c[t].OrderType;a[e].SrvStatus="UA";a[e].AsBuild2="";a[e].OrderNo=c[t].OrderNo;a[e].Txt=c[t].OrderType+"-"+c[t].UserOrder;a[e].vlive="V"}});a[e].SubBoq=a[e].Group;a[e].SrvStatus="UA";t.myBuildingSet.push(a[e]);a[e].AsBuild2="";a[e].DelInd="";l.push(a[e]);g.push(a[e])});t.getView().getModel("localJson").setProperty("/selectedBuilding",l);t.getView().getModel("localJson").setProperty("/selectedBuildingOrWBS",g);t.aContexts.push(l);this.onBuildingContractClose();this._handleValueHelpCloseBuilding()}else if(!i){var h=r.join();sap.m.MessageToast.show("Model and  Boq is already added or don't select Boq"+h);r=[]}}},onAddPress:function(){var e=this;if(!e._selectSDialog){e._selectSDialog=sap.ui.xmlfragment(e.getView().getId(),"com.cicre.po.view.fragments.AddService",e);e.getView().addDependent(e._selectSDialog)}jQuery.sap.delayedCall(0,this,function(){e.getView().byId("idSelectBoq").setValue("");e.getView().byId("idSelectService").setValue("");e.getView().byId("idSelectSub").setSelectedKey("");e.getView().byId("idInputQty").setValue("");e.getView().byId("idInputMatGrp").setValue("");e.getView().byId("idInputMatGrpDesc").setValue("");e._selectSDialog.open()})},addServiceBoqSelectionChange:function(e){var t=this;var o=new sap.ui.model.Filter("Boq",sap.ui.model.FilterOperator.EQ,t.getView().byId("idSelectBoq").getValue());var i=t.getView().byId("idSelectSub").getBinding("items");i.filter([o])},onDisplaySearchServiceDialog:function(){var e=this;if(e._selectDialog){e._selectDialog.destroy();e._selectDialog=null}if(!e._selectDialog){e._selectDialog=sap.ui.xmlfragment(e.getView().getId(),"com.cicre.po.view.fragments.ServiceSearchDialog",e);e.getView().addDependent(e._selectDialog)}jQuery.sap.delayedCall(0,this,function(){e._selectDialog.open()});var t=new sap.m.StandardListItem({title:"{IdText}",description:"{= parseFloat(${IdNumber})}"});var o=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SRV");o.push(i);e._selectDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:o})},onSelectServiceList:function(e){var t=this;var o=t.getView().getModel();var i=e.getParameter("selectedContexts");var a=t.getView().getModel("localJson").getProperty("/BoqItemSet");if(i&&i.length){i.map(function(e){t.sServiceCode=parseFloat(e.getObject().IdNumber);t.sServiceText=e.getObject().IdText;t.getView().byId("idSelectService").setValue(t.sServiceText)});o.callFunction("/BOQGetMatServiceAction",{method:"GET",urlParameters:{Serviceno:t.sServiceCode},success:function(e){t.matchingMaterial=e.Item;t.UnitMeas=e.UnitMeas;t.Matdesc=e.Matdesc;if(t.matchingMaterial===""){t.getView().byId("idInputMatGrp").setEnabled(true);t.getView().byId("idInputMatGrpDesc").setEnabled(true)}else{t.getView().byId("idInputMatGrp").setEnabled(false);t.getView().byId("idInputMatGrpDesc").setEnabled(false);t.getView().byId("idInputMatGrp").setValue(t.matchingMaterial);t.getView().byId("idInputMatGrpDesc").setValue(t.Matdesc)}},error:function(e){}})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},handleSearchService:function(e){var t=e.getParameter("value");var o=new sap.m.StandardListItem({title:"{IdText}",description:"{= parseFloat(${IdNumber})}"});var i=[];var a=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SRV");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);i.push(a);i.push(r);this._selectDialog.bindAggregation("items",{path:"/ValueHelpSet",template:o,filters:i})},onSaveService:function(e){var t=this;var o=[t.getView().byId("idSelectBoq"),t.getView().byId("idSelectSub"),t.getView().byId("idSelectService"),t.getView().byId("idInputQty"),t.getView().byId("idInputMatGrp"),t.getView().byId("idInputMatGrpDesc")];var i=true;jQuery.each(o,function(e,t){t.setValueState("None")});jQuery.each(o,function(e,t){if(!t.getValue()){t.setValueState("Error")}});jQuery.each(o,function(e,t){if("Error"===t.getValueState()){i=false;return}});if(!i){sap.m.MessageToast.show("Please Enter Manadatory Fields");return}else{var a={Name:t.getView().byId("idInputMatGrpDesc").getValue(),Item:t.getView().byId("idInputMatGrp").getValue(),Matdesc:t.getView().byId("idInputMatGrpDesc").getValue(),ModelType:t.getView().byId("idSelectBoq").getSelectedKey(),ChangeIndicator:"AddB",PriceUnit:"0",Categories:{DelInd:"",Boq:t.getView().byId("idSelectBoq").getValue(),LongText:"",Servicedesc:t.sServiceText,Matdesc:t.getView().byId("idInputMatGrpDesc").getValue(),Name:t.sServiceCode.toString(),PriceUnit:(1*parseFloat(t.getView().byId("idInputQty").getValue())).toString(),Serviceno:t.sServiceCode.toString(),Flag:"",UnitMeas:"",Qty:t.getView().byId("idInputQty").getValue(),ModelType:t.getView().byId("idSelectBoq").getSelectedKey(),ChangeIndicator:"AddS",Item:t.getView().byId("idInputMatGrp").getValue(),SrvNo:""}};var r=t.getView().getModel("localJson").getProperty("/BoqItemSet");var s="";var n="";var l="";var d=false;jQuery.each(r,function(e,o){if(o.Name===t.getView().byId("idSelectBoq").getValue()){s=e;jQuery.each(o.Categories,function(o,i){if(i.Name===t.getView().byId("idSelectSub").getSelectedKey()){n=o;$.each(r[e].Categories[o].Categories,function(t,i){if(i.Item===a.Item){l=t;$.each(r[e].Categories[o].Categories[t].Categories,function(e,t){if(t.Serviceno===a.Serviceno){d=true}})}})}})}});if(d)sap.m.MessageToast.show("Duplicate Service for This Boq");else{if(l===""){r[s].Categories[n].Categories.push(a);t.getView().getModel("localJson").setProperty("/BoqItemSet",r)}else{r[s].Categories[n].Categories[l].Categories.push(a.Categories);t.getView().getModel("localJson").setProperty("/BoqItemSet",r)}var g=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(g,function(e,t){if(t.Serviceno===a.Serviceno){d=true}});t._selectSDialog.close()}}},onCancelService:function(e){this._selectSDialog.close()},changeCreationType:function(){if(this.getView().byId("idCreationType").getSelectedKey()==="E"&&this.getView().getModel("localJson").getProperty("/Status")==="COMPOSING")this.getView().getModel("localJson").setProperty("/estimatedMode",true);else if(this.getView().byId("idCreationType").getSelectedKey()==="O"&&this.getView().getModel("localJson").getProperty("/Status")!=="COMPOSING")this.getView().getModel("localJson").setProperty("/estimatedMode",false);else if(this.getView().byId("idCreationType").getSelectedKey()==="O"&&this.getView().getModel("localJson").getProperty("/Status")==="COMPOSING"&&this.getView().getModel("localJson").getProperty("/EstimatedContracts").length===0)this.getView().getModel("localJson").setProperty("/estimatedMode",false);else if(this.getView().byId("idCreationType").getSelectedKey()==="O"&&this.getView().getModel("localJson").getProperty("/Status")==="COMPOSING"&&this.getView().getModel("localJson").getProperty("/EstimatedContracts").length!==0){sap.m.MessageBox.error("Estimated partition data must be deleted first!",{title:"Error"});this.getView().byId("idCreationType").setSelectedKey("E")}},handleAddEstimatedContract:function(){var e=this;var t=e.getModel("localJson").getProperty("/EstimatedContracts");var o={Servicedesc:"",Amount:"",DelInd:"",ChangeIndicator:"AddE",SrvStatus:"UA"};t.push(o);e.getModel("localJson").setProperty("/EstimatedContracts",t)},deleteEstimatedContract:function(e){var t=this;var o=[];var i=t.getModel("localJson").getProperty("/EstimatedContracts");var a=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var r=a[2];var s=i.index;i[r].DelInd="X";o.push(new sap.ui.model.Filter("DelInd",sap.ui.model.FilterOperator.NE,"X"));t.getModel("localJson").setProperty("/EstimatedContracts",i);this.byId("idEstimatedServicesTable").getBinding("rows").filter(o);t.getModel("localJson").refresh(true);this.ContractValueHeader()},onDisplaySearGroupfilterr:function(e){if(this._GroupDialogg){this._GroupDialogg.destroy();this._GroupDialogg=null}if(!this._GroupDialogg){this._GroupDialogg=sap.ui.xmlfragment("com.cicre.po.view.fragments.groupSearchDialogfilter",this);this.getView().addDependent(this._GroupDialogg)}var t=new sap.ui.model.json.JSONModel;t.setData({SupeiorWBSSet:[]});that._SuperiorWBSDialog.setModel(t,"localJson");var o=new sap.m.StandardListItem({title:"{localJson>Zzgroup}",description:"{localJson>Zzgroup}",type:"Active"});this._GroupDialogg.bindAggregation("items",{path:"localJson>/myBuildingSet",template:o,templateShareable:false});this._GroupDialogg.open()},onserviceTypeValueHelpPress:function(){if(!this._oDocTypeDialog){this._oDocTypeDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ServiceTypeSearchDialog",this);this._oDocTypeDialog.setModel(this.getView().getModel())}this._oDocTypeDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"MSERTYPE");t.push(o);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchServicetype:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"MSERTYPE");var i=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];r.push(o);r.push(i);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:r})},onSelectServicetypeList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.SERTYPE=e.getObject().IdNumber;t.SERTYPEText=e.getObject().IdText;t.getView().byId("idserviceType").setValue(e.getObject().IdText)})}else{t.SERTYPE="";t.SERTYPEText="";t.getView().byId("idserviceType").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchDocTypeDialog:function(){if(!this._oDocTypeDialog){this._oDocTypeDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.DocumentSearchDialog",this);this._oDocTypeDialog.setModel(this.getView().getModel())}this._oDocTypeDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"DocType");t.push(o);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchDocument:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"DocType");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];r.push(o);r.push(i);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:r})},onSelectDocumentList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){t.sDocType=e.getObject().IdNumber;t.sDocTypeText=e.getObject().IdText;t.getView().byId("idDocType").setValue(e.getObject().IdText)})}else{t.sDocType="";t.sDocTypeText="";t.getView().byId("idDocType").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchVendorDialog:function(e){this.vendorInd=e.getParameters().id;if(this._oVendorDialog){this._oVendorDialog.destroy();this._oVendorDialog=null}if(!this._oVendorDialog){this._oVendorDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.VendorSearchDialog",this);this._oVendorDialog.setModel(this.getView().getModel())}this._oVendorDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Vendor");var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.vendorInd==="idSearchByVendor"?this.sSearchCoText:this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.vendorInd==="idSearchByVendor"?this.sSearchPOrg:this.sPOrg);o.push(i);o.push(a);o.push(r);this._oVendorDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:o})},handleSearchVendor:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Vendor");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sPOrg);var s=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var n=[];n.push(o);n.push(i);n.push(a);n.push(r);this._oVendorDialog.bindAggregation("items",{path:"/ValueHelpSet",template:s,filters:n})},onSelectVendorList:function(e){var t=this;var o=t.getView().getModel();var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sVendor=e.getObject().IdNumber;t.sVendorName=e.getObject().IdText;t.getView().byId("idVendor").setValue(e.getObject().IdText);o.callFunction("/GetCurrencyExecuteAction",{method:"GET",urlParameters:{Vendor:t.sVendor},success:function(e){console.log(e);t.getView().byId("idCurrency").setValue(e.Currency);if(e.Currency==="USD"){t.CustomCurrency=2}else{t.CustomCurrency=2}t.getView().getModel("localJson").setProperty("/Currency",e.Currency)},error:function(e){}})})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([]);t.consultantIndecator="";t.vendorInd=""},changeContractType:function(){var e=this;if(e.getView().byId("idMeasurementMethod").getSelectedKey()==="LUMP"||e.getView().byId("idMeasurementMethod").getSelectedKey()==="COST")e.getView().byId("idTolerance").setVisible(false);else e.getView().byId("idTolerance").setVisible(true);if(e.getView().byId("idMeasurementMethod").getSelectedKey()==="COST")e.getView().byId("idMarkUp").setVisible(true);else e.getView().byId("idMarkUp").setVisible(false)},_handleCancelPressContract:function(){var e=this;e._oRefContractDialog.close()},_handleValueHelpCloseContract:function(){var e=this;var t=e.selectedRefContracts.join();e.getView().byId("idRefrenceContract").setValue(t);e._oRefContractDialog.close()},onAfterClose:function(){if(this._oRefContractDialog){this._oRefContractDialog.destroy();this._oRefContractDialog=null}},onRefContSelectionChange:function(e){var t=this;var o=e.getSource();var i=true;t.selectedRefContracts=t.getView().getModel("localJson").getProperty("/selectedRefContracts");if(e.getParameters().selected===true){var a=e.getParameter("listItem").getBindingContext("poModel").getObject();$.each(t.selectedRefContracts,function(e,t){if(t===a.PurchDoc)i=false});if(i){t.selectedRefContracts.push(a.PurchDoc);t.getView().getModel("localJson").setProperty("/selectedRefContracts",t.selectedRefContracts);t.aContexts=o.getSelectedContexts(true)}else if(!i){var r=e.getSource();var s=r.getSelectedItem();s.setSelected(false);var n=e.getParameter("listItem").getBindingContextPath();var l=n.slice(n.lastIndexOf("/")+1);t.aContexts.splice(l,1);sap.m.MessageToast.show("Contract is already added!")}}else{var n=e.getParameter("listItem").getBindingContextPath();var l=n.slice(n.lastIndexOf("/")+1);t.selectedRefContracts.splice(l,1);t.aContexts.splice(l,1);t.getView().getModel("localJson").setProperty("/selectedRefContracts",t.selectedRefContracts)}},onDisplaySearchCompDialog:function(e){this.compInd=e.getParameters().id;if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.CompanySearchDialog",this);this._oDialog.setModel(this.getView().getModel())}this._oDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"CompCode");o.push(i);this._oDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:o})},handleSearchComp:function(e){var t=e.getParameter("value");var o=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var i=[];var a=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"CompCode");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);i.push(a);i.push(r);this._oDialog.bindAggregation("items",{path:"/ValueHelpSet",template:o,filters:i})},onSelectCompanyList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){if(t.compInd==="idSearchByCompany"){t.sSearchCoCode=e.getObject().IdNumber;sap.ui.getCore().byId("idSearchByCompany").setValue(e.getObject().IdText)}else{t.sCoCode=e.getObject().IdNumber;t.sCoText=e.getObject().IdText;t.getView().byId("idCompanyCode").setValue(e.getObject().IdText);t.getView().getModel("localJson").setProperty("/CompDesc",t.sCoText)}})}else{t.sCoCode="";t.sCoText="";t.getView().getModel("localJson").setProperty("/CompDesc",t.sCoText);sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([]);this.compInd=""},onSearchCompanyChange:function(){this.sCoCode="";this.sCoText="";this.getView().getModel("localJson").setProperty("/CompDesc",this.sCoText)},onDisplaySearchPOrgDialog:function(e){this.pOrgInd=e.getParameters().id;if(!this._oPOrgDialog){this._oPOrgDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.PurchaseOrgSearchDialog",this);this._oPOrgDialog.setModel(this.getView().getModel())}this._oPOrgDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PORG");var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.pOrgInd==="idSearchPurchaseOrganization"?this.sSearchCoCode:this.sCoCode);o.push(i);o.push(a);this._oPOrgDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:o})},handleSearchPOrg:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PORG");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sCoCode);var r=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var s=[];s.push(o);s.push(i);s.push(a);this._oPOrgDialog.bindAggregation("items",{path:"/ValueHelpSet",template:r,filters:s})},onSelectPOrgList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){if(t.pOrgInd==="idSearchPurchaseOrganization"){t.sSearchPOrg=e.getObject().IdNumber;sap.ui.getCore().byId("idSearchPurchaseOrganization").setValue(e.getObject().IdText)}else{t.sPOrg=e.getObject().IdNumber;t.getView().byId("idPurchaseOrganization").setValue(e.getObject().IdText)}})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([]);t.sSearchPOrg=""},onDisplaySearchPGrpDialog:function(e){this.pGrpInd=e.getParameters().id;if(!this._oPGrpDialog){this._oPGrpDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.PurchaseGrpSearchDialog",this);this._oPGrpDialog.setModel(this.getView().getModel())}this._oPGrpDialog.open();var t=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PGRP");o.push(i);this._oPGrpDialog.bindAggregation("items",{path:"/ValueHelpSet",template:t,filters:o})},handleSearchPGrp:function(e){var t=e.getParameter("value");var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PGRP");var i=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];r.push(o);r.push(i);this._oPGrpDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:r})},onSelectPGrpList:function(e){var t=this;var o=e.getParameter("selectedContexts");if(o&&o.length){o.map(function(e){if(t.pGrpInd==="idSearchPurchaseGroup"){t.sSearchPGrp=e.getObject().IdNumber;sap.ui.getCore().byId("idSearchPurchaseGroup").setValue(e.getObject().IdText)}else{t.sPGrp=e.getObject().IdNumber;t.getView().byId("idPurchaseGroup").setValue(e.getObject().IdText)}})}else{sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([]);t.pGrpInd=""},AddValueVariation:function(e){var t=this;var o;var i=t.getModel("localJson").getProperty("/HeadToHeadVariation");$.each(i,function(e,t){if(i[e].Status==="C"){o=e}});var a=0;var r=i[o];$.each(e,function(t,o){a=parseFloat(a)+parseFloat(e[t].PriceUnit)});if(t.addVAOld===""){t.addVAOld=a}if(parseFloat(a)===parseFloat(t.addVAOld)){t.addVAOld=a;var s=parseFloat(a)-parseFloat(t.addVAOld);r.ChangeInd="X"}else if(parseFloat(a)>parseFloat(t.addVAOld)){var s=parseFloat(a)-parseFloat(t.addVAOld);r.ChangeAmount=parseFloat(r.ChangeAmount)+parseFloat(s);r.ChangeInd="X";t.addVAOld=a}else{var n=parseFloat(t.addVAOld)-parseFloat(a);var s=parseFloat(a)-parseFloat(t.addVAOld);t.addVAOld=a;r.OmissionValues=parseFloat(r.OmissionValues)+parseFloat(n);r.ChangeInd="X"}t.getModel("localJson").setProperty("/HeadToHeadVariation"+o,r)},handlevariationOrder:function(){var e=this;var t=parseFloat(e.getModel("localJson").getProperty("/VariationOrderPre"));var o=e.getModel("localJso").getProperty("/variationOrderContract");if(t===0){sap.m.MessageToast.show(e.getView().getModel("i18n").getResourceBundle().getText("Please_add_the_original_percentage_from_contract_terms_applaction"))}else{if(o.length>=1){e.getView().getModel("localJson").setProperty("/VariationMode",false)}else{var i=0;var a=e.getView().getModel("localJson").getProperty("/BoqItemSet");$.each(a,function(e,t){i=parseFloat(i)+parseFloat(a[e].PriceUnit)});var r=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var s={UserOrder:"",OrderDesc:"",Type:"",OrderDate:r.format(new Date),MonthIndex:"",AddValues:"0.00",OmissionValues:"0.00",ChangeAmount:"0.00",DaysNo:"",MonthNo:"",Action:"",Status:"C",OrderType:"V",OrderNo:"",VarStatus:""};var n=e.getModel("localJson").getProperty("/HeadToHeadVariation");e.getView().getModel("localJso").setProperty("/VariationMode",false);n.push(s);e.getModel("localJson").setProperty("/HeadToHeadVariation",n)}}},onReleaseVeriation:function(e){var t=this.getView().byId("VariationOrderTable").getModel("localJson");var o=e.getSource().getBindingContext("localJson").getPath();var i=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var a=this.getView().getModel("localJson");var r=a.getProperty(o);r.Txt=r.OrderType+"-"+r.UserOrder;r.Action="R";r.Status="R";a.setProperty(o,r)},loaddatevariation:function(e){var t=this;var o=this.getView().byId("VariationOrderTable").getModel("localJson");var i=e.getSource().getBindingContext("localJson").getPath();var a=this.getView().getModel("localJson");var r=a.getProperty(i);r.OrderDate=e.getParameter("value");a.setProperty(i,r);o.refresh(true)},handleChange:function(e){var t=this;var o=this.getView().byId("VariationOrderTable").getModel("localJson");var i=e.getSource();var a=i.getSelectedKey();var r=e.getSource().getBindingContext("localJson").getPath();var s=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var n=parseInt(s[2]);var l=o.getProperty("/HeadToHeadVariation/"+n);var d=this.getView().getModel("localJson");var g=d.getProperty(r);g.Txt=g.OrderType+"-"+g.UserOrder;if(a=="R"){g.Status="R";g.Action=a;d.setProperty(r,g);t.changestatus(l)}else{g.Status="C";g.Action=a;o.setProperty(r,g)}o.refresh(true)},onCancleVeriation:function(e){var t=this.getView().byId("VariationOrderTable").getModel("localJson");var o=e.getSource().getBindingContext("localJson").getPath();var i=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var a=this.getView().getModel("localJson");var r=a.getProperty(o);r.Action="C";r.Status="C";a.setProperty(o,r);this.getResourceBundle()},handleChangeOrderType:function(e){var t=e.getSource();var o=t.getSelectedKey();var i=this.getView().byId("VariationOrderTable").getModel("localJson");var a=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var r=parseInt(a[2]);var s=i.getProperty("/HeadToHeadVariation/"+r);s.ChangeInd="X";s.Type=o;i.setProperty("/HeadToHeadVariation/"+r,s);i.refresh(true)},onPressVariationOrder:function(e){var t=e.getSource().getBindingContext("localJson").getPath();this._BuildingItemsPath=e.getSource().getParent().getParent().getBinding("rows").getPath();if(!this._oBuilding){var o=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.variationOrder",this);this._oBuilding=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.variationOrderTable",this);this.getView().addDependent(this._oBuilding);this._buildingBinding=t+"/OrderItemsSet";this.getView().byId("idBuildings").bindItems({path:"localJson>"+this._buildingBinding,template:o,templateShareable:true})}this._oBuilding.open()},handleCloseVariation:function(e){this._oBuilding.close();this._oBuilding.destroy();this._oBuilding=null},onPressAddendumOrder:function(e){var t=e.getSource().getBindingContext("localJson").getPath();this._BuildingItemsPath=e.getSource().getParent().getParent().getBinding("rows").getPath();if(!this.AddendumOrder){var o=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.variationOrder",this);this.AddendumOrder=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.AddendumOrderTable",this);this.getView().addDependent(this.AddendumOrder);this._buildingBinding=t+"/OrderItemsSet";this.getView().byId("idBuildingss").bindItems({path:"localJson>"+this._buildingBinding,template:o,templateShareable:true})}this.AddendumOrder.open()},handleCloseAddendum:function(e){this.AddendumOrder.close();this.AddendumOrder.destroy();this.AddendumOrder=null},onPressVariationOrdersrv:function(e){var t=e.getSource().getBindingContext("localJson").getPath();this._BuildingItemsPath=e.getSource().getParent().getParent().getBinding("rows").getPath();if(!this._oServiceD){var o=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.variationOrdersrv",this);this._oServiceD=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.variationOrderTablesrv",this);this.getView().addDependent(this._oServiceD);this._buildingsrv=t+"/OrderItemsSrvSet";this.getView().byId("idsrvDelete").bindItems({path:"localJson>"+this._buildingsrv,template:o,templateShareable:true})}this._oServiceD.open()},handleCloseVariationsrv:function(e){this._oServiceD.close();this._oServiceD.destroy();this._oServiceD=null},handleSelectionChangeV:function(e){var t=e.getParameter("changedItem");var o=e.getParameter("selected")},objectformatdate:function(e){var t=e.substring(6,10);var o=e.substring(3,5);var i=e.substring(0,2);return new Date(t,o-1,i)},formatDate:function(e){var t=new Date(e),o=""+(t.getMonth()+1),i=""+t.getDate(),a=t.getFullYear();if(o.length<2)o="0"+o;if(i.length<2)i="0"+i;return[a,o,i].join("-")},handleSelectionFinish:function(e){var t=e.getParameter("selectedItems");var o="";for(var i=0;i<t.length;i++){o+=t[i].getKey();if(i!=t.length-1){o+=","}}var a=e.getSource().getBindingContext("localJson").getPath();var r=this.getView().getModel("localJson");var s=r.getProperty(a);s.MonthIndex=o;r.setProperty(a,s)},handelValuseUserOrder:function(e){var t=this.getModel("localJson").getProperty("/HeadToHeadVariation");var o=this.getView().byId("VariationOrderTable").getModel("localJson");var i=e.getSource().getBindingContext("localJson").getPath();var a=this.getView().getModel("localJson");var r=a.getProperty(i);$.each(t,function(e,t){if(r.UserOrder===t.UserOrder&&t.OrderNo!==""&&r.OrderType===t.OrderType){r.UserOrder=""}});a.setProperty(i,r)},handdAdendum:function(){var e=this;var t=e.getModel("localJso").getProperty("/variationOrderContract");if(t.length>=1){e.getView().getModel("localJson").setProperty("/VariationMode",false)}else{var o=0;var i=e.getView().getModel("localJson").getProperty("/BoqItemSet");$.each(i,function(e,t){o=parseFloat(o)+parseFloat(i[e].PriceUnit)});var a=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});var r={UserOrder:"",OrderDesc:"",Type:"",OrderDate:a.format(new Date),MonthIndex:"",AddValues:"0.00",OmissionValues:"0.00",ChangeAmount:"0.00",DaysNo:"",MonthNo:"",Action:"",Status:"C",OrderType:"A",OrderNo:"",VarStatus:""};var s=e.getModel("localJson").getProperty("/HeadToHeadVariation");e.getView().getModel("localJso").setProperty("/VariationMode",false);s.push(r);e.getModel("localJson").setProperty("/HeadToHeadVariation",s)}},loaddateAddendum:function(e){var t=this;var o=this.getView().byId("AddendumTable").getModel("localJson");var i=e.getSource().getBindingContext("localJson").getPath();var a=this.getView().getModel("localJson");var r=a.getProperty(i);r.OrderDate=e.getParameter("value");a.setProperty(i,r)},handleChangeA:function(e){var t=this;var o=this.getView().byId("AddendumTable").getModel("localJson");var i=e.getSource();var a=i.getSelectedKey();var r=e.getSource().getBindingContext("localJson").getPath();var s=this.getView().getModel("localJson");var n=s.getProperty(r);if(a=="R"){n.Status="R";n.Action=a;s.setProperty(r,n)}else{n.Status="C";n.Action=a;o.setProperty(r,n)}},handleChangeOrderTypeA:function(e){var t=e.getSource();var o=t.getSelectedKey();var i=this.getView().byId("AddendumTable").getModel("localJson");var a=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var r=parseInt(a[2]);var s=i.getProperty("/HeadToHeadVariation/"+r);s.Type=o;s.ChangeInd="X";i.setProperty("/HeadToHeadVariation/"+r,s);i.refresh(true)},onPressVariationOrder:function(e){var t=e.getSource().getBindingContext("localJson").getPath();this._BuildingItemsPath=e.getSource().getParent().getParent().getBinding("rows").getPath();if(!this._oBuilding){var o=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.variationOrder",this);this._oBuilding=sap.ui.xmlfragment(this.getView().getId(),"com.cicre.po.view.fragments.variationOrderTable",this);this.getView().addDependent(this._oBuilding);this._buildingBinding=t+"/OrderItemsSet";this.getView().byId("idBuildings").bindItems({path:"localJson>"+this._buildingBinding,template:o,templateShareable:true})}this._oBuilding.open()},handleCloseVariation:function(e){this._oBuilding.close();this._oBuilding.destroy();this._oBuilding=null},handleSelectionChange:function(e){var t=e.getParameter("changedItem");var o=e.getParameter("selected")},handleSelectionFinishA:function(e){var t=e.getParameter("selectedItems");var o="";for(var i=0;i<t.length;i++){o+=t[i].getKey();if(i!=t.length-1){o+=","}}var a=e.getSource().getBindingContext("localJson").getPath();var r=this.getView().getModel("localJson");var s=r.getProperty(a);s.MonthIndex=o;r.setProperty(a,s);r.refresh(true)},deleteEstimatedContrac:function(e){var t=this;var o=t.getModel("localJson").getProperty("/variationOrderContract");var i=e.getSource().getParent().getBindingContext("localJson").getPath().split("/");var a=i[2];o.splice(a,1);t.getModel("localJson").setProperty("/variationOrderContract",o);t.getModel("localJson").refresh(true)},_longTextDialogBuilding:null,onPressLongTextBuildingBoq:function(e){var t=this;t.itemIndex=e.getSource().getBindingContext("localJson").getPath();var o=e.getSource().getBindingContext("localJson").getObject();if(!t._longTextDialogBuilding){t._longTextDialogBuilding=sap.ui.xmlfragment(t.getView().getId(),"com.cicre.po.view.fragments.ServiceLongText",t);t.getView().addDependent(t._longTextDialogBuilding)}t._longTextDialogBuilding.open();t.getView().byId("idLongText").setText(o.BoqDesc)},_longTextDialogBuildingModel:null,onPressLongTextBuildingModel:function(e){var t=this;t.itemIndex=e.getSource().getBindingContext("localJson").getPath();var o=e.getSource().getBindingContext("localJson").getObject();if(!t._longTextDialogBuildingModel){t._longTextDialogBuildingModel=sap.ui.xmlfragment(t.getView().getId(),"com.cicre.po.view.fragments.ServiceLongText",t);t.getView().addDependent(t._longTextDialogBuildingModel)}t._longTextDialogBuildingModel.open();t.getView().byId("idLongText").setText(o.ModelDesc)},onSelectionChangeFilter:function(e){var t=this;var o=e.getSource();var i=true;var a=t.getView().getModel("localJso").getProperty("/Buildings");if(e.getParameters().selected===true){var r=e.getParameter("listItem").getBindingContext("localJson").getObject();i=true;if(i){a.push(r);t.getView().getModel("localJso").setProperty("/Buildings",a);t.aContexts=o.getSelectedContexts(true)}}else{var s=e.getParameter("listItem").getBindingContextPath();var n=s.slice(s.lastIndexOf("/")+1);a.splice(n,1);t.aContexts.splice(n,1);t.getView().getModel("localJso").setProperty("/Buildings",a)}},CancelPressF:function(){this._oBuildingValueHelpDialog.close();this._oBuildingValueHelpDialog.destroy();this._oBuildingValueHelpDialog=null},onZoomIn:function(e){this.getView().byId("idDisplayProcessFlow").zoomIn()},onZoomOut:function(){this.getView().byId("idDisplayProcessFlow").zoomOut()},onChangeWFContractType:function(e){this._readWFInbox(this.getView().byId("idselectionType").getSelectedKey())},_readWFInbox:function(e){var t=this,o=[],i="",a="",r="";if(e!=="O"){i=e.split("-");a=i[0];r=i[1]}else{a=e}var s=new sap.ui.model.Filter("ReqId","EQ",t.getView().getModel("localJson").getProperty("/PoNumber"));o.push(s);s=new sap.ui.model.Filter("Workitem","EQ",a);o.push(s);s=new sap.ui.model.Filter("ContIntNo","EQ",r);o.push(s);t.getView().setBusy(true);t.getOwnerComponent().getModel().read("/WFContractInboxSet",{async:false,method:"GET",filters:o,success:function(e){if(e.results.length>0){var o=e.results;var i=t.onprocessworkflowBuilding(o);t.getView().getModel("localJson").setProperty("/lanes",i.lanes);t.getView().getModel("localJson").setProperty("/nodes",i.nodes);t.getView().getModel("localJson").refresh();t.getView().setBusy(false)}},error:function(){}})},_readWFType:function(){var e=this,t=[],o=new sap.ui.model.Filter("Flag","EQ","X");t.push(o);o=new sap.ui.model.Filter("ReqId","EQ",e.getView().getModel("localJson").getProperty("/PoNumber"));t.push(o);e.getOwnerComponent().getModel().read("/WFContractInboxSet",{async:false,method:"GET",filters:t,success:function(t){if(t.results.length>0){var o=t.results;e.getView().getModel("localJson").setProperty("/Action_TYPE",o)}},error:function(){}})},onprocessworkflowBuilding:function(e){var t=this;var o=t.getView().getModel("dataModel");$.each(e,function(t,o){e[t].Step=parseInt(o.StepNo).toString()});var i=e.filter(function(e,t,o){return t===0||e.Step!==o[t-1].Step});var a=[{laneId:"0",iconSrc:"sap-icon://activate",text:t.getResourceBundle().getText("detailInitiator"),position:0}];var r=[{nodeId:"0",laneId:"0",title:t.initiator,titleAbbreviation:t.initiator,children:[],state:sap.suite.ui.commons.ProcessFlowNodeState.Positive,stateText:t.getResourceBundle().getText("detailRequestReleased"),highlighted:true}];var s=e.filter(function(e){return e.Step=="1"});for(var n=0;n<s.length;n++){r[0].children.push(s[n].UserName+s[n].Workitem)}for(var l in i){a.push({laneId:i[l].Step,iconSrc:"sap-icon://monitor-payments",text:i[l].Role,position:parseInt(i[l].Step)})}for(var n in e){e[n].DecisionDate=e[n].DecisionDate===null?"":e[n].DecisionDate;r.push({nodeId:e[n].UserName+e[n].Workitem,laneId:e[n].Step,title:e[n].UserName,titleAbbreviation:e[n].UserName,children:[],role:e[n].Role,state:e[n].UserName==e[n].DecisionBy&&e[n].Status=="APPROVED"?sap.suite.ui.commons.ProcessFlowNodeState.Positive:e[n].UserName==e[n].DecisionBy&&e[n].Status=="REJECTED"?sap.suite.ui.commons.ProcessFlowNodeState.Negative:sap.suite.ui.commons.ProcessFlowNodeState.Neutral,stateText:e[n].Role=="WAT"?"Watcher":e[n].Status=="STA"?"Active":e[n].Status=="APPROVED"?"Approved by-"+e[n].DecisionBy:e[n].Status=="REJECTED"?"Rejected by-"+e[n].DecisionBy:"Pending",highlighted:e[n].UserName==e[n].DecisionBy&&e[n].Status=="APPROVED"?true:e[n].UserName==e[n].DecisionBy&&e[n].Status=="REJECTED"?true:false,texts:[t.formatDatew(e[n].DecisionDate),e[n].Comments,e[n].Status]});var s=e.filter(function(t){return t.Step==(parseInt(e[n].Step)+1).toString()});for(var d=0;d<s.length;d++){var g=s[d].UserName+s[d].Workitem;if(r[r.length-1].nodeId!==g){r[r.length-1].children.push(g)}}}return{nodes:r,lanes:a}},onNodePress:function(e){var t=this;var o=e.getParameters().getBindingContext("localJson").getObject();if(o.laneId!="0"){if(t._processFlowDialog){t._processFlowDialog.destroy();t._processFlowDialog=null}if(!t._processFlowDialog){t._processFlowDialog=sap.ui.xmlfragment(t.getView().getId(),"com.cicre.po.view.fragments.ProcessFlowDialog",t);t._processFlowDialog.setBindingContext(e.getParameters().getBindingContext("localJson"),"localJson");t.getView().addDependent(t._processFlowDialog)}t._processFlowDialog.open()}},onCloseProcessFlow:function(e){this._processFlowDialog.close()},onChangeContractDuration:function(){var e=this.getView().byId("idContractDurationMonth").getValue(),t=this.getView().byId("idContractDurationDays").getValue(),o=this.getView().getModel("localJson").getProperty("/TotalvariationMonths"),i=this.getView().getModel("localJson").getProperty("/TotalvariationDays"),a=0,r=0,s=this.getView().getModel("localJson").getProperty("/ValidFrom");a=parseInt(e)+parseInt(o);r=parseInt(t)+parseInt(i);this.getView().getModel("localJson").setProperty("/TotalContractDurationMonths",a);this.getView().getModel("localJson").setProperty("/TotalContractDurationDays",r);var n=this.calculateDates(s,a,r);this.getView().getModel("localJson").setProperty("/ValidTo",n)},getStartDate:function(e,t,o){if(e>t){if(e>o){return e}else{return o}}else{if(t>o){return t}else{return o}}},calculatestartDate:function(){var e=this.getView().getModel("localJson").getProperty("/SigninDate"),t=this.getView().getModel("localJson").getProperty("/CommencementDate"),o=this.getView().getModel("localJson").getProperty("/DateOfApplying"),i=this.getView().getModel("localJson").getProperty("/TotalContractDurationMonths"),a=this.getView().getModel("localJson").getProperty("/TotalContractDurationDays");var r=this.getStartDate(t,o,e);this.getView().getModel("localJson").setProperty("/ValidFrom",r);var s=this.calculateDates(r,i,a);this.getView().getModel("localJson").setProperty("/ValidTo",s)},oncalculatVariationOrder:function(e){var t=this.getView().getModel("localJson").getProperty("/HeadToHeadVariation");var o=0;var i=0,a=this.getView().getModel("localJson").getProperty("/ContDurationMonth"),r=this.getView().getModel("localJson").getProperty("/ContDurationDays"),s=0,n=0;var l=e.getSource().getBindingContext("localJson").getPath();var d=this.getView().getModel("localJson");var g=d.getProperty(l);g.ChangeInd="X";d.setProperty(l,g);$.each(t,function(e,t){if(t.MonthNo===""){t.MonthNo=0}if(t.DaysNo===""){t.DaysNo=0}o=parseInt(o)+parseInt(t.MonthNo);i=parseInt(i)+parseInt(t.DaysNo)});this.getView().getModel("localJson").setProperty("/TotalvariationMonths",o);this.getView().getModel("localJson").setProperty("/TotalvariationDays",i);this.onChangeContractDuration()},onChangeind:function(e){var t=e.getSource().getBindingContext("localJson").getPath();var o=this.getView().getModel("localJson");var i=o.getProperty(t);i.ChangeInd="X";o.setProperty(t,i)},formatDatew:function(e){if(e==null){return""}else{jQuery.sap.require("sap.ui.core.format.DateFormat");var t=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});return t.format(new Date(e))}},onPRSelectionChange:function(e){var t=this;var o=true,i=[],a=[];var r=t.getView().getModel("localJson").getProperty("/selectedPR");var s=t.getView().getModel("localJson").getProperty("/myPurchaseRequisition"),n=t.getView().getModel("localJson").getProperty("/HeadToHeadVariation"),l=this._contractDialogPR.getTable().getSelectedIndices();t.myWBSSet=t.getView().getModel("localJson").getProperty("/myWBSSet");if(l.length>0){for(var d=0;d<l.length;d++){var g=this._contractDialogPR.getTable().getContextByIndex(l[d]).getObject();g.ChangeIndicator="AddB";i.push(g)}$.each(s,function(e,t){$.each(i,function(e,i){if(i.BuildingNo===t.BuildingNo){a.push(t.BuildingNo);o=false}})});if(o){$.each(i,function(e,t){i[e].ContractualIndicator="O";i[e].Txt="Original";$.each(n,function(t,o){if(n[t].Status==="C"){i[e].ContractualIndicator=n[t].OrderType;i[e].SrvStatus="UA";i[e].AsBuild2="";i[e].OrderNo=n[t].OrderNo;i[e].Txt=n[t].OrderType+"-"+n[t].UserOrder;i[e].vlive="V"}});i[e].SrvStatus="UA";i[e].DelInd="";i[e].AsBuild2="";i[e].ModelType="PR";i[e].ActivityNumber=i[e].ActivityNumber;i[e].Network=i[e].Network;i[e].PrNo=parseInt(i[e].PrNo).toString();i[e].PrNumber=parseInt(i[e].PrNo).toString();i[e].BuildingNo=parseInt(i[e].PrNo).toString();i[e].Model=parseInt(i[e].PrNo).toString();i[e].BoqDesc=i[e].ActivityNumberDesc;r.push(i[e]);s.push(i[e])});t.aContexts.push(i);t.getView().getModel("localJson").setProperty("/myPurchaseRequisition",s);t.getView().getModel("localJson").setProperty("/selectedPR",r);t.onPRContractClose();t._handleValueHelpOpjectClosePR()}else if(!o){var c=a.join();sap.m.MessageToast.show("Purchase Requisition is already added or don't select Boq "+c)}}},_handleValueHelpOpjectClosePR:function(e){var t=this,o=t.getView().getModel();t.getView().setBusy(true);var i=t.getView().getModel(),a={},r=t.getView().getModel("localJson").getProperty("/myPurchaseRequisition"),s=t.getView().getModel("localJson").getProperty("/HeadToHeadVariation"),n=[];var l=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/PRItemSet")));if(t.aContexts.length===0)sap.m.MessageToast.show("Select one Building at least!");else{t.BUBoQs.sort();this.objSet=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqItemSet")));this.selectedBuilding=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/selectedBuilding")));var d="0.00";var g=t.getView().getModel("localJson").getProperty("/selectedPR");$.each(g,function(e,t){var o=new sap.ui.model.Filter("PrNumber",sap.ui.model.FilterOperator.EQ,t.PrNo);if(o!==""){n.push(o)}});var c=new sap.ui.model.Filter("Eancat",sap.ui.model.FilterOperator.EQ,"PR");if(c!==""){n.push(c)}this.objSet=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/PRItemSet")));t.getView().getModel("localJson").setProperty("/selectedPR",[]);o.read("/BoqTreeSet",{filters:n,success:function(e,o){e=e.results;var i=1;var n=[];var l="O";var g="";var c="UA";var u="";$.each(s,function(e,t){if(s[e].Status==="C"){l=s[e].OrderType;g=s[e].OrderNo;u=s[e].UserOrder}});if(l==="O"){var p="Original"}else{var p=l+"-"+u}$.each(e,function(t,o){if(e[t].LevelNo==="1"){e[t].AddNew="AN";e[t].live="one"}e[t].ModelType="BOQ";if(e[t].Eancat===""&&parseInt(e[t].LevelNo)===3){e[t].Qty="0";e[t].Uom="";e[t].Price="0"}if(e[t].Eancat==="U"){e[t].Qty=0}if(parseInt(e[t].LevelNo)===3){e[t].Txt=p;e[t].SrvStatus=c;if(e[t].Eancat!=""){e[t].PriceUnit="1";e[t].Price="1"}e[t].DelInd="";e[t].ModelBoq=[];a={ModelType:"PR",Model:e[t].Data,SubModel:"",Buildingno:e[t].Data};e[t].ModelBoq.push(a);e[t].VariationOrder=g;e[t].ChangeIndicator="addB";e[t].ContractualIndicator=l;e[t].Indicator="Y";d=parseFloat(d)+parseFloat(e[t].Qty)*parseFloat(e[t].Price)}else{e[t].Indicator="Z"}});for(i;i<e.length+1;i++){n.push({[i]:[]});for(var h=0;h<e.length;h++){e[h].Categories=[];if(parseInt(e[h].LevelNo)===i){n[i-1][i].push(e[h])}}}var m=[];$.each(n,function(e,t){if(e<3){$.each(t,function(t,o){if(o.length!==0){$.each(o,function(t,o){$.each(n[e+1],function(e,t){$.each(t,function(e,t){if(t.length!==0){if(o.LevelId===t.Parent){o.Categories.push(t)}}})})})}})}});$.each(n[0],function(e,t){if(t.length!==0){$.each(t,function(e,t){m.push(t)})}});var S=false;var f=false;$.each(m,function(e,o){S=false;if(t.objSet.length!==0){$.each(t.objSet,function(i,a){$.each(o.Categories,function(r,s){$.each(a.Categories,function(e,t){if(o.Data===a.Data){S=true;if(s.Data===t.Data){f=true}}});if(S&&!f){if(s.Model===a.Model){t.objSet[i].Categories.push(m[e].Categories[r]);f=false}}})});if(!S&&!f){t.objSet.push(o);S=false}}else{t.objSet.push(o)}f=false;S=false});t.getView().getModel("localJson").setProperty("/PRItemSet",t.objSet);t.Consoliatedservices();var v=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/PRItemSet")));var y=JSON.parse(JSON.stringify(t.getView().getModel("localJson").getProperty("/BoqConsulidatedItemSet")));$.each(v,function(e,t){$.each(t.Categories,function(e,o){$.each(o.Categories,function(e,i){t.PriceUnit="0";o.PriceUnit="0";i.PriceUnit="0"})})});$.each(y,function(e,o){$.each(v,function(e,i){$.each(i.Categories,function(e,a){$.each(a.Categories,function(e,s){if(o.Data===s.Data&&o.Txt===s.Txt){$.each(r,function(e,r){if(r.PrNo==i.PrNumber){var n=JSON.parse(JSON.stringify(parseFloat(o.PriceUnit).toFixed(t.CustomCurrency)));s.price=n;s.PriceUnit=(n*parseFloat(s.Qty)).toString();s.Qty=parseFloat(s.Qty).toString();if(s.Eancat!=="C"&&s.Eancat!=="U"){i.PriceUnit=(parseFloat(i.PriceUnit)+n*parseFloat(s.Qty)).toString()}if(s.Eancat!=="C"&&s.Eancat!=="U"){a.PriceUnit=(parseFloat(a.PriceUnit)+n*parseFloat(s.Qty)).toString()}}})}})})})});t.getView().getModel("localJson").setProperty("/PRItemSet",JSON.parse(JSON.stringify(v)));t.ContractValueHeader();t.addBuildingForvariation()},error:function(e){sap.m.MessageToast.show("Error")}})}},onChangeNote:function(){var e=this.getView().getModel("localJson").getProperty("/ContractPONoteSet");e.Flag="X";this.getView().getModel("localJson").setProperty("/ContractPONoteSet",e)},onPressContractTermsTile:function(e){var t=sap.ushell.Container.getService("CrossApplicationNavigation"),o=this.getView().getModel("localJson").getProperty("/ContractTermsInd"),i=this.getView().getModel("localJson").getProperty("/Version"),a=this.getView().getModel("localJson").getProperty("/PurchDoc"),r="";var s=t&&t.hrefForExternal({target:{semanticObject:"ZSESMISem",action:"display"}})||"";if(o==="X"){r="&/displayTerms/"+a+"/"+i}else{r="&/createTerms/"+a+"/0"}var n=window.location.href.split("#")[0]+s+r;window.open(n,"_blank")}})});
},
	"com/cicre/po/controller/WorkList.controller.js":function(){
sap.ui.define(["com/cicre/po/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","com/cicre/po/model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/export/Spreadsheet","sap/m/MessageToast"],function(e,t,i,r,a,o,s,l){"use strict";return e.extend("com.cicre.po.controller.WorkList",{formatter:r,sCoCode:"",sPONO:"",sVendor:"",sProj:"",sPGrp:"",sPOrg:"",POrgText:"",POrgCode:"",sProjectCode:"",ContractCode:"",sDocType:"",SupeiorWBSCode:"",sVendor:"",SERTYPE:"",SERTYPEText:"",onInit:function(){var e,i,r=this.byId("table");i=r.getBusyIndicatorDelay();this._oTableSearchState=[];e=new t({worklistTableTitle:this.getResourceBundle().getText("worklistTableTitle"),saveAsTileTitle:this.getResourceBundle().getText("worklistViewTitle"),shareOnJamTitle:this.getResourceBundle().getText("worklistViewTitle"),shareSendEmailSubject:this.getResourceBundle().getText("shareSendEmailWorklistSubject"),shareSendEmailMessage:this.getResourceBundle().getText("shareSendEmailWorklistMessage",[location.href]),tableNoDataText:this.getResourceBundle().getText("tableNoDataText"),tableBusyDelay:0});this.setModel(e,"worklistView");this.sPOrg="1000";this.POrgText="TMG CENTRAL Purch.";this.getView().byId("idPurchaseOrganization").setValue(this.POrgText);r.attachEventOnce("updateFinished",function(){e.setProperty("/tableBusyDelay",i)})},onUpdateFinished:function(e){var t,i=e.getSource(),r=e.getParameter("total");if(r&&i.getBinding("items").isLengthFinal()){t=this.getResourceBundle().getText("Contract",[r])}else{t=this.getResourceBundle().getText("Contract")}this.getModel("worklistView").setProperty("/worklistTableTitle",t)},onPress:function(e){this._showObject(e.getSource())},onNavBack:function(){var e=i.getInstance().getPreviousHash(),t=sap.ushell.Container.getService("CrossApplicationNavigation");if(e!==undefined||!t.isInitialNavigation()){history.go(-1)}else{t.toExternal({target:{shellHash:"#Shell-home"}})}},onShareInJamPress:function(){var e=this.getModel("worklistView"),t=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:location.href,share:e.getProperty("/shareOnJamTitle")}}});t.open()},onSearch:function(e){if(e.getParameters().refreshButtonPressed){this.onRefresh()}else{var t=[];var i=e.getParameter("query");if(i&&i.length>0){t=[new a("PoNumber",o.Contains,i)]}this._applySearch(t)}},onRefresh:function(){var e=this.byId("table");e.getBinding("items").refresh()},_showObject:function(e){this.getRouter().navTo("object",{objectId:e.getBindingContext().getProperty("PoNumber")})},onSearchContract:function(){var e=this.getView().byId("table");e.setBusy(true);var t=this.getView().getModel();var i=[];if(this.ContractCode.length>0&&this.getView().byId("idSearchByContract").getValue()!==""){i.push(new sap.ui.model.Filter("PoNumber",sap.ui.model.FilterOperator.EQ,this.ContractCode))}if(this.sVendor.length>0&&this.getView().byId("idSearchByVendor").getValue()!==""){i.push(new sap.ui.model.Filter("Vendor",sap.ui.model.FilterOperator.EQ,this.sVendor))}if(this.sCoCode.length>0){i.push(new sap.ui.model.Filter("CompCode",sap.ui.model.FilterOperator.EQ,this.sCoCode))}if(this.sPOrg.length>0&&this.getView().byId("idPurchaseOrganization").getValue()!==""){i.push(new sap.ui.model.Filter("PurchOrg",sap.ui.model.FilterOperator.EQ,this.sPOrg))}if(this.sProjectCode.length>0&&this.getView().byId("idSearchByProjecttt").getValue()!==""){i.push(new sap.ui.model.Filter("Project",sap.ui.model.FilterOperator.EQ,this.sProjectCode))}if(this.sDocType.length>0&&this.getView().byId("idSearchByDecTy").getValue()!==""){i.push(new sap.ui.model.Filter("DocType",sap.ui.model.FilterOperator.EQ,this.sDocType))}if(this.SERTYPE.length>0&&this.getView().byId("idserviceType").getValue()!==""){i.push(new sap.ui.model.Filter("SerType",sap.ui.model.FilterOperator.EQ,this.SERTYPE))}if(this.getView().byId("idFConstructionType").getSelectedKey().length>0&&this.getView().byId("idFConstructionType").getValue()!==""){i.push(new sap.ui.model.Filter("ConstructionType",sap.ui.model.FilterOperator.EQ,this.getView().byId("idFConstructionType").getSelectedKey()))}if(this.SupeiorWBSCode.length>0){i.push(new sap.ui.model.Filter("SuperiorWbs",sap.ui.model.FilterOperator.EQ,this.SupeiorWBSCode))}if(this.getView().byId("idCreatedBy").getValue().length>0){i.push(new sap.ui.model.Filter("CreatedBy",sap.ui.model.FilterOperator.contains,this.getView().byId("idCreatedBy").getValue().toUpperCase()))}var r=t.bindList("/ContractPOHeaderSet",null,null,null,{$$updateGroupId:"contractSearch"});if(i.length>0){var a=new sap.ui.model.Filter({filters:i,and:true});r.filter(a)}else{r.filter([])}r.requestContexts(0,100).then(function(t){var i=t.map(function(e){return e.getObject()});var r=new sap.ui.model.json.JSONModel({ContractPOHeaderSet:i});e.setModel(r,"poModel");e.setBusy(false)}).catch(function(t){console.error("Error loading data:",t);e.setBusy(false);sap.m.MessageToast.show("Error loading data: "+(t.message||"Unknown error"))})},onDisplaySearchCompDialog:function(){if(!this._oDialog){this._oDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.CompanySearchDialog",this);this._oDialog.setModel(this.getView().getModel())}this._oDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"CompCode");t.push(i);this._oDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},onSearchCompanyChange:function(){this.sCoCode="";this.sCoText="";this.getView().byId("idSearchByCompany").setValue("")},onSearchProjectChange:function(){this.sProjectCode="";this.getView().byId("idSearchByProjecttt").setValue("")},onSearchContractChange:function(){this.ContractCode="";this.getView().byId("idSearchByContract").setValue("")},onSearchWBS:function(){this.SupeiorWBSText="";this.SupeiorWBSCode="";this.getView().byId("idSupeiorWBS").setValue("")},onSearchByVendor:function(){this.sVendor="";this.getView().byId("idSearchByVendor").setValue("")},onSearchSuggestDecTy:function(){this.sDocType="";this.sDocTypeText="";this.getView().byId("idSearchByDecTy").setValue("")},onserviceTypeChange:function(){this.SerType="";this.getView().byId("idserviceType").setValue("")},handleSearchComp:function(e){var t=e.getParameter("value");var i=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];var a=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"CompCode");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);r.push(a);r.push(o);this._oDialog.bindAggregation("items",{path:"/ValueHelpSet",template:i,filters:r})},onSelectCompanyList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sCoCode=e.getObject().IdNumber;t.sCoText=e.getObject().IdText;t.getView().byId("idSearchByCompany").setValue(e.getObject().IdText)})}else{t.sCoCode="";t.sCoText="";t.getView().byId("idSearchByCompany").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchContract:function(){if(!this._ContractDescDialog){this._ContractDescDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ContractDescriptionDialog",this);this._ContractDescDialog.setModel(this.getView().getModel())}this._ContractDescDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"ContDesc");t.push(i);this._ContractDescDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchContract:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"ContDesc");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];o.push(i);o.push(r);this._ContractDescDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:o})},onSelectContractList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){var i=e.getObject().IdNumber.split(" ");t.ContractCode=i[0];t.getView().byId("idSearchByContract").setValue(e.getObject().IdText)})}else{t.ContractCode="";t.getView().byId("idSearchByContract").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onserviceTypeValueHelpPress:function(){if(!this._oDocTypeDialog){this._oDocTypeDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ServiceTypeSearchDialog",this);this._oDocTypeDialog.setModel(this.getView().getModel())}this._oDocTypeDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"MSERTYPE");t.push(i);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchServicetype:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"MSERTYPE");var r=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];o.push(i);o.push(r);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:o})},onSelectServicetypeList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.SERTYPE=e.getObject().IdNumber;t.SERTYPEText=e.getObject().IdText;t.getView().byId("idserviceType").setValue(e.getObject().IdText)})}else{t.SERTYPE="";t.SERTYPEText="";t.getView().byId("idserviceType").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchidSupeiorWBSDialog:function(){if(this.sCoCode&&this.sProjectCode){if(!this._SuperiorWBSDialog){this._SuperiorWBSDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SuperiorWBSSearchDialog",this);this._SuperiorWBSDialog.setModel(this.getView().getModel())}this._SuperiorWBSDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var o=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,1e3);t.push(i);t.push(r);t.push(a);t.push(o);this._SuperiorWBSDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})}else{sap.m.MessageToast.show(this.getView().getModel("i18n").getResourceBundle().getText("Msg_Error_Select_WBS_C"))}},onSelectCheque:function(e){this.SupeiorWBSText=e.getParameters().rowContext.getObject().IdText;this.SupeiorWBSCode=e.getParameters().rowContext.getObject().IdNumber;this.getView().byId("idSupeiorWBS").setValue(this.SupeiorWBSText);this._SuperiorWBSDialog.close();this._SuperiorWBSDialog.destroy();this._SuperiorWBSDialog=null},handleSearWBS:function(){var e=this;if(!this._GroupDialog){this._GroupDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.SuperiorWBSSearchDialog",this);this._GroupDialog.setModel(this.getView().getModel())}var t=e.getView().getModel();var i=new sap.ui.model.json.JSONModel;i.setData({SupeiorWBSSet:[]});e._SuperiorWBSDialog.setModel(i,"localJson");var r=[];var a=[];var o=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var s=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var l=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var n=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().byId("idDesc").getValue());var p=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,sap.ui.getCore().byId("idlenth").getValue());r.push(o);r.push(s);r.push(l);if(sap.ui.getCore().byId("idDesc").getValue()!==""){r.push(n)}if(sap.ui.getCore().byId("idlenth").getValue()!==""){r.push(p)}if(sap.ui.getCore().byId("idlenth").getValue()===""){var p=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,500);r.push(p)}t.read("/ValueHelpSet",{filters:r,success:function(t){var i=JSON.parse(JSON.stringify(t.results));e._SuperiorWBSDialog.getModel("localJson").setProperty("/SupeiorWBSSet",i)},error:function(e){sap.m.MessageToast.show("Error")}})},_handleCancelPresswbs:function(){var e=this;this.SupeiorWBSText="";this.SupeiorWBSCode="";this.getView().byId("idSupeiorWBS").setValue("");e._SuperiorWBSDialog.close();e._SuperiorWBSDialog.destroy();e._SuperiorWBSDialog=null},handleSearchSuperior:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"SUBWBS");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.EQ,this.sProjectCode);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var o=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.Contains,t);var s=new sap.ui.model.Filter("SelectionParameter4",sap.ui.model.FilterOperator.EQ,1e3);var l=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var n=[];n.push(i);n.push(r);n.push(a);n.push(o);n.push(s);this._SuperiorWBSDialog.bindAggregation("items",{path:"/ValueHelpSet",template:l,filters:n})},onSelectSuperiorList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.SupeiorWBSText=e.getObject().IdText;t.SupeiorWBSCode=e.getObject().IdNumber;t.getView().byId("idSupeiorWBS").setValue(e.getObject().IdText)})}else{t.SupeiorWBSText="";t.SupeiorWBSCode="";t.getView().byId("idSupeiorWBS").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchDecTyDialog:function(){if(!this._oDocTypeDialog){this._oDocTypeDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.DocumentSearchDialog",this);this._oDocTypeDialog.setModel(this.getView().getModel())}this._oDocTypeDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"DocType");t.push(i);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchDocument:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"DocType");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];o.push(i);o.push(r);this._oDocTypeDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:o})},onSelectDocumentList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sDocType=e.getObject().IdNumber;t.sDocTypeText=e.getObject().IdText;t.getView().byId("idSearchByDecTy").setValue(e.getObject().IdText)})}else{t.sDocType="";t.sDocTypeText="";t.getView().byId("idSearchByDecTy").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchProject:function(){if(this._projectDialog){this._projectDialog.destroy();this._projectDialog=null}if(!this._projectDialog){this._projectDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.ProjectSearchDialog",this);this._projectDialog.setModel(this.getView().getModel())}this._projectDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PROJ");t.push(i);this._projectDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchProject:function(e){var t=e.getParameter("value");var i=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var r=[];var a=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PROJ");var o=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);r.push(a);r.push(o);this._projectDialog.bindAggregation("items",{path:"/ValueHelpSet",template:i,filters:r})},onSelectProjectList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sProjectCode=e.getObject().IdNumber;t.getView().byId("idSearchByProjecttt").setValue(e.getObject().IdText)})}else{t.sProjectCode="";t.getView().byId("idSearchByProjecttt").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchVendorDialog:function(){if(this.sCoCode&&this.sPOrg){if(this._oVendorDialog){this._oVendorDialog.destroy();this._oVendorDialog=null}if(!this._oVendorDialog){this._oVendorDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.VendorSearchDialog",this);this._oVendorDialog.setModel(this.getView().getModel())}this._oVendorDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Vendor");var r=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var a=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sPOrg);t.push(i);t.push(r);t.push(a);this._oVendorDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})}else{sap.m.MessageToast.show(this.getView().getModel("i18n").getResourceBundle().getText("Msg_Error_Select_CO_PORG"))}},handleSearchVendor:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"Vendor");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.EQ,this.sCoCode);var o=new sap.ui.model.Filter("SelectionParameter3",sap.ui.model.FilterOperator.EQ,this.sPOrg);var s=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var l=[];l.push(i);l.push(r);l.push(a);l.push(o);this._oVendorDialog.bindAggregation("items",{path:"/ValueHelpSet",template:s,filters:l})},onSelectVendorList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sVendor=e.getObject().IdNumber;t.getView().byId("idSearchByVendor").setValue(e.getObject().IdText)})}else{t.sVendor="";t.getView().byId("idSearchByVendor").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchPOrgDialog:function(){if(!this._oPOrgDialog){this._oPOrgDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.PurchaseOrgSearchDialog",this);this._oPOrgDialog.setModel(this.getView().getModel())}this._oPOrgDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PORG");var r=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sCoCode);t.push(i);t.push(r);this._oPOrgDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchPOrg:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PORG");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter("SelectionParameter2",sap.ui.model.FilterOperator.Contains,this.sCoCode);var o=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var s=[];s.push(i);s.push(r);s.push(a);this._oPOrgDialog.bindAggregation("items",{path:"/ValueHelpSet",template:o,filters:s})},onSelectPOrgList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sPOrg=e.getObject().IdNumber;t.getView().byId("idPurchaseOrganization").setValue(e.getObject().IdText)})}else{t.sPOrg="";t.getView().byId("idPurchaseOrganization").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onDisplaySearchPGrpDialog:function(){if(!this._oPGrpDialog){this._oPGrpDialog=sap.ui.xmlfragment("com.cicre.po.view.fragments.PurchaseGrpSearchDialog",this);this._oPGrpDialog.setModel(this.getView().getModel())}this._oPGrpDialog.open();var e=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var t=[];var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PGRP");t.push(i);this._oPGrpDialog.bindAggregation("items",{path:"/ValueHelpSet",template:e,filters:t})},handleSearchPGrp:function(e){var t=e.getParameter("value");var i=new sap.ui.model.Filter("ValueHelpType",sap.ui.model.FilterOperator.EQ,"PGRP");var r=new sap.ui.model.Filter("SelectionParameter",sap.ui.model.FilterOperator.Contains,t);var a=new sap.m.StandardListItem({title:"{IdText}",description:"{IdNumber}"});var o=[];o.push(i);o.push(r);this._oPGrpDialog.bindAggregation("items",{path:"/ValueHelpSet",template:a,filters:o})},onSelectPGrpList:function(e){var t=this;var i=e.getParameter("selectedContexts");if(i&&i.length){i.map(function(e){t.sPGrp=e.getObject().IdNumber;t.getView().byId("idPurchaseGroup").setValue(e.getObject().IdText)})}else{t.sPGrp="";t.getView().byId("idPurchaseGroup").setValue("");sap.m.MessageToast.show("No new item was selected.")}e.getSource().getBinding("items").filter([])},onPressPO:function(e){var t=e.getSource().getBindingContext("poModel").getProperty("PoNumber"),i=sap.ui.core.UIComponent.getRouterFor(this);i.navTo("object",{objectId:t})},onCreateContractPress:function(e){this.getView().setBusy(true);this.getRouter().navTo("createContract");this.getView().setBusy(false)}})});
},
	"com/cicre/po/i18n/i18n.properties":'# This is the resource bundle for Contract\n\n#XTIT: Application name\nappTitle=Contract\n\n#YDES: Application description\nappDescription=SESMI Contract Application\n\n#~~~ Worklist View ~~~~~~~~~~~~~~~~~~~~~~~~~~\n#XTIT: Table view title\nworklistViewTitle=Contract\n\n#XTIT: Table view title\nworklistTableTitle=<ObjectName>\n\n#XTOL: Tooltip for the search field\nworklistSearchTooltip=Enter an <ObjectName> name or a part of it.\n\n#XBLI: text for a table with no data with filter or search\nworklistNoDataWithSearchText=No matching <ObjectNamePlural> found\n\n#XTIT: Table view title with placeholder for the number of items\nworklistTableTitleCount=<ObjectName> ({0})\n\n#XTIT: The title of the column containing the PoNumber of ContractPOHeaderSet\ntableNameColumnTitle=<FirstColumnName>\n\n#XTIT: The title of the column containing the  and the unit of measure\ntableUnitNumberColumnTitle=<LastColumnName>\n\n#XBLI: text for a table with no data\ntableNoDataText=No <ObjectNamePlural> are currently available\n\n#XLNK: text for link in \'not found\' pages\nbackToWorklist=Show Contract\n\n#~~~ Object View ~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n#XTIT: Object view title\nobjectTitle=<ObjectName>\n\n#~~~ Footer Options ~~~~~~~~~~~~~~~~~~~~~~~\n#XTIT: Save as tile app title\nsaveAsTileTitle=Contract - {0}\n\n#XTIT: Send E-Mail subject\nshareSendEmailWorklistSubject=<Email subject PLEASE REPLACE ACCORDING TO YOUR USE CASE>\n\n#YMSG: Send E-Mail message\nshareSendEmailWorklistMessage=<Email body PLEASE REPLACE ACCORDING TO YOUR USE CASE>\\r\\n{0}\n\n#XTIT: Send E-Mail subject\nshareSendEmailObjectSubject=<Email subject including object identifier PLEASE REPLACE ACCORDING TO YOUR USE CASE> {0}\n\n#YMSG: Send E-Mail message\nshareSendEmailObjectMessage=<Email body PLEASE REPLACE ACCORDING TO YOUR USE CASE> {0} (id: {1})\\r\\n{2}\n\n\n#~~~ Not Found View ~~~~~~~~~~~~~~~~~~~~~~~\n\n#XTIT: Not found view title\nnotFoundTitle=Not Found\n\n#YMSG: The ContractPOHeaderSet not found text is displayed when there is no ContractPOHeaderSet with this id\nnoObjectFoundText=This <ObjectName> is not available\n\n#YMSG: The ContractPOHeaderSet not available text is displayed when there is no data when starting the app\nnoObjectsAvailableText=No <ObjectNamePlural> are currently available\n\n#YMSG: The not found text is displayed when there was an error loading the resource (404 error)\nnotFoundText=The requested resource was not found\n\n#~~~ Error Handling ~~~~~~~~~~~~~~~~~~~~~~~\n\n#YMSG: Error dialog description\nerrorText=Sorry, a technical error occurred! Please try again later.\n\n#~~~ Attachment Fragment XML~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nattachmentAdd=Add Attachment\nattachmentInfo=Attachment Info\nattachmentName=Attachments\nattachmentUploadFile=Upload file\nattachmentCancel=Cancel\nattachmentAdd=Add\nattachmentDelete=Delete\n\nbaseMSGNoAttachment=No attachment file added\nbaseMSGMismatchAttachmentType=Mismatching attachment types \\r\\n Permitted types: {0}\nbaseMSGConfirmDelete=Are you sure you want to delete the selected attachment? \nMsg_Error_Select_CO_PORG=Please enter Company Code and Purchase Organization\nHeader(Display)=Header (Display)\nHeader(Maintenance)=Header (Maintenance)\nEstimatedServices=Estimated Services\nERR_DELETE_E_SRVS=Estimated partition data must be deleted first!\nMsg_Error_Select_WBS= Please enter Company Code and project\nMsg_Error_Select_WBS_C= Please enter project\nMsg_Confirm_Craete= Do you want to Save the Contract\nMsg_Confirm_Delete= Do you can delete building and all Services for this building\nMsg_srv_Delete= Do you can delete Service\nMsg_Confirm_Save_Change= Dou you Want save Change\ndisplayBuildingId = Building\ndisplayWBS = WBS\nDocumentID = Document ID\nCompanyCode =Company Code\nPurchaseOrganization = Purchase Organization\nPurchaseGroup = Purchase Group\nEstimatedContractValue = Estimated Contract Value\nOriginalContractValue = Original Contract \nVariationOrderValue = Variation Order Value\nAddendumValue  = Addendum Value\nTotalContractValue = Total Contract Value\nContractDescription = Contract Description\nLongDescription = Long Description\nVendor = Vendor\nCurrency = Currency\n#Commercial\nMeasurementMethod = Measurement Method\nConstructionType =  Construction Type \nRefrenceContract = Refrence Contract\nCreationDate = Creation Date\nSignOffDate = Sign Off Date\nValidFrom = Start Date \nValidTo = Completion Date\nCommencementDate = Commencement Date\n\nIndexMonth = Index Month\nConsultant = Consultant\nResponsiblepersonSS = Responsible person SS\nResponsiblepersonIR =Responsible person IR\nSupeiorWBS =Supeior WBS\n CreationType = Creation Type \nContractType = Contract Type\nMarkUp  = MarkUp%\nRevisedContractValue = Revised Contract Value\nhomeContractNo = Home Contract No\nContract = Contract \nContractType = Contract Type\n PurchOrg = Purchase Organization\n Vendor = Vendor \n Status = Status\n SelectBoq =Select Boq\n ModelID = Model Code\n Model = Model\n Building = Building \n Zone = Zone\n ContractualIndicator = Contractual Indicator\n\n Searchavailablecontracts = Search Available Contracts \n SearchContracts = Search Contracts\n CreateContract = Create Contract\n BuildingBOQList = Building BOQ List\n GeneralBOQList = General BOQ List \n Servicetype = Service type\n EstimatedContracts = EstimatedContracts\n ServiceGroup = Service Group\n GroupText = Group Text\n NoofBuilding = No of Building\n Amount = Amount\n ConsolidatedServices = Consolidated Services\n filterServices = Filter Services\n displayContractualIndicator = Display Contractual Indicator\n contractSelectContract = = Select Contract\n GeneralBOQList = General BOQ List\n ServiceDescription = Service Description\n Please_add_the_original_percentage_from_contract_terms_applaction = Please add the original percentage from contract terms applaction\n Total_of_variationorder_you_must_less_than =Total of variationorder you must less than {0}\n Total_of_add_you_must_less_than=Total of Addendum you must less than {0}\nTotal_variation_orders_exceeds_20_from_the_original = Total variation orders exceeds 20% from the original\nTotal_add_orders_exceeds_20_from_the_original= Total addendums exceeds 20% from the original\nserviceType = Service Type\nselectBoq = select Boq\nMsg_Success = Success\nProvisionRate=Provision Rate\nWBSCODE = WBS Code \nGroup = Group\nWBSDescription = WBS Description\nBOQDescription = BOQ Description\n\n\ndisplayProcessFlow=Process Flow \ndisplayZoomIn=Zoom In\ndisplayZoomOut=Zoom Out\ndisplaySelectContractType = Process Flow Type\ndetailInitiator=Initiator\ndetailRequestReleased=Released\nOverviewstatus  = Status Overview\nUserstatus = User Status\n\ndetailMsgConfirmApprovell = Add Note\ndetailMsgConfirmReject = Add Note\nContractReleasetriggeredWorkflow =   Add Note\nConfirm = Confirm\nCancel = Cancel\nAprove = Approve\nreject = Reject\nDisplay = Display\nHeaderDisplay = Header Display\nEstimatedStatus = Estimated Status\nOriginalStatus= Original Status\nHeaderMiantenance = Header Miantenance\nProject = Project\nRevisedValidTo =  RevisedValid To\n\nServicedesc = Service Description\nConsolidated = Consolidated\nConsolidatedServices = Consolidated Services\nRelease = Submit\n\nSignoffDate = Sign off Date\n\nTotalvariationdurations = Total Variation Durations\nNoofDay = No Day\nNoofMonth = No Month\n\nTotalContractDuration = Total Contract Duration\nDays= Days\nMonths = Months\n\nOmission = Omission\nEdit = Edit\nAdd= Add\nMonth = Month\nPrice = Price\nQuantity = Quantity\nUOM = UOM\nType = Type\nDate = Date\nSave = Save\nDescription = Description\nBoq =  Boq\nAddendum = Addendum\nContractual = Contractual\nPlant = Plant\nService = Service\nVariationOrder = Variation Order\nBuildingServiceGrpView =  Service Grp View\nServiceView  = Service View \nBuildingServiceView = Service Category View\nWholeContract = Whole Contract\nAddendumOrder = Addendum Order\nHeaderMiantenance = Header Miantenance\nSaveChange = Save Change\nShortText = Short Text\nTolerance = Tolerance\nContractTerms = Contract Terms\ndisplayReferences=References\nNote = Note\n\ncommencement = Commencement\nLastChangedBy = Last Changed By\n#__________PurchaseRequisition____________\nPurchaseRequisition = Purchase Requisition\nActivity            = Activity\nNetwork             = Network\nPRNO                = PR NO\nPurchaseRequisitionList = Purchase Requisition List \nAreyousureyouwanttoActivate = Are you sure you want to Activate {0}\nAreyousureyouwanttoDetete =  Are you sure you want to delete {0}\n#--------------------------------------------\nCreatedBy = Created By\nHomeVendor = Contractor\ndisplaySelectVersion=Select version\nDisplayVendor = Contractor\nPleaseEnterTheProject = Please Enter The Project\n\n\n\n',
	"com/cicre/po/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"com.cicre.po","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.15.1","toolsId":"46ca8252-db59-4a6d-99d2-a161b149464b"},"dataSources":{"mainService":{"uri":"odata/v4/catalog/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"com.cicre.po-display":{"semanticObject":"comcicrepo","action":"display","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.131.1","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.cicre.po.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"com.cicre.po.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteWorkList","pattern":":?query:","target":["TargetWorkList"]},{"pattern":"createContract","name":"createContract","target":"createContract"},{"pattern":"ContractPOHeaderSet-{objectId}","name":"object","target":["object"]}],"targets":{"TargetWorkList":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"WorkList","viewName":"WorkList"},"createContract":{"viewPath":"com.cicre.po.view","viewName":"CreateContract","viewLevel":2,"transition":"flip"},"object":{"viewName":"Object","viewId":"object","viewLevel":2}}},"rootView":{"viewName":"com.cicre.po.view.App","type":"XML","async":true,"id":"App"}},"sap.cloud":{"public":true,"service":"lcap.Sesmi_app"},"sap.fiori":{"archeType":"transactional","registrationIds":["comcicrepo"]}}',
	"com/cicre/po/model/formatter.js":function(){
jQuery.sap.declare("com.cicre.po.model.formatter");sap.ui.define([],function(){"use strict";com.cicre.po.model.formatter={numberUnit:function(e){if(!e){return""}return parseFloat(e).toFixed(2)},getDecisionState:function(e){if(e==="APPROVED"){return"Success"}else if(e==="REJECTED"){return"Error"}return"None"},formatDate:function(e){if(e==null){return""}else{jQuery.sap.require("sap.ui.core.format.DateFormat");var r=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd"});return r.format(new Date(e))}},formatDateMs:function(e){if(e==null){return""}else{var r=parseInt(e.match(/\d+/)[0],10);var t=new Date(r);var n=t.toISOString().split("T")[0];return n}},valueState:function(e){if(e=="")return"Error"},NumberWithCommas:function(e){var r=e.toString().split(".");r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return r.join(".")},FormatForsrviceType:function(e,r){if(r===""){return""}else{return e}},FormatForsrviceType_Uom:function(e,r){if(r===""){return""}else{return e}},roundTotalDecimal:function(e,r,t){if(t!=""){if(e){var n=parseFloat(e);if(parseInt(e.toString().split(".")[1])>0){var a=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(r=="EGP"){var a=parseFloat(n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")).toFixed(4)}else{var a=parseFloat(n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")).toFixed(4)}return a}else{var a=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(r=="EGP"){a=a+".0000"}else{a=a+".0000"}return a}}}else{return""}},valuevisible:function(e,r){if(e===""||r==="U"){return false}},numOfRows:function(e){if(e=="Z"){return 1}else{return 2}}}});
},
	"com/cicre/po/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"com/cicre/po/view/App.view.xml":'<mvc:View controllerName="com.cicre.po.controller.App"\n    xmlns:html="http://www.w3.org/1999/xhtml"\n    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"\n    xmlns="sap.m"><App id="app"></App></mvc:View>\n',
	"com/cicre/po/view/CreateContract.view.xml":'<mvc:View controllerName="com.cicre.po.controller.CreateContract" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"\r\n    xmlns:f="sap.ui.layout.form" xmlns:uxap="sap.uxap" xmlns="sap.m" xmlns:ui="sap.ui.table" xmlns:l="sap.ui.layout"\r\n    xmlns:layout="sap.ui.layout" core:require="{ formatMessage: \'sap/base/strings/formatMessage\' }"><Page title="{i18n>Contract}" showNavButton="true" navButtonPress="onNavBack" class="sapUiSizeCompact"><content><uxap:ObjectPageLayout><uxap:headerTitle><uxap:ObjectPageHeader objectSubtitle="{i18n>Header Display}" objectTitle="{i18n>Display}"></uxap:ObjectPageHeader></uxap:headerTitle><uxap:headerContent><FlexBox wrap="Wrap" fitContainer="true"><layout:HorizontalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><ObjectAttribute title="{i18n>DocumentID}" text=" " /><ObjectAttribute title="{i18n>CompanyCode}" text="{localJson>/projectText}" /><ObjectAttribute title="{i18n>Estimated Status}" text=""  visible="false" /><ObjectAttribute title="{i18n>Original Status}" text="" /></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd" visible="false" ><Label text="{i18n>EstimatedContractValue}" /><ObjectNumber\r\n                                    number="{ parts:[{path:\'localJson>/EstimatedContractValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                    state="Success"\r\n                                    unit="{localJson>/Currency}" /></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>OriginalContractValue}" /><ObjectNumber\r\n                                    number="{ parts:[{path:\'localJson>/OriginalContractValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                    state="Success" \r\n                                    unit="{localJson>/Currency}"/></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>VariationOrderValue}" /><ObjectNumber\r\n                                    number="{ parts:[{path:\'localJson>/VariationOrderValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                    emphasized="true" state="Success" \r\n                                    unit="{localJson>/Currency}"/></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>AddendumValue}" /><ObjectNumber state="Success"\r\n                                \r\n                                    number="{ parts:[{path:\'localJson>/AddendumValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                    unit="{localJson>/Currency}" /></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>RevisedContractValue}" /><ObjectNumber\r\n                                number="{ parts:[{path:\'localJson>/RevisedContractValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                state="Success" unit="{localJson>/Currency}" /></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>TotalContractValue}" /><ObjectNumber\r\n                                    number="{ parts:[{path:\'localJson>/TotalContractValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                    state="Success" \r\n                                    unit="{localJson>/Currency}"/></layout:VerticalLayout></layout:HorizontalLayout></FlexBox></uxap:headerContent><uxap:sections><uxap:ObjectPageSection title="{i18n>HeaderMiantenance}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>HeaderMiantenance}"><uxap:blocks><f:SimpleForm layout="ResponsiveGridLayout" labelSpanXL="4" labelSpanL="4"\r\n                                        labelSpanM="4" labelSpanS="4" columnsXL="2" columnsL="2" columnsM="2"\r\n                                        class="editableForm"><f:toolbar><Toolbar><Title text="{i18n>HeaderMaintenance}" /><ToolbarSpacer /></Toolbar></f:toolbar><f:content><core:Title /><Label text="{i18n>CompanyCode}" class="sapUiTinyMarginTop"\r\n                                                /><Input id="idCompanyCode" showValueHelp="true" valueHelpOnly="false"\r\n                                                valueHelpRequest="onDisplaySearchCompDialog"\r\n                                                change="onSearchCompanyChange" ></Input><Label text="{i18n>PurchaseOrganization}" class="sapUiTinyMarginTop"\r\n                                                visible="false" /><Input id="idPurchaseOrganization" showValueHelp="true"\r\n                                                valueHelpOnly="false" valueHelpRequest="onDisplaySearchPOrgDialog"\r\n                                                change="onSearchPOrgChange" visible="false"></Input><Label text="{i18n>PurchaseGroup}" class="sapUiTinyMarginTop"\r\n                                                visible="false" /><Input id="idPurchaseGroup" showValueHelp="true" visible="false"\r\n                                                valueHelpOnly="false" valueHelpRequest="onDisplaySearchPGrpDialog"\r\n                                                change="onSearchPGrpChange"></Input><Label text="{i18n>Plant}" class="sapUiTinyMarginTop" visible="false" /><Input id="idPlant" showValueHelp="true" valueHelpOnly="false"\r\n                                                valueHelpRequest="onDisplaySearchPlantDialog"\r\n                                                change="onSearchPlantChange" visible="false"></Input><Label text="{i18n>Project}" class="sapUiTinyMarginTop" /><Input id="_idSearchByProject" showValueHelp="true" valueHelpOnly="false"\r\n                                                valueHelpRequest="onDisplaySearchProjectDialog"></Input><Label text="{i18n>ContractDescription}" class="sapUiTinyMarginTop" /><TextArea id="idContractDescription" maxLength="40" /><Label text="{i18n>LongDescription}" class="sapUiTinyMarginTop" /><TextArea id="idLongDescription" maxLength="300" /><Label text="{i18n>Vendor}" class="sapUiTinyMarginTop" /><Input id="idVendor" showValueHelp="true" valueHelpOnly="false"\r\n                                                valueHelpRequest="onDisplaySearchVendorDialog"></Input><Label text="{i18n>Currency}" class="sapUiTinyMarginTop" /><Input id="idCurrency" change="onchangeCurrency" ></Input><Label text="{i18n>ContractType}" class="sapUiTinyMarginTop" /><Input id="_idSdocumenttype" showValueHelp="true" valueHelpOnly="false"\r\n                                                valueHelpRequest="onDisplayDocType"></Input><Label text="{i18n>ContractType}" class="sapUiTinyMarginTop" /><Input id="idDocType" showValueHelp="true" valueHelpOnly="false"\r\n                                                visible="false" valueHelpRequest="onDisplaySearchDocTypeDialog"></Input><Label text="{i18n>MeasurementMethod}" class="sapUiTinyMarginTop" /><ComboBox id="idMeasurementMethod" change="changeContractType" items="{path: \'/ValueHelpSet\', \r\n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'MeasMethod\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox><Label text="{i18n>ConstructionType}" class="sapUiTinyMarginTop" /><ComboBox id="idConstructionType" items="{path: \'localJson>/ConstTypeSet\'}"><items><core:Item text="{localJson>IdText}" key="{localJson>IdNumber}" /></items></ComboBox><core:Title /><Label text="{i18n>CreationDate}" class="sapUiTinyMarginTop" /><DatePicker id="idDocumentDate" displayFormat="yyyy-MM-dd"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>SignOffDate}" class="sapUiTinyMarginTop" /><DatePicker id="idDeliveryDate" displayFormat="yyyy-MM-dd"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>ValidFrom}" class="sapUiTinyMarginTop" /><DatePicker id="idValidFromDate" displayFormat="yyyy-MM-dd"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>ValidTo}" class="sapUiTinyMarginTop" /><DatePicker id="idValidToDate" displayFormat="yyyy-MM-dd"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>RevisedValidTo}" class="sapUiTinyMarginTop" /><DatePicker id="idRevisedValidToDate" displayFormat="yyyy-MM-dd"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>IndexMonth}" class="sapUiTinyMarginTop" /><MultiComboBox id="idIndexMonth" items="{localJson>/IndexMonths}"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></MultiComboBox><Label text="{i18n>Consultant}" class="sapUiTinyMarginTop"\r\n                                                visible="false" /><Input id="idConsultant" showValueHelp="true" valueHelpOnly="false"\r\n                                                valueHelpRequest="onDisplaySearchVendorDialog" visible="false"></Input><Label text="{i18n>RefrenceContract}" class="sapUiTinyMarginTop" /><Input id="idRefrenceContract" enabled="{localJson>/editMode}"\r\n                                                showValueHelp="true" valueHelpOnly="false"\r\n                                                value="{localJson>/RefContract}"\r\n                                                valueHelpRequest="onContractValueHelpPress"></Input><Label text="{i18n>serviceType}" class="sapUiTinyMarginTop" /><Input id="idserviceType" enabled="{localJson>/editMode}"\r\n                                                showValueHelp="true" valueHelpOnly="false"\r\n                                                valueHelpRequest="onserviceTypeValueHelpPress"></Input><Label text="{i18n>ResponsiblepersonSS}" visible="false" class="sapUiTinyMarginTop" /><ComboBox id="idResponsiblepersonSS" visible="false"  showSecondaryValues="true" items="{path: \'/ValueHelpSet\', \r\n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'PerSS\'}]}"><items><core:ListItem key="{IdNumber}" text="{IdText}"\r\n                                                        additionalText="{IdNumber}" /></items></ComboBox><Label text="{i18n>ResponsiblepersonIR}" visible="false" class="sapUiTinyMarginTop" /><ComboBox id="idResponsiblepersonIR" visible="false"  showSecondaryValues="true" items="{path: \'/ValueHelpSet\', \r\n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'PerIR\'}]}"><items><core:ListItem key="{IdNumber}" text="{IdText}"\r\n                                                        additionalText="{IdNumber}" /></items></ComboBox><Label text="{i18n>CreationType}"  visible="false" class="sapUiTinyMarginTop" /><Select id="idCreationType"   visible="false" change="changeCreationType" items="{path: \'/ValueHelpSet\', \r\n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'CreationType\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></Select><Label text="{i18n>SupeiorWBS}" class="sapUiTinyMarginTop" /><Input id="idSupeiorWBS"\r\n                                                valueHelpRequest="onDisplaySearchidSupeiorWBSDialog"\r\n                                                showValueHelp="true" valueHelpOnly="false"\r\n                                                enabled="{= ${localJson>/editMode} === false ? false : true  }"></Input><Label text="{i18n> }" class="sapUiTinyMarginTop" visible="false" /><Input id="idContractualSpace"  \tmaxlength="12" type="Number" visible="false" /><Label text="{i18n>Tolerance}" class="sapUiTinyMarginTop" /><Input id="idTolerance" visible="false" change="onChangeTolerance" /><Label text="{i18n>MarkUp%}" class="sapUiTinyMarginTop" /><Input id="idMarkUp" visible="false" /></f:content></f:SimpleForm></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>EstimatedServices}" visible="false"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>EstimatedServices}"><uxap:blocks><ui:Table id="idEstimatedServicesTable"\r\n                                        rows="{ path: \'localJson>/EstimatedContracts\' }" visibleRowCount="5"\r\n                                        selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>EstimatedServices}" level="H2" /><ToolbarSpacer /><Button type="Accept" icon="sap-icon://add"\r\n                                                        press="handleAddEstimatedContract"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="880px" autoResizable="true"><Label text="{i18n>Servicedesc}" /><ui:template><Input value="{localJson>Servicedesc}" maxLength="40"\r\n                                                        placeholder="Enter estimated description ....."\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" /></ui:template></ui:Column><ui:Column width="220px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        change="onChangeAmount"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" /></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><ui:template><Button type="Reject" icon="sap-icon://sys-cancel"\r\n                                                        press="deleteEstimatedContract"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>/estimatedMode} === true ? true : false }" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>Consolidated}"><uxap:subSections><uxap:ObjectPageSubSection><Panel><ui:Table id="idBuildingsBtn" selectionMode="None"\r\n                                        rows="{ path: \'localJson>/BoqConsulidatedItemSet\' }"\r\n                                        visible="{= !${localJso>/ViewCon1}}" visibleRowCount="7"\r\n                                        alternateRowColors="true"><ui:extension><OverflowToolbar><content><Title text="{i18n>ConsolidatedServices}" level="H2" /><Text text="({localJson>/ServicNOCount})"></Text><ToolbarSpacer /><Button type="Accept" icon="sap-icon://add"\r\n                                                        press="handleOpenActionSheet1"\r\n                                                        enabled="{= ${localJson>/estimatedMode} === false ? true : false}" /><Button type="Accept" icon="sap-icon://detail-view"\r\n                                                        press="handleOpenViewSheet" id="ViewBtn" /></content></OverflowToolbar></ui:extension><ui:columns><ui:Column width="120px" autoResizable="true"><Label text="{i18n>Contractual}" /><ui:template><Input value="{localJson>Txt}" enabled="false" /></ui:template></ui:Column><ui:Column width="180px" autoResizable="true"><Label text="{i18n>Servicetype}" /><ui:template><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                        visible="{= !!${localJson>Eancat}}"\r\n                                                        selectedKey="{localJson>Eancat}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="110px" autoResizable="true"><Label text="{i18n>Service}" /><ui:template><Input value="{localJson>Data}" enabled="false" /></ui:template></ui:Column><ui:Column width="500px" autoResizable="true"><Label text="{i18n>ServiceDescription}" /><ui:template><TextArea value="{localJson>LongDesc}" enabled="false"\r\n                                                        width="100%" /></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>UOM}" /><ui:template><Input   value="{localJson>Uom}" \r\n                                                             visible="{= !!${localJson>Eancat}}" enabled="false" /></ui:template></ui:Column><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Quantity}" /><ui:template><Input   \r\n                                                      value="{localJson>Qty}"  \r\n                                                      visible="{= !!${localJson>Eancat}}" enabled="false" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Price}" /><ui:template><Input\r\n                                                         value="{ parts:[{path:\'localJson>PriceUnit\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        maxLength="11" change="onPriceConsolidatedChange"\r\n                                                         visible="{= !!${localJson>Eancat}}"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>Eancat} === \'\' ? false : true }" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true" visible="false"><Label text="{i18n>ProvisionRate}" /><ui:template><Input type="Number"\r\n                                                        value="{localJson>ProvisionRate}"\r\n                                                         visible="{= !!${localJson>Eancat}}"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>Eancat} === \'\' ? false : true }" /></ui:template></ui:Column><ui:Column width="200px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                    value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"                                                      \r\n                                                        enabled="false"\r\n                                                        \r\n                                                        visible="{= ${localJson>Eancat} === \'U\' ? false : !!${localJson>Eancat}}" /></ui:template></ui:Column></ui:columns></ui:Table><Table id="idConsuliatedTable" inset="false" visible="false" growing="true" items="{ path: \'localJson>/BuildingConsulidatedItemSet\', length: 2000000,\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }"><headerToolbar><Toolbar><ToolbarSpacer></ToolbarSpacer><Button tooltip="{i18n>displayViewFilterOptions}" type="Emphasized"\r\n                                                    icon="sap-icon://filter" press="onFilterServices" /><Button type="Accept" icon="sap-icon://detail-view"\r\n                                                    press="handleOpenViewSheet" id="ViewBt" /></Toolbar></headerToolbar><columns><Column width="100px"><Text text="{i18n>Contractual}" /></Column><Column width="150px"><Text text="{i18n>Service type}" /></Column><Column width="80px"><Text text="{i18n>Service}" /></Column><Column width="200px"><Text text="{i18n>ShortText}" /></Column><Column width="100px"><Text text="{i18n>Building}" /></Column><Column hAlign="Center" width="60px"><Text text="{i18n>UOM}" /></Column><Column hAlign="Center" width="80px"><Text text="{i18n>Quantity}" /></Column><Column hAlign="Center" width="80px"><Text text="{i18n>Price}" /></Column><Column hAlign="Center" width="80px"><Text text="{i18n>Amount}" /></Column></columns><items><ColumnListItem><cells><Input value="{localJson>Txt}" width="80px" enabled="false" /><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                        selectedKey="{localJson>Eancat}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox><Input value="{localJson>Data}" width="80px" enabled="false" /><TextArea value="{localJson>LongDesc}" enabled="false"\r\n                                                        width="100%" /><Input value="{localJson>Buildingno}" width="100px"\r\n                                                        enabled="false" /><Input value="{localJson>Uom}" width="60px" enabled="false" /><Input value="{localJson>Qty}" width="80px" enabled="false" /><Input value="{localJson>PriceUnit}" width="80px"\r\n                                                        change="onPriceConsolidatedChange" enabled="false" /><Input\r\n                                                        value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        enabled="false"\r\n                                                        visible="{= ${localJson>Eancat} === \'U\' ? false : true}" /></cells></ColumnListItem></items></Table><ui:Table selectionMode="None" rows="{ path: \'localJson>/forBBuildingConsulidatedItemSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }}" visible="{= ${localJso>/ViewCon2} === true ? false : true}"\r\n                                        visibleRowCount="8" alternateRowColors="true"><ui:extension><OverflowToolbar><content><Title text="{i18n>ConsolidatedServices}" level="H2" /><ToolbarSpacer /><Button tooltip="{i18n>displayViewFilterOptions}"\r\n                                                        id="forBBuildingConsulidatedItemSet" type="Emphasized"\r\n                                                        icon="sap-icon://filter" press="onFilterServices" /><Button type="Accept" icon="sap-icon://detail-view"\r\n                                                        press="handleOpenViewSheet" id="ViewBttt" /></content></OverflowToolbar></ui:extension><ui:columns><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Contractual}" /><ui:template><Input value="{localJson>Txt}" enabled="false" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Servicetype}" /><ui:template><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                        selectedKey="{localJson>Eancat}" \r\n                                                        visible="{= !!${localJson>Eancat}}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Service}" /><ui:template><Input value="{localJson>Data}" enabled="false" /></ui:template></ui:Column><ui:Column width="500px" autoResizable="true"><Label text="{i18n>ServiceDescription}" /><ui:template><TextArea value="{localJson>LongDesc}" enabled="false"\r\n                                                        width="100%" /></ui:template></ui:Column><ui:Column width="65px" autoResizable="true"><Label text="{i18n>Buildingno}" /><ui:template><Input value="{localJson>Buildingno}" enabled="false" /></ui:template></ui:Column><ui:Column width="65px" autoResizable="true"><Label text="{i18n>UOM}" /><ui:template><Input value="{localJson>Uom}" visible="{= !!${localJson>Eancat}}" enabled="false" /></ui:template></ui:Column><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Quantity}" /><ui:template><Input value="{localJson>Qty}" visible="{= !!${localJson>Eancat}}" enabled="false" /></ui:template></ui:Column><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Price}" /><ui:template><Input value="{localJson>PriceUnit}" width="80px"\r\n                                                        change="onPriceConsolidatedChange"\r\n                                                        visible="{= !!${localJson>Eancat}}" enabled="false" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        enabled="false"\r\n                                                        visible="{= ${localJson>Eancat} === \'U\' ? false : !!${localJson>Eancat}}" /></ui:template></ui:Column></ui:columns></ui:Table><ui:Table selectionMode="None" rows="{ path: \'localJson>/ServiceGroupSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' } }" visible="{= ${localJso>/ViewCon3} === true ? false : true}"\r\n                                        visibleRowCount="10" alternateRowColors="true"><ui:extension><OverflowToolbar><content><Title text="{i18n>ConsolidatedServices}" level="H2" /><ToolbarSpacer /><Button tooltip="{i18n>displayViewFilterOptions}" type="Emphasized"\r\n                                                        icon="sap-icon://filter" press="onFilterServices" /><Button type="Accept" icon="sap-icon://detail-view"\r\n                                                        press="handleOpenViewSheet" id="ViewBt3" /></content></OverflowToolbar></ui:extension><ui:columns><ui:Column width="180px" autoResizable="true"><Label text="{i18n>Contractual}" /><ui:template><Input value="{localJson>Txt}" enabled="false" /></ui:template></ui:Column><ui:Column width="180px" autoResizable="true"><Label text="{i18n>ServiceGroup}" /><ui:template><Input value="{localJson>MatlGroup}" enabled="false" /></ui:template></ui:Column><ui:Column width="380px" autoResizable="true"><Label text="{i18n>GroupText}" /><ui:template><Input value="{localJson>Matdesc}" enabled="false" /></ui:template></ui:Column><ui:Column width="160px" autoResizable="true"><Label text="{i18n>NoofBuilding}" /><ui:template><Input value="{localJson>Buildingnum}" enabled="false" /></ui:template></ui:Column><ui:Column width="240px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        enabled="false" /></ui:template></ui:Column></ui:columns></ui:Table></Panel></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>BoQs}" visible="{= ${localJson>/BoqItemSet}.length > 0}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>BoQs}"><uxap:blocks><ui:TreeTable id="TreeTableBasic"\r\n                                        rows="{path:\'localJson>/BoqItemSet\', parameters: {arrayNames:[\'Categories\']}}"\r\n                                        selectionMode="Single" enableSelectAll="false" ariaLabelledBy="title"\r\n                                        visibleRowCount="9"><ui:extension><OverflowToolbar><ToolbarSpacer /><Button text="Collapse all" press="onCollapseAll" /><Button text="Expand all" press="onExpandFirstLevel" /></OverflowToolbar></ui:extension><ui:columns><ui:Column width="12rem"><Label text="Services" /><ui:template><Text text="{localJson>Data}" wrapping="false" /></ui:template></ui:Column><ui:Column width="11rem"><Label text="Service type" /><ui:template><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                        visible="{= !!${localJson>Eancat}}"\r\n                                                        selectedKey="{localJson>Eancat}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="30rem"><Label text="Service Description" /><ui:template><TextArea value="{localJson>LongDesc}" enabled="false" rows="{  parts: \r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{path: \'localJson>Indicator\'}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t] \r\n\t\t\t\t\t\t\t, formatter: \'com.cicre.po.model.formatter.numOfRows\'}" wrapping="false" width="100%"\r\n                                                        visible="{= !!${localJson>LongDesc}}" /></ui:template></ui:Column><ui:Column width="5rem"><Label text="UOM" /><ui:template><Input value="{localJson>Uom}" wrapping="false"\r\n                                                        visible="{= !!${localJson>Uom}}" enabled="false" /></ui:template></ui:Column><ui:Column width="9rem"><Label text="Quantity" /><ui:template><Input value="{localJson>Qty}" wrapping="false" type="Number"\r\n                                                        visible="{= !!${localJson>Qty} === false ? false : ${localJson>Eancat} === \'U\' ? false : true }"\r\n                                                        liveChange="onChangeQty" enabled="false" /></ui:template></ui:Column><ui:Column width="5rem"><Label text="Price" /><ui:template><Input value="{localJson>price}" wrapping="false"\r\n                                                        visible="{= !!${localJson>price}}" enabled="false" /></ui:template></ui:Column><ui:Column width="8rem"><Label text="Amount" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>PriceUnit\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        wrapping="false"\r\n                                                        visible="{= !!${localJson>PriceUnit} === false ? false : ${localJson>Eancat} === \'U\' ? false :  ${localJson>live} === \'one\' ? false : true  }"\r\n                                                        enabled="false" /></ui:template></ui:Column></ui:columns></ui:TreeTable></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>PurchaseRequisition}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>PurchaseRequisition}"><uxap:blocks><core:Fragment fragmentName="com.cicre.po.view.PRfragments.TreePurchaseRequisition" type="XML"  /></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>BuildingBOQList}"  visible="{= ${localJson>/myBuildingSet}.length > 0}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>BuildingBOQList}"><uxap:blocks><ui:Table id="IdBuildingTable" rows="{ path: \'localJson>/myBuildingSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }" visibleRowCount="5" selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>BuildingBOQList} " level="H2" /><Text text="({localJson>/BuildingNO})" level="H2"></Text><ToolbarSpacer /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Contractual Indicator}" /><ui:template><Text text="{localJson>Txt}"></Text></ui:template></ui:Column><ui:Column width="105px" autoResizable="true"><Label text="{i18n>Building}" /><ui:template><Text text="{localJson>BuildingNo}"></Text></ui:template></ui:Column><ui:Column width="107px" autoResizable="true"><Label text="{i18n>Zone}" /><ui:template><Text text="{localJson>Project}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Group}" /><ui:template><Text text="{localJson>Zzgroup}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Model}" /><ui:template><Text text="{localJson>Model}"></Text></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>ModelDesc}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Boq}" /><ui:template><Text text="{localJson>Group}"></Text></ui:template></ui:Column><ui:Column width="250px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>BoqDesc}"></Text></ui:template></ui:Column><ui:Column width="170px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox selectedKey="{localJson>SrvStatus}" enabled="false" items="{path: \'/ValueHelpSet\', \r\n                                    filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'STATUSBoq\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="60px" autoResizable="true"><ui:template><Button width="40px"\r\n                                                        type="{= ${localJson>DelInd} === \'X\' ? \'Accept\' : \'Reject\'}"\r\n                                                        icon="{= ${localJson>DelInd} === \'X\' ? \'sap-icon://undo\' : \'sap-icon://delete\'}"\r\n                                                        press="onDeleteBuilding" /></ui:template></ui:Column></ui:columns></ui:Table><ui:Table id="IdBuildingTable_copy" rows="{ path: \'localJson>/copymyBuildingSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }" visibleRowCount="5" selectionMode="None" visible="false"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>BuildingBOQList} " level="H2" /><Text text="({localJson>/BuildingNO})"></Text><ToolbarSpacer /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Contractual Indicator}" /><ui:template><Text text="{localJson>Txt}"></Text></ui:template></ui:Column><ui:Column width="105px" autoResizable="true"><Label text="{i18n>Building}" /><ui:template><Text text="{localJson>BuildingNo}"></Text></ui:template></ui:Column><ui:Column width="107px" autoResizable="true"><Label text="{i18n>Zone}" /><ui:template><Text text="{localJson>Project}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Group}" /><ui:template><Text text="{localJson>Zzgroup}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Model}" /><ui:template><Text text="{localJson>Model}"></Text></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>ModelDesc}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Boq}" /><ui:template><Text text="{localJson>Group}"></Text></ui:template></ui:Column><ui:Column width="250px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>BoqDesc}"></Text></ui:template></ui:Column><ui:Column width="170px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox items="{localJson>/STATUSBoqlist}" enabled="false"\r\n                                                        selectedKey="{localJson>SrvStatus}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="60px" autoResizable="true"><ui:template><Button width="40px"\r\n                                                        type="{= ${localJson>DelInd} === \'X\' ? \'Accept\' : \'Reject\'}"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== \'A\' }"\r\n                                                        icon="{= ${localJson>DelInd} === \'X\' ? \'sap-icon://undo\' : \'sap-icon://delete\'}"\r\n                                                        press="onDeleteBuilding" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>GeneralBOQList}"  visible="{= ${localJson>/myWBSSet}.length > 0}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>GeneralBOQList}"><uxap:blocks><ui:Table id="IdWBSTable" rows="{ path: \'localJson>/myWBSSet\' }" visibleRowCount="5"\r\n                                        selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>GeneralBOQList} " level="H2" /><Text text="({localJson>/WbslistNo})"></Text><ToolbarSpacer /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="140px" autoResizable="true"><Label text="{i18n>ContractualIndicator}" /><ui:template><Text text="{localJson>Txt}" /></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>Building}" /><ui:template><Text text="{localJson>Model}"></Text></ui:template></ui:Column><ui:Column width="185px" autoResizable="true"><Label text="{i18n>WBSCODE}" /><ui:template><Text text="{localJson>WbsCode}" /></ui:template></ui:Column><ui:Column width="190px" autoResizable="true"><Label text="{i18n>WBSDescription}" /><ui:template><Text text="{localJson>IdText}"></Text></ui:template></ui:Column><ui:Column width="55px" autoResizable="true"><Label text="{i18n>Boq}" /><ui:template><Text text="{localJson>Group}"></Text></ui:template></ui:Column><ui:Column width="280px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>BoqDesc}"></Text></ui:template></ui:Column><ui:Column width="160px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox selectedKey="{localJson>SrvStatus}" enabled="false" items="{path: \'/ValueHelpSet\', \r\n                                    filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'STATUSBoq\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="60px" autoResizable="true"><ui:template><Button width="40px"\r\n                                                        type="{= ${localJson>DelInd} === \'X\' ? \'Accept\' : \'Reject\'}"\r\n                                                        icon="{= ${localJson>DelInd} === \'X\' ? \'sap-icon://undo\' : \'sap-icon://delete\'}"\r\n                                                        press="onDeleteWBS" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection titleUppercase="false" title="{i18n>PurchaseRequisitionList}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>PurchaseRequisitionList}"><uxap:blocks><core:Fragment fragmentName="com.cicre.po.view.PRfragments.PurchaseRequisition" type="XML"  /></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>VariationOrder}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>VariationOrder}"><uxap:blocks><ui:Table visible="true"\r\n                                        rows="{ path: \'localJson>/HeadToHeadVariation\',filters: [{path: \'OrderType\', operator: \'EQ\', value1: \'V\'}] }"\r\n                                        visibleRowCount="5" selectionMode="None"><ui:extension><OverflowToolbar><ToolbarSpacer /><Button type="Accept" icon="sap-icon://add" press="handlevariationOrder"\r\n                                                    enabled="false" /></OverflowToolbar></ui:extension><ui:columns><ui:Column width="80px" autoResizable="true"><Label text="{i18n>VariationOrder}" /><ui:template><Input value="{localJson>UserOrder}" type="Number"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        change="handelValuseUserOrder"\r\n                                                        valueState="{path : \'localJson>OrderDesc\', formatter : \'com.cicre.po.model.formatter.valueState\'}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Input value="{localJson>OrderDesc}"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        valueState="{path : \'localJson>OrderDesc\', formatter : \'com.cicre.po.model.formatter.valueState\'}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Type}" /><ui:template><ComboBox selectedKey="{localJson>Type}"\r\n                                                        change="handleChangeOrderType"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}" items="{path: \'/ValueHelpSet\', \r\n\t\t\t\t\t\t\t\t          filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'OrdType\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Date}" /><ui:template><DatePicker enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        value="{path:\'localJson>OrderDate\', formatter: \'.formatter.formatDate\'}"\r\n                                                        displayFormat="dd-MM-yyyy" valueFormat="yyyy-MM-dd" /></ui:template></ui:Column><ui:Column width="200px" autoResizable="true"><Label text="{i18n>Month}" /><ui:template><MultiComboBox items="{localJson>/IndexMonths}"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        selectedKeys="{localJson>MonthIndex}"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></MultiComboBox></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Add}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>AddValues\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_Add" enabled="false" /></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Omission}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>OmissionValues\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_Omission" enabled="false" /></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>ChangeAmount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_Amount" enabled="false" /></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>No of Day}" /><ui:template><Input value="{localJson>DaysNo}" type="Number"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}" /></ui:template></ui:Column><ui:Column width="120px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox id="idCmboo" items="{localJson>/VStatus}" enabled="false"\r\n                                                        selectedKey="{localJson>Status}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>Release}" /><ui:template><Button press="onReleaseVeriation" text="Confirm"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }" /></ui:template></ui:Column><ui:Column width="75px" autoResizable="true"><Label text="{i18n>Cancel}" /><ui:template><Button press="onCancleVeriation" text="Cancel"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} === \'R\' ? ${localJson>VarStatus} !== \'R\' :  false }" /></ui:template></ui:Column><ui:Column width="41px" autoResizable="true"><ui:template><Button icon="sap-icon://detail-view"\r\n                                                        press="onPressVariationOrder" /></ui:template></ui:Column><ui:Column width="41px" autoResizable="true"><ui:template><Button icon="sap-icon://detail-view"\r\n                                                        press="onPressVariationOrdersrv" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>Addendum}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>Addendum}"><uxap:blocks><ui:Table visible="true" rows="false" visibleRowCount="5" selectionMode="None"><ui:extension><OverflowToolbar><ToolbarSpacer /><Button type="Accept" icon="sap-icon://add" press="handdAdendum"\r\n                                                    enabled="false" /></OverflowToolbar></ui:extension><ui:columns><ui:Column width="80px" autoResizable="true"><Label text="{i18n>AddendumOrder}" /><ui:template><Input value="{localJson>UserOrder}" type="Number"\r\n                                                        change="handelValuseUserOrder"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        valueState="{path : \'localJson>OrderDesc\', formatter : \'com.cicre.po.model.formatter.valueState\'}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Input value="{localJson>OrderDesc}"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        valueState="{path : \'localJson>OrderDesc\', formatter : \'com.cicre.po.model.formatter.valueState\'}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Type}" /><ui:template><ComboBox selectedKey="{localJson>Type}"\r\n                                                        change="handleChangeOrderTypeA"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        items="{path: \'/ValueHelpSet\',filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'OrdType\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Date}" /><ui:template><DatePicker enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        value="{path:\'localJson>OrderDate\', formatter: \'.formatter.formatDate\'}"\r\n                                                        displayFormat="dd-MM-yyyy" valueFormat="yyyy-MM-dd" /></ui:template></ui:Column><ui:Column width="200px" autoResizable="true"><Label text="{i18n>Month}" /><ui:template><MultiComboBox\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}" items="{path: \'/ValueHelpSet\', \r\n\t\t\t\t\t\t\t\t            filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'MONTHS\'}]}"\r\n                                                        selectedKeys="{localJson>MonthIndex}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></MultiComboBox></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Add}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>AddValues\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_AddAddendum" enabled="false" /></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Omission}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>OmissionValues\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_OmissionAddendum" enabled="false" /></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>ChangeAmount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_AmountAddendum" enabled="false" /></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>No of Day}" /><ui:template><Input value="{localJson>DaysNo}" type="Number"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}" /></ui:template></ui:Column><ui:Column width="120px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox items="{localJson>/VStatus}" enabled="false"\r\n                                                        selectedKey="{localJson>Status}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>Release}" /><ui:template><Button press="onReleaseVeriation" text="Confirm"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }" /></ui:template></ui:Column><ui:Column width="75px" autoResizable="true"><Label text="{i18n>Cancel}" /><ui:template><Button press="onCancleVeriation" text="Cancel"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} === \'R\' }" /></ui:template></ui:Column><ui:Column width="41px" autoResizable="true"><ui:template><Button icon="sap-icon://detail-view"\r\n                                                        press="onPressVariationOrder" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection titleUppercase="false" title ="{i18n>Note}" ><uxap:subSections><uxap:ObjectPageSubSection><TextArea  value="{localJson>/PoNote}" id="idNote" change="onChangeNote" rows=\'4\'  width="100%"/></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>attachmentName}"><uxap:subSections><uxap:ObjectPageSubSection><List items="{localJson>/AttachmentSet}" delete="onAttachmentDelete"><headerToolbar><Toolbar><ToolbarSpacer /><Button icon="sap-icon://delete" type="Reject"\r\n                                                tooltip="{i18n>attachmentDelete}" press="onListDeletePress"\r\n                                                enabled="{localJson>/editMode}" /><Button icon="sap-icon://add" type="Accept" tooltip="{i18n>attachmentAdd}"\r\n                                                press="handleAddAttachmentPress" enabled="{localJson>/editMode}" /></Toolbar></headerToolbar><items><StandardListItem visible="{= ${localJson>Flag} !== \'D\'}"\r\n                                            icon="sap-icon://document"\r\n                                            title="{localJson>Filename}.{localJson>Extension}" type="Active"\r\n                                            press="_onAttachmentItemPress" /></items></List></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection></uxap:sections></uxap:ObjectPageLayout></content><footer><Toolbar><content><Button icon="sap-icon://message-popup" text="{localJson>/MessagesLength}" type="Reject"\r\n                        press="onPressMessagePopover" /><ToolbarSpacer /><Button type="Emphasized" id="idNewTermsBtn" press="onSavePress" text="{i18n>Create}" /></content></Toolbar></footer></Page></mvc:View>',
	"com/cicre/po/view/Object.view.xml":'<mvc:View controllerName="com.cicre.po.controller.Object" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:commons="sap.suite.ui.commons"\r\n    xmlns:f="sap.ui.layout.form" xmlns:uxap="sap.uxap" xmlns="sap.m" xmlns:ui="sap.ui.table" xmlns:l="sap.ui.layout"\r\n    xmlns:layout="sap.ui.layout" core:require="{ formatMessage: \'sap/base/strings/formatMessage\' }"><Page title="{i18n>Contract}" showNavButton="true" navButtonPress="onNavBack" class="sapUiSizeCompact"><content><uxap:ObjectPageLayout><uxap:headerTitle><uxap:ObjectPageHeader objectSubtitle="{i18n>HeaderDisplay}" objectTitle="{i18n>Display}"></uxap:ObjectPageHeader></uxap:headerTitle><uxap:headerContent><layout:HorizontalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><ObjectAttribute title="{i18n>DocumentID}"\r\n                                text="{= ${localJson>/PurchDoc} === \'\' ? ${localJson>/PoNumber} : ${localJson>/PurchDoc}}" /><ObjectAttribute title="{i18n>CompanyCode}" text="{localJson>/CompDesc} " /><ObjectAttribute title="{i18n>EstimatedStatus}"  visible="false" text="{localJson>/Status}" /><ObjectAttribute title="{i18n>OriginalStatus}" text="{localJson>/StatusOr}" /></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd" visible="false"><Label text="{i18n>EstimatedContractValue}" /><ObjectNumber\r\n                                number="{ parts:[{path:\'localJson>/EstimatedContractValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                state="Success" \r\n                                unit="{localJson>/Currency}"/></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>OriginalContractValue}" /><ObjectNumber\r\n                                number="{ parts:[{path:\'localJson>/OriginalContractValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                state="Success" unit="{localJson>/Currency}" /></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>VariationOrderValue}" unit="{localJson>/Currency}" /><ObjectNumber\r\n                                number="{ parts:[{path:\'localJson>/VariationOrderValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                state="Success" unit="{localJson>/Currency}"/></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>AddendumValue}" /><ObjectNumber\r\n                                number="{ parts:[{path:\'localJson>/AddendumValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                state="Success" unit="{localJson>/Currency}" /></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>RevisedContractValue}" /><ObjectNumber\r\n                                number="{ parts:[{path:\'localJson>/RevisedContractValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                state="Success" unit="{localJson>/Currency}" /></layout:VerticalLayout><layout:VerticalLayout class="sapUiSmallMarginBeginEnd"><Label text="{i18n>TotalContractValue}" /><ObjectNumber\r\n                                number="{ parts:[{path:\'localJson>/TotalContractValue\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                state="Success"\r\n                                unit="{localJson>/Currency}" /></layout:VerticalLayout></layout:HorizontalLayout></uxap:headerContent><uxap:sections><uxap:ObjectPageSection title="{i18n>HeaderMiantenance}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>HeaderMiantenance}"><uxap:blocks><f:SimpleForm id="idObjectMaintForm" layout="ResponsiveGridLayout" labelSpanXL="4"\r\n                                        labelSpanL="4" labelSpanM="4" labelSpanS="4" columnsXL="2" columnsL="2"\r\n                                        columnsM="2" class="editableForm"><f:toolbar><Toolbar><Title text="{i18n>HeaderMaintenance}" /><ToolbarSpacer /></Toolbar></f:toolbar><f:content><core:Title /><Label text="{i18n>CompanyCode: }" class="sapUiTinyMarginTop"  /><ComboBox selectedKey="{localJson>/CompCode}" enabled="false"  width="100%"\r\n                                            \r\n                                             id="idCompCode" items="{path: \'/ValueHelpSet\', \r\n\t\t\t\t\t\t\t\t              \tfilters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'CompCode\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox><Label text="{i18n>PurchaseOrganization}" visible="false"\r\n                                                class="sapUiTinyMarginTop" /><ComboBox selectedKey="{localJson>/PurchOrg}" visible="false"\r\n                                                enabled="false" items="{path: \'/ValueHelpSet\', \r\n\t\t\t\t\t\t\t\t\tfilters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'PORG\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox><Label text="{i18n>PurchaseGroup}" visible="false"\r\n                                                class="sapUiTinyMarginTop" /><ComboBox selectedKey="{localJson>/PurGroup}" visible="false"\r\n                                                enabled="false" items="{path: \'/ValueHelpSet\', \r\n\t\t\t\t\t\t\t\t\tfilters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'PGRP\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox><Label text="{i18n>Project}" class="sapUiTinyMarginTop" /><ComboBox selectedKey="{localJson>/ProjetTemp}" enabled="false"\r\n                                                id="idProject" items="{path: \'/ValueHelpSet\', \r\n\t\t\t\t\t\t\t\t\tfilters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'PROJ\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox><Label text="{i18n>ContractDescription}" class="sapUiTinyMarginTop" /><TextArea id="idContractDescription" maxLength="40"\r\n                                                enabled="{localJson>/editMode}" value="{localJson>/ContractDesc}" /><Label text="{i18n>LongDescription}" class="sapUiTinyMarginTop" /><TextArea id="idLongDescription" maxLength="300"\r\n                                                enabled="{localJson>/editMode}" value="{localJson>/LongDesc}" /><Label text="{i18n>Vendor}" class="sapUiTinyMarginTop" /><Input id="idVendor" showValueHelp="true" valueHelpOnly="false"\r\n                                                enabled="{= ${localJson>/editMode} &amp;&amp; ${localJson>/ReleaseStatus} !== \'RE\' }"\r\n                                                valueHelpRequest="onDisplaySearchVendorDialog"></Input><Label text="{i18n>Currency}" class="sapUiTinyMarginTop" /><Input id="idCurrency" change="onchangeCurrency"  value="{localJson>/Currency}"\r\n                                                enabled="{= ${localJson>/editMode} &amp;&amp; ${localJson>/ReleaseStatus} !== \'RE\' }"></Input><Label text="{i18n>ContractType}" class="sapUiTinyMarginTop" /><ComboBox selectedKey="{localJson>/DocType}" enabled="false" items="{path: \'/ValueHelpSet\', \r\n\t\t\t\t\t\t\t\t\tfilters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'DOC_TYPE\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox><Label text="{i18n>MeasurementMethod}" class="sapUiTinyMarginTop" /><ComboBox id="idMeasurementMethod" change="changeContractType"\r\n                                                enabled="{localJson>/editMode}" selectedKey="{localJson>/MeasMethod}"\r\n                                                items="{path: \'/ValueHelpSet\', \r\n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'MeasMethod\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox><Label text="{i18n>ConstructionType}" class="sapUiTinyMarginTop" /><ComboBox id="idConstructionType"\r\n                                                selectedKey="{localJson>/ConstructionType}"\r\n                                                enabled="{localJson>/editMode}" items="{path: \'/ValueHelpSet\', \r\n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'ConstType\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox><core:Title /><Label text="{i18n>CreationDate}" class="sapUiTinyMarginTop" /><DatePicker id="idDocumentDate" \r\n                                                enabled="false"\r\n                                                value="{path : \'localJson>/DocDate\', formatter : \'com.cicre.po.model.formatter.formatDateMs\'}"\r\n                                                displayFormat="dd-MM-yyyy"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>SignOffDate}" class="sapUiTinyMarginTop" /><DatePicker id="idSignOffDate" \r\n                                                enabled="false"\r\n                                                value="{path : \'localJson>/SigninDate\', formatter : \'com.cicre.po.model.formatter.formatDateMs\'}"\r\n                                                displayFormat="dd-MM-yyyy"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>ValidFrom}" class="sapUiTinyMarginTop" /><DatePicker id="idValidFrom" \r\n                                                enabled="false"\r\n                                                value="{path : \'localJson>/ValidFrom\', formatter : \'com.cicre.po.model.formatter.formatDateMs\'}"\r\n                                                displayFormat="dd-MM-yyyy"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>ValidTo}" class="sapUiTinyMarginTop" /><DatePicker id="idValidTo" \r\n                                                enabled="false"\r\n                                                value="{path : \'localJson>/ValidTo\', formatter : \'com.cicre.po.model.formatter.formatDateMs\'}"\r\n                                                displayFormat="dd-MM-yyyy"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>RevisedValidTo}" class="sapUiTinyMarginTop" /><DatePicker id="idRevisedValidTo" \r\n                                                enabled="false"\r\n                                                value="{path : \'localJson>/RevisedValidTo\', formatter : \'com.cicre.po.model.formatter.formatDateMs\'}"\r\n                                                displayFormat="dd-MM-yyyy"\r\n                                                valueFormat="yyyy-MM-dd" /><Label text="{i18n>IndexMonth}" class="sapUiTinyMarginTop" /><MultiComboBox id="idIndexMonth" items="{localJson>/IndexMonths}"\r\n                                                enabled="{localJson>/editMode}" selectedKeys="{localJson>/IndexMonth}"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></MultiComboBox><Label text="{i18n>Consultant}" class="sapUiTinyMarginTop"\r\n                                                visible="false" /><Input visible="false" id="idConsultant" showValueHelp="true"\r\n                                                valueHelpOnly="false" enabled="{localJson>/editMode}"\r\n                                                valueHelpRequest="onDisplaySearchVendorDialog"></Input><Label text="{i18n>RefrenceContract}" class="sapUiTinyMarginTop" /><Input id="idRefrenceContract" enabled="{localJson>/editMode}"\r\n                                                showValueHelp="true" valueHelpOnly="false"\r\n                                                value="{localJson>/RefContract}"\r\n                                                valueHelpRequest="onContractValueHelpPress"></Input><Label text="{i18n>serviceType}" class="sapUiTinyMarginTop" /><Input id="idserviceType" showValueHelp="true" valueHelpOnly="false"\r\n                                                enabled="{localJson>/editMode}"\r\n                                                valueHelpRequest="onserviceTypeValueHelpPress"></Input><Label text="{i18n>ResponsiblepersonSS}" visible="false"  class="sapUiTinyMarginTop" /><ComboBox id="idResponsiblepersonSS"  visible="false" showSecondaryValues="true"\r\n                                                enabled="{localJson>/editMode}" selectedKey="{localJson>/Ss}" items="{path: \'/ValueHelpSet\', \r\n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'PerSS\'}]}"><items><core:ListItem key="{IdNumber}" text="{IdText}"\r\n                                                        additionalText="{IdNumber}" /></items></ComboBox><Label text="{i18n>ResponsiblepersonIR}" visible="false" class="sapUiTinyMarginTop" /><ComboBox id="idResponsiblepersonIR" visible="false" showSecondaryValues="true"\r\n                                                enabled="{localJson>/editMode}" selectedKey="{localJson>/Ir}" items="{path: \'/ValueHelpSet\', \r\n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'PerIR\'}]}"><items><core:ListItem key="{IdNumber}" text="{IdText}"\r\n                                                        additionalText="{IdNumber}" /></items></ComboBox><Label text="{i18n>CreationType}"  visible="false" class="sapUiTinyMarginTop" /><Select id="idCreationType"  visible="false" change="changeCreationType"\r\n                                                selectedKey="{localJson>/CreationType}"\r\n                                                enabled="{= ${localJson>/editMode} === false ? false : ${localJson>/StatusOr} === \'Released Original\' &amp;&amp; ${localJson>/Status} !== \'COMPOSING\' ? false : true}"\r\n                                               items="{localJson>/CreationTypeList}"><items><core:Item text="{localJson>text}" key="{localJson>id}"  /></items></Select><Label text="{i18n>SupeiorWBS}" class="sapUiTinyMarginTop" /><Input id="idSupeiorWBS" value="{localJson>/WbsDesc}"\r\n                                                enabled="{= ${localJson>/editMode} === false ? false :  true}"\r\n                                                valueHelpRequest="onDisplaySearchidSupeiorWBSDialog"\r\n                                                showValueHelp="true" valueHelpOnly="false" visible="true"></Input><Label text="{i18n> }" class="sapUiTinyMarginTop"  visible ="false"/><Input id="idContractualSpace" value="{localJson>/ContractualSpace}" visible ="false"\r\n                                             enabled="{= ${localJson>/editMode} &amp;&amp; ${localJson>/ReleaseStatus} !== \'RE\' }"\r\n                                            maxlength="12" type="Number" /><Label text="{i18n>MarkUp}" class="sapUiTinyMarginTop" /><Input id="idMarkUp"\r\n                                                visible="{= ${localJson>/MeasMethod} === \'COST\' ? true : false}"\r\n                                                value="{localJson>/MarkUp}" enabled="{localJson>/editMode}" /></f:content></f:SimpleForm></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>EstimatedServices}" visible="false" ><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>EstimatedServices}"><uxap:blocks><ui:Table id="idEstimatedServicesTable"\r\n                                        rows="{ path: \'localJson>/EstimatedContracts\' }" visibleRowCount="6"\r\n                                        selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>EstimatedServices}" level="H2" /><ToolbarSpacer /><Button type="Accept" icon="sap-icon://add"\r\n                                                        press="handleAddEstimatedContract"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="880px" autoResizable="true"><Label text="{i18n>Servicedesc}" /><ui:template><Input value="{localJson>Servicedesc}" maxLength="40"\r\n                                                        placeholder="Enter estimated description ....."\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" /></ui:template></ui:Column><ui:Column width="220px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        change="onChangeAmount"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" /></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><ui:template><Button type="Reject" icon="sap-icon://sys-cancel"\r\n                                                        press="deleteEstimatedContract"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>/estimatedMode} === true ? true : false }" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>Consolidated}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>Consolidated}"><uxap:blocks><ui:Table id="idConsulidatedTable"\r\n                                        visible="{= ${localJso>/ViewCon1} === true ? false : true}" rows="{ path: \'localJson>/BoqConsulidatedItemSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }" visibleRowCount="8" selectionMode="None"><ui:extension><OverflowToolbar><content><Title text="{i18n>ConsolidatedServices}" level="H2" /><Text text="({localJson>/ServicNOCount})"></Text><ToolbarSpacer /><Button icon="sap-icon://download" press="DataExport" /><Button type="Accept" icon="sap-icon://add"\r\n                                                        press="handleOpenActionSheet" id="idBuildingsBtn"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== \'A\'  }" /><Button type="Accept" icon="sap-icon://detail-view"\r\n                                                        press="handleOpenViewSheet" id="ViewBtn" /></content></OverflowToolbar></ui:extension><ui:columns><ui:Column width="120px" autoResizable="true"><Label text="{i18n>Contractual}" /><ui:template><Input value="{localJson>Txt}" enabled="false" /></ui:template></ui:Column><ui:Column width="180px" autoResizable="true"><Label text="{i18n>Servicetype}" /><ui:template><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                        visible="{= !!${localJson>Eancat}}"\r\n                                                        selectedKey="{localJson>Eancat}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="110px" autoResizable="true"><Label text="{i18n>Service}" /><ui:template><Input value="{localJson>Data}" enabled="false" /></ui:template></ui:Column><ui:Column width="500px" autoResizable="true"><Label text="{i18n>ServiceDescription}" /><ui:template><TextArea value="{localJson>LongDesc}" enabled="false"\r\n                                                        width="100%" /></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>UOM}" /><ui:template><Input \r\n                                                     value="{localJson>Uom}" \r\n                                                     visible="{= !!${localJson>Eancat}}"\r\n                                                    enabled="false" /></ui:template></ui:Column><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Quantity}" /><ui:template><Input\r\n                                                    value="{localJson>Qty}"\r\n                                                    visible="{= !!${localJson>Eancat}}"\r\n                                                    \r\n                                                    enabled="false" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Price}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>PriceUnit\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                         visible="{= !!${localJson>Eancat}}"\r\n                                                        maxLength="11" change="onPriceConsolidatedChange"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :${localJson>SrvStatus} !== \'A\' ? true : false}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true" visible="false"><Label text="{i18n>ProvisionRate}" /><ui:template><Input \r\n                                                        change="onProvisionRateChange"\r\n                                                        visible="{= !!${localJson>Eancat}}"\r\n                                                        value="{localJson>ProvisionRate}"                                                  \r\n                                                        type="Number"\r\n                                                          enabled="{= ${localJson>/editMode} === false ? false :${localJson>SrvStatus} !== \'A\' ? true : false}"/></ui:template></ui:Column><ui:Column width="200px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                     value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        enabled="false"\r\n                                                        visible="{= ${localJson>Eancat} === \'U\' ? false : !!${localJson>Eancat}}" /></ui:template></ui:Column></ui:columns></ui:Table><Table id="idConsuliatedTable" visible="false" items="{ path: \'localJson>/BuildingConsulidatedItemSet\',length: 2000000,\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }"><headerToolbar></headerToolbar><columns><Column width="100px"><Text text="{i18n>Contractual}" /></Column><Column width="150px"><Text text="{i18n>Service type}" /></Column><Column width="80px"><Text text="{i18n>Service}" /></Column><Column width="200px"><Text text="{i18n>ShortText}" /></Column><Column width="100px"><Text text="{i18n>Building}" /></Column><Column hAlign="Center" width="60px"><Text text="{i18n>UOM}" /></Column><Column hAlign="Center" width="80px"><Text text="{i18n>Quantity}" /></Column><Column hAlign="Center" width="80px"><Text text="{i18n>Price}" /></Column><Column hAlign="Center" width="80px"><Text text="{i18n>Amount}" /></Column></columns><items><ColumnListItem><cells><Input value="{localJson>Txt}" width="80px" enabled="false" /><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                        selectedKey="{localJson>Eancat}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox><Input value="{localJson>Data}" width="80px" enabled="false" /><TextArea value="{localJson>LongDesc}" enabled="false"\r\n                                                        width="100%" /><Input value="{localJson>Buildingno}" width="100px"\r\n                                                        enabled="false" /><Input value="{localJson>Uom}" width="60px" enabled="false" /><Input value="{localJson>Qty}" width="80px" enabled="false" /><Input value="{localJson>PriceUnit}" width="80px"\r\n                                                        change="onPriceConsolidatedChange" enabled="false" /><Input\r\n                                                        value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        enabled="false"\r\n                                                        visible="{= ${localJson>Eancat} === \'U\' ? false : true}" /></cells></ColumnListItem></items></Table><ui:Table id="idConsuliatedTableBuilding"\r\n                                        visible="{= ${localJso>/ViewCon2} === true ? false : true}" rows="{ path: \'localJson>/forBBuildingConsulidatedItemSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }" visibleRowCount="8" selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>ConsolidatedServices}" level="H2" /><ToolbarSpacer /><Button tooltip="{i18n>displayViewFilterOptions}"\r\n                                                        id="forBBuildingConsulidatedItemSet" type="Emphasized"\r\n                                                        icon="sap-icon://filter" press="onFilterServices" /><Button type="Accept" icon="sap-icon://detail-view"\r\n                                                        press="handleOpenViewSheet" id="ViewBttt" /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="120px" autoResizable="true"><Label text="{i18n>Contractual}" /><ui:template><Input value="{localJson>Txt}" enabled="false" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Servicetype}" /><ui:template><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                    visible="{= !!${localJson>Eancat}}"\r\n                                                        selectedKey="{localJson>Eancat}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Service}" /><ui:template><Input value="{localJson>Data}" enabled="false" /></ui:template></ui:Column><ui:Column width="500px" autoResizable="true"><Label text="{i18n>ServiceDescription}" /><ui:template><TextArea value="{localJson>LongDesc}" enabled="false"\r\n                                                        width="100%" /></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Buildingno}" /><ui:template><Input value="{localJson>Buildingno}" enabled="false" /></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>UOM}" /><ui:template><Input value="{localJson>Uom}" visible="{= !!${localJson>Eancat}}" enabled="false" /></ui:template></ui:Column><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Quantity}" /><ui:template><Input value="{localJson>Qty}" visible="{= !!${localJson>Eancat}}" enabled="false" /></ui:template></ui:Column><ui:Column width="100px" autoResizable="true"><Label text="{i18n>Price}" /><ui:template><Input value="{localJson>PriceUnit}" \r\n                                                    \r\n                                                    width="80px"\r\n                                                        change="onPriceConsolidatedChange" visible="{= !!${localJson>Eancat}}" enabled="false" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        enabled="false"\r\n                                                        visible="{= ${localJson>Eancat} === \'U\' ? false : !!${localJson>Eancat}}" /></ui:template></ui:Column></ui:columns></ui:Table><ui:Table id="idConsuliatedTableGroup"\r\n                                        visible="{= ${localJso>/ViewCon3} === true ? false : true}" rows="{ path: \'localJson>/ServiceGroupSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }" visibleRowCount="10" selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>ConsolidatedServices}" level="H2" /><ToolbarSpacer /><Button tooltip="{i18n>displayViewFilterOptions}" type="Emphasized"\r\n                                                        icon="sap-icon://filter" press="onFilterServices" /><Button type="Accept" icon="sap-icon://detail-view"\r\n                                                        press="handleOpenViewSheet" id="ViewBt3" /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="180px" autoResizable="true"><Label text="{i18n>Contractual}" /><ui:template><Input value="{localJson>Txt}" enabled="false" /></ui:template></ui:Column><ui:Column width="180px" autoResizable="true"><Label text="{i18n>ServiceGroup}" /><ui:template><Input value="{localJson>MatlGroup}" enabled="false" /></ui:template></ui:Column><ui:Column width="380px" autoResizable="true"><Label text="{i18n>GroupText}" /><ui:template><Input value="{localJson>Matdesc}" enabled="false" /></ui:template></ui:Column><ui:Column width="160px" autoResizable="true"><Label text="{i18n>NoofBuilding}" /><ui:template><Input value="{localJson>Buildingnum}" enabled="false" /></ui:template></ui:Column><ui:Column width="240px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        enabled="false" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>BoQs}" visible="{= ${localJson>/BoqItemSet}.length > 0}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>BoQs}"><uxap:blocks><ui:TreeTable id="TreeTableBasic"\r\n                                        rows="{path:\'localJson>/BoqItemSet\', parameters: {arrayNames:[\'Categories\']}}"\r\n                                        selectionMode="Single" enableSelectAll="false" ariaLabelledBy="title"\r\n                                        visibleRowCount="9"><ui:extension><OverflowToolbar><ToolbarSpacer /><Button text="Collapse all" press="onCollapseAll" /><Button text="Expand all" press="onExpandFirstLevel" /></OverflowToolbar></ui:extension><ui:columns><ui:Column width="12rem"><Label text="Services" /><ui:template><Input value="{localJson>Data}" wrapping="false" enabled="false" /></ui:template></ui:Column><ui:Column width="11rem"><Label text="Service type" /><ui:template><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                        visible="{= !!${localJson>Eancat}}"\r\n                                                        selectedKey="{localJson>Eancat}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="30rem"><Label text="Service Description" /><ui:template><TextArea value="{localJson>LongDesc}" enabled="false" rows="{  parts: \r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{path: \'localJson>Indicator\'}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t] \r\n\t\t\t\t\t\t\t, formatter: \'com.cicre.po.model.formatter.numOfRows\'}" wrapping="false" width="100%"\r\n                                                        visible="{= !!${localJson>LongDesc}}" /></ui:template></ui:Column><ui:Column width="4rem"><Label text="UOM" /><ui:template><Input value="{localJson>Uom}" wrapping="false"\r\n                                                        visible="{= !!${localJson>Uom}}" enabled="false" /></ui:template></ui:Column><ui:Column width="9rem"><Label text="Quantity" /><ui:template><Input value="{localJson>Qty}" enabled="false" type="Number"\r\n                                                        change="onChangeQty"\r\n                                                        visible="{= !!${localJson>Qty} === false ? false : ${localJson>Eancat} === \'U\' ? false : true }" /></ui:template></ui:Column><ui:Column width="6rem"><Label text="Price" /><ui:template><Input value="{localJson>Price}" enabled="false"\r\n                                                        visible="{= !!${localJson>Price}}" /></ui:template></ui:Column><ui:Column width="9rem"><Label text="Amount" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>PriceUnit\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        visible="{= !!${localJson>PriceUnit} === false ? false : ${localJson>Eancat} === \'U\' ? false :  ${localJson>live} === \'one\' ? false : true  }"\r\n                                                        wrapping="false" enabled="false" /></ui:template></ui:Column></ui:columns></ui:TreeTable></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>PurchaseRequisition}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>PurchaseRequisition}"><uxap:blocks><core:Fragment fragmentName="com.cicre.po.view.PRfragments.TreePurchaseRequisition" type="XML"  /></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>BuildingBOQList}"  visible="{= ${localJson>/myBuildingSet}.length > 0}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>BuildingBOQList}"><uxap:blocks><ui:Table id="IdBuildingTable" rows="{ path: \'localJson>/myBuildingSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }" visibleRowCount="7" selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>BuildingBOQList} " level="H2" /><Text text="({localJson>/BuildingNO})"></Text><ToolbarSpacer /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="100px" autoResizable="true"><Label text="{i18n>ContractualIndicator}" /><ui:template><Text text="{localJson>Txt}"></Text></ui:template></ui:Column><ui:Column width="105px" autoResizable="true"><Label text="{i18n>Building}" /><ui:template><Text text="{localJson>BuildingNo}"></Text></ui:template></ui:Column><ui:Column width="107px" autoResizable="true"><Label text="{i18n>Zone}" /><ui:template><Text text="{localJson>Project}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Group}" /><ui:template><Text text="{localJson>Zzgroup}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Model}" /><ui:template><Text text="{localJson>Model}"></Text></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>ModelDesc}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Boq}" /><ui:template><Text text="{localJson>Group}"></Text></ui:template></ui:Column><ui:Column width="250px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>BoqDesc}"></Text></ui:template></ui:Column><ui:Column width="170px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox items="{localJson>/STATUSBoqlist}" enabled="false"\r\n                                                        selectedKey="{localJson>SrvStatus}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="60px" autoResizable="true"><ui:template><Button width="40px"\r\n                                                        type="{= ${localJson>DelInd} === \'X\' ? \'Accept\' : \'Reject\'}"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== \'A\' }"\r\n                                                        icon="{= ${localJson>DelInd} === \'X\' ? \'sap-icon://undo\' : \'sap-icon://delete\'}"\r\n                                                        press="onDeleteBuilding" /></ui:template></ui:Column></ui:columns></ui:Table><ui:Table id="IdBuildingTable_copy" rows="{ path: \'localJson>/copymyBuildingSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }" visibleRowCount="5" selectionMode="None" visible="false"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>BuildingBOQList} " level="H2" /><Text text="({localJson>/BuildingNO})"></Text><ToolbarSpacer /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="100px" autoResizable="true"><Label text="{i18n>ContractualIndicator}" /><ui:template><Text text="{localJson>Txt}"></Text></ui:template></ui:Column><ui:Column width="105px" autoResizable="true"><Label text="{i18n>Building}" /><ui:template><Text text="{localJson>BuildingNo}"></Text></ui:template></ui:Column><ui:Column width="107px" autoResizable="true"><Label text="{i18n>Zone}" /><ui:template><Text text="{localJson>Project}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Group}" /><ui:template><Text text="{localJson>Zzgroup}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Model}" /><ui:template><Text text="{localJson>Model}"></Text></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>ModelDesc}"></Text></ui:template></ui:Column><ui:Column width="70px" autoResizable="true"><Label text="{i18n>Boq}" /><ui:template><Text text="{localJson>Group}"></Text></ui:template></ui:Column><ui:Column width="250px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>BoqDesc}"></Text></ui:template></ui:Column><ui:Column width="170px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox items="{localJson>/STATUSBoqlist}" enabled="false"\r\n                                                        selectedKey="{localJson>SrvStatus}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="60px" autoResizable="true"><ui:template><Button width="40px"\r\n                                                        type="{= ${localJson>DelInd} === \'X\' ? \'Accept\' : \'Reject\'}"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== \'A\' }"\r\n                                                        icon="{= ${localJson>DelInd} === \'X\' ? \'sap-icon://undo\' : \'sap-icon://delete\'}"\r\n                                                        press="onDeleteBuilding" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>GeneralBOQList}"  visible="{= ${localJson>/myWBSSet}.length > 0}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>GeneralBOQList}"><uxap:blocks><ui:Table id="IdWBSTable" rows="{ path: \'localJson>/myWBSSet\',\r\n\t\t\t\t\t\t\t\t\t sorter : {\r\n                                     path : \'sortNum\' }\r\n                                                 }" visibleRowCount="5" selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>GeneralBOQList} " level="H2" /><Text text="({localJson>/WbslistNo})"></Text><ToolbarSpacer /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="140px" autoResizable="true"><Label text="{i18n>ContractualIndicator}" /><ui:template><Text text="{localJson>Txt}"></Text></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>Building}" /><ui:template><Text text="{localJson>Model}"></Text></ui:template></ui:Column><ui:Column width="185px" autoResizable="true"><Label text="{i18n>WBSCODE}" /><ui:template><Text text="{localJson>WbsCode}" /></ui:template></ui:Column><ui:Column width="190px" autoResizable="true"><Label text="{i18n>WBSDescription}" /><ui:template><Text text="{localJson>IdText}"></Text></ui:template></ui:Column><ui:Column width="55px" autoResizable="true"><Label text="{i18n>Boq}" /><ui:template><Text text="{localJson>Group}"></Text></ui:template></ui:Column><ui:Column width="280px" autoResizable="true"><Label text="{i18n>BOQDescription}" /><ui:template><Text text="{localJson>BoqDesc}"></Text></ui:template></ui:Column><ui:Column width="162px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox items="{localJson>/STATUSBoqlist}" enabled="false"\r\n                                                        selectedKey="{localJson>SrvStatus}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="60px" autoResizable="true"><ui:template><Button width="40px"\r\n                                                        type="{= ${localJson>DelInd} === \'X\' ? \'Accept\' : \'Reject\'}"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== \'A\' }"\r\n                                                        icon="{= ${localJson>DelInd} === \'X\' ? \'sap-icon://undo\' : \'sap-icon://delete\'}"\r\n                                                        press="onDeleteWBS" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection titleUppercase="false" title="{i18n>PurchaseRequisitionList}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>PurchaseRequisitionList}"><uxap:blocks><core:Fragment fragmentName="com.cicre.po.view.PRfragments.PurchaseRequisition" type="XML"  /></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>VariationOrder}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>VariationOrder}"><uxap:blocks><ui:Table id="VariationOrderTable" visible="true"\r\n                                        rows="{ path: \'localJson>/HeadToHeadVariation\',filters: [{path: \'OrderType\', operator: \'EQ\', value1: \'V\'}] }"\r\n                                        visibleRowCount="5" selectionMode="None"><ui:extension><OverflowToolbar><ToolbarSpacer /><Button type="Accept" icon="sap-icon://add" press="handlevariationOrder"\r\n                                                    enabled="{= ${localJso>/VariationMode} === false ? false : ${localJson>/editMode} === false ? false : ${localJson>/PurchDoc} !== \'\'}" /></OverflowToolbar></ui:extension><ui:columns><ui:Column width="80px" autoResizable="true"><Label text="{i18n>VariationOrder}" /><ui:template><Input value="{localJson>UserOrder}" id="id_VariationOrder"\r\n                                                        type="Number"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        change="handelValuseUserOrder"\r\n                                                        valueState="{path : \'localJson>OrderDesc\', formatter : \'com.cicre.po.model.formatter.valueState\'}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Input value="{localJson>OrderDesc}" id="id_Description"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        valueState="{path : \'localJson>OrderDesc\', formatter : \'com.cicre.po.model.formatter.valueState\'}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Type}" /><ui:template><ComboBox selectedKey="{localJson>Type}"\r\n                                                        change="handleChangeOrderType"\r\n                                                         enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }"\r\n                                                         items="{path: \'/ValueHelpSet\', filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'OrdType\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Date}" /><ui:template><DatePicker   enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }"\r\n                                                        value="{path:\'localJson>OrderDate\', formatter: \'.formatter.formatDate\'}" change="onChangeind"\r\n                                                        displayFormat="dd-MM-yyyy" valueFormat="yyyy-MM-dd" /></ui:template></ui:Column><ui:Column width="200px" autoResizable="true"><Label text="{i18n>Month}" /><ui:template><MultiComboBox  items="{localJson>/IndexMonths}" change="onChangeind"\r\n                                                         enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }"\r\n                                                        selectedKeys="{localJson>MonthIndex}"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></MultiComboBox></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Add}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>AddValues\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_Add" enabled="false" /></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Omission}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>OmissionValues\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_Omission" enabled="false" /></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>ChangeAmount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_Amount" enabled="false" /></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>NoofMonth}" /><ui:template><Input value="{localJson>MonthNo}" \r\n                                                        type="Number"  change="oncalculatVariationOrder"\r\n                                                          enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }" /></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>NoofDay}" /><ui:template><Input value="{localJson>DaysNo}" id="id_NoOfDay" type="Number" change="oncalculatVariationOrder"\r\n                                                          enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }" /></ui:template></ui:Column><ui:Column width="120px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox id="idCmboo" items="{localJson>/VStatus}" enabled="false"\r\n                                                        selectedKey="{localJson>Status}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>Release}" /><ui:template><Button press="onReleaseVeriation" text="Confirm"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }" /></ui:template></ui:Column><ui:Column width="75px" autoResizable="true"><Label text="{i18n>Cancel}" /><ui:template><Button press="onCancleVeriation" text="Cancel"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} === \'R\' ? ${localJson>VarStatus} !== \'R\' :  false }" /></ui:template></ui:Column><ui:Column width="41px" autoResizable="true"><ui:template><Button icon="sap-icon://detail-view"\r\n                                                        press="onPressVariationOrder" /></ui:template></ui:Column><ui:Column width="41px" autoResizable="true"><ui:template><Button icon="sap-icon://detail-view"\r\n                                                        press="onPressVariationOrdersrv" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>Addendum}"><uxap:subSections><uxap:ObjectPageSubSection title="{i18n>Addendum}"><uxap:blocks><ui:Table id="AddendumTable" visible="true"\r\n                                        rows="{ path: \'localJson>/HeadToHeadVariation\',filters: [{path: \'OrderType\', operator: \'EQ\', value1: \'A\'}] }"\r\n                                        visibleRowCount="5" selectionMode="None"><ui:extension><OverflowToolbar><ToolbarSpacer /><Button type="Accept" icon="sap-icon://add" press="handdAdendum"\r\n                                                    enabled="{= ${localJso>/VariationMode} === false ? false : ${localJson>/editMode} === false ? false : ${localJson>/PurchDoc} !== \'\'}" /></OverflowToolbar></ui:extension><ui:columns><ui:Column width="80px" autoResizable="true"><Label text="{i18n>AddendumOrder}" /><ui:template><Input value="{localJson>UserOrder}" id="id_Addendum" type="Number"\r\n                                                        change="handelValuseUserOrder"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        valueState="{path : \'localJson>OrderDesc\', formatter : \'com.cicre.po.model.formatter.valueState\'}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Input value="{localJson>OrderDesc}" id="id_AddendumDescription"\r\n                                                        enabled="{= ${localJson>OrderNo} !== \'\' ? false : true}"\r\n                                                        valueState="{path : \'localJson>OrderDesc\', formatter : \'com.cicre.po.model.formatter.valueState\'}" /></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Type}" /><ui:template><ComboBox selectedKey="{localJson>Type}"\r\n                                                        change="handleChangeOrderTypeA"\r\n                                                         enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }"\r\n                                                        items="{path: \'/ValueHelpSet\',filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'OrdType\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="150px" autoResizable="true"><Label text="{i18n>Date}" /><ui:template><DatePicker   enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }"\r\n                                                        value="{path:\'localJson>OrderDate\', formatter: \'.formatter.formatDate\'}" change="onChangeind"\r\n                                                        displayFormat="dd-MM-yyyy" valueFormat="yyyy-MM-dd" /></ui:template></ui:Column><ui:Column width="200px" autoResizable="true"><Label text="{i18n>Month}" /><ui:template><MultiComboBox\r\n                                                         enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }" items="{path: \'/ValueHelpSet\', \r\n\t\t\t\t\t\t\t\t            filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'MONTHS\'}]}"\r\n                                                        selectedKeys="{localJson>MonthIndex}" change="onChangeind"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></MultiComboBox></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Add}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>AddValues\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_AddAddendum" enabled="false" /></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Omission}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>OmissionValues\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_OmissionAddendum" enabled="false" /></ui:template></ui:Column><ui:Column width="130px" autoResizable="true"><Label text="{i18n>Amount}" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>ChangeAmount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        id="id_AmountAddendum" enabled="false" /></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>NoofMonth}" /><ui:template><Input value="{localJson>MonthNo}" \r\n                                                        type="Number"  change="oncalculatVariationOrder"\r\n                                                          enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }" /></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>NoofDay}" /><ui:template><Input value="{localJson>DaysNo}" id="id_NoOfDayAddendum"  change="oncalculatVariationOrder"\r\n                                                        type="Number"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }"/></ui:template></ui:Column><ui:Column width="120px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox items="{localJson>/VStatus}" enabled="false"\r\n                                                        selectedKey="{localJson>Status}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="80px" autoResizable="true"><Label text="{i18n>Release}" /><ui:template><Button press="onReleaseVeriation" text="Confirm"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== \'R\' }" /></ui:template></ui:Column><ui:Column width="75px" autoResizable="true"><Label text="{i18n>Cancel}" /><ui:template><Button press="onCancleVeriation" text="Cancel"\r\n                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} === \'R\' ? ${localJson>VarStatus} !== \'R\' :  false }" /></ui:template></ui:Column><ui:Column width="41px" autoResizable="true"><ui:template><Button icon="sap-icon://detail-view"\r\n                                                        press="onPressAddendumOrder" /></ui:template></ui:Column></ui:columns></ui:Table></uxap:blocks></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection titleUppercase="false" title ="{i18n>Note}" ><uxap:subSections><uxap:ObjectPageSubSection><TextArea  value="{localJson>/ContractPONoteSet/NoteText}"    enabled="{localJson>/editMode}" change="onChangeNote" rows=\'4\'  width="100%"/></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>attachmentName}"><uxap:subSections><uxap:ObjectPageSubSection><List items="{localJson>/AttachmentSet}" delete="onAttachmentDelete"><headerToolbar><Toolbar><ToolbarSpacer /><Button icon="sap-icon://delete" type="Reject"\r\n                                                tooltip="{i18n>attachmentDelete}" press="onListDeletePress"\r\n                                                enabled="{localJson>/editMode}" /><Button icon="sap-icon://add" type="Accept" tooltip="{i18n>attachmentAdd}"\r\n                                                press="handleAddAttachmentPress" enabled="{localJson>/editMode}" /></Toolbar></headerToolbar><items><StandardListItem visible="{= ${localJson>Flag} !== \'D\'}"\r\n                                            icon="sap-icon://document"\r\n                                            title="{localJson>Filename}.{localJson>Extension}" type="Active"\r\n                                            press="_onAttachmentItemPress" /></items></List></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>displayProcessFlow}" visible="false" ><uxap:subSections><uxap:ObjectPageSubSection><layout:VerticalLayout><layout:HorizontalLayout><Label text="{i18n>displaySelectContractType}" class="sapUiSmallMarginEnd"/><Select change="onChangeWFContractType"  id="idselectionType" selectedKey="{localJson>/Actiontype}" items="{path: \'localJson>/Action_TYPE\', templateShareable: false}"><core:Item key="{localJson>OrderText}" text="{localJson>WfText}"/></Select></layout:HorizontalLayout><HBox renderType="Bare"><Button text="{i18n>displayZoomIn}" press="onZoomIn"/><Button text="{i18n>displayZoomOut}" press="onZoomOut"/></HBox><FlexBox width="1170px" renderType="Bare"><commons:ProcessFlow id="idDisplayProcessFlow" foldedCorners="true" nodePress="onNodePress" nodes="{localJson>/nodes}"\r\n\t\t\t\t\t\t\t\t\tlanes="{localJson>/lanes}"><commons:nodes><commons:ProcessFlowNode laneId="{localJson>laneId}" nodeId="{localJson>nodeId}" title="{localJson>title}"\r\n\t\t\t\t\t\t\t\t\t\t\ttitleAbbreviation="{localJson>titleAbbreviation}" children="{localJson>children}" state="{localJson>state}"\r\n\t\t\t\t\t\t\t\t\t\t\tstateText="{localJson>stateText}" texts="{localJson>texts}" focused="{localJson>focused}" highlighted="{localJson>highlighted}"/></commons:nodes><commons:lanes><commons:ProcessFlowLaneHeader laneId="{localJson>laneId}" state="{localJson>state}" iconSrc="{localJson>iconSrc}" text="{localJson>text}"\r\n\t\t\t\t\t\t\t\t\t\t\tposition="{localJson>position}"/></commons:lanes></commons:ProcessFlow></FlexBox></layout:VerticalLayout></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection titleUppercase="false" title ="{i18n>displayReferences}" \r\n                        \r\n                            visible="{= ${localJson>/TempStatus} === \'Released\' }"><uxap:subSections><uxap:ObjectPageSubSection><layout:HorizontalLayout><GenericTile    class="sapUiTinyMarginBegin sapUiTinyMarginTop" header="{i18n>ContractTerms}" subheader="{localJson>/PurchDoc}-{localJson>/Version}"\r\n\t\t\t\t\t\t\t\tpress="onPressContractTermsTile" ><tileContent><TileContent><ImageContent src="sap-icon://sales-document"/></TileContent></tileContent></GenericTile></layout:HorizontalLayout></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection></uxap:sections></uxap:ObjectPageLayout></content><footer><Toolbar><content><Button icon="sap-icon://message-popup"\r\n                        enabled="{= ${localJson>/ReleaseStatus} === \'IN\' ? false : true}"\r\n                        text="{localJson>/MessagesLength}" type="Reject" press="onPressMessagePopover" /><ToolbarSpacer /><ToolbarSpacer /><Button type="Transparent" icon="sap-icon://edit" id="idEditTermsBtn" press="onEditPress"\r\n                        text="{i18n>Edit}" visible="{= ( ${localJson>/editMode} === false ? true : false)  &amp;&amp; ${localJson>/Edit} }"\r\n                        enabled="{= ${localJson>/ReleaseStatus} === \'IN\' ? false : true}" /><Button type="Reject" icon= "sap-icon://delete" id="idDeteteContract" visible="{localJson>/editMode}"\r\n                        press="onActivatePO" text="{i18n>Delete}" enabled="{= ${localJson>/PurchDoc} === \'\' ? true : false}"/><Button type="Accept" icon="sap-icon://save" id="idSaveTermsBtn" visible="{localJson>/editMode}"\r\n                        press="onSave" text="{i18n>Save}" /><Button type="Transparent" icon="sap-icon://cancel" id="idCancelTermsBtn" press="onCancelPress"\r\n                        text="{i18n>Cancel}" visible="{localJson>/editMode}" /><Button type="Emphasized" icon="sap-icon://accept" id="idSubmitTermsBtn" press="onActivatePO"\r\n                        enabled="{= ${localJson>/ReleaseedMode} === true ? ${localJson>/ReleaseStatus} !== \'IN\' : false}"\r\n                        text="{i18n>Release}" visible="{= ${localJson>/editMode} === false ? ${localJson>/AuthInd} === \'X\' : false}" /></content></Toolbar></footer></Page></mvc:View>',
	"com/cicre/po/view/PRfragments/PurchaseRequisition.fragment.xml":'     <core:FragmentDefinition\r\n\txmlns:l="sap.ui.layout"\r\n\txmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core"\r\n    xmlns:ui="sap.ui.table"\r\n\txmlns="sap.m"><ui:Table rows="{ path: \'localJson>/myPurchaseRequisition\' }" visibleRowCount="5"\r\n                                    id="IdPurchaseRequisitionTable"     selectionMode="None"><ui:toolbar><OverflowToolbar><content><Title text="{i18n>PurchaseRequisition} " level="H2" /><Text text="({localJson>/PurchaseRequisitionNO})"></Text><ToolbarSpacer /></content></OverflowToolbar></ui:toolbar><ui:columns><ui:Column width="140px" autoResizable="true"><Label text="{i18n>ContractualIndicator}" /><ui:template><Text text="{localJson>Txt}" /></ui:template></ui:Column><ui:Column width="180px" autoResizable="true"><Label text="{i18n>PRNO}" /><ui:template><Text text="{localJson>PrNo}"></Text></ui:template></ui:Column><ui:Column width="180px" autoResizable="true"><Label text="{i18n>Network}" /><ui:template><Text text="{localJson>Network}" /></ui:template></ui:Column><ui:Column width="180px" autoResizable="true"><Label text="{i18n>Activity}" /><ui:template><Text text="{localJson>ActivityNumber}"></Text></ui:template></ui:Column><ui:Column width="250px" autoResizable="true"><Label text="{i18n>Description}" /><ui:template><Text text="{localJson>BoqDesc}"></Text></ui:template></ui:Column><ui:Column width="160px" autoResizable="true"><Label text="{i18n>Status}" /><ui:template><ComboBox selectedKey="{localJson>SrvStatus}" enabled="false" items="{path: \'/ValueHelpSet\', \r\n                                    filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'STATUSBoq\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="60px" autoResizable="true"><ui:template><Button width="40px"\r\n                                                        type="{= ${localJson>DelInd} === \'X\' ? \'Accept\' : \'Reject\'}"\r\n                                                        icon="{= ${localJson>DelInd} === \'X\' ? \'sap-icon://undo\' : \'sap-icon://delete\'}"\r\n                                                        press="onDeletePR" /></ui:template></ui:Column></ui:columns></ui:Table></core:FragmentDefinition>',
	"com/cicre/po/view/PRfragments/SelectMultiPRDialogTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" \r\nxmlns:core="sap.ui.core" xmlns:t="sap.ui.table"><t:Table rows="{localJson>/PurchaseRequisitionSet}"\r\n\t selectionBehavior="Row"\r\n\t \r\n\t selectionMode="MultiToggle"\r\n\tselectionChange="onPRSelectionChange" ><t:columns><t:Column><t:label \t><Label text= "{i18n>PRNO} "\t/></t:label><t:template ><Text text="{localJson>PrNo}" \t/></t:template></t:Column><t:Column><t:label><Label text= "{i18n>Network} "\t/></t:label><t:template ><Text text="{localJson>Network}" \t/></t:template></t:Column><t:Column ><t:label><Label text="{i18n>Activity}"/></t:label><t:template ><Text text="{localJson>ActivityNumber}" \t/></t:template></t:Column><t:Column><t:label><Label text="{i18n>Description}"/></t:label><t:template><Text text="{localJson>ActivityNumberDesc}"/></t:template></t:Column></t:columns></t:Table></core:FragmentDefinition>',
	"com/cicre/po/view/PRfragments/SelectMultiPRDialoge.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:vh="sap.ui.comp.valuehelpdialog" xmlns:fb="sap.ui.comp.filterbar"\r\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><vh:ValueHelpDialog ok="onPRSelectionChange" cancel="onPRContractClose" title="{i18n>PurchaseRequisition}" \r\n\t supportRanges="false" supportRangesOnly="false" key="PrNo" class="sapUiSizeCompact"><vh:filterBar><fb:FilterBar advancedMode="true" showRestoreButton="true" filtersDialogSearchForFilter="onVHContractSearch" filterBarExpanded="true"\r\n\t\t\t\tsearch="handleSearchPRPress" filtersDialogSearch="onVHContractSearch" isRunningInValueHelpDialog="true" ><fb:filterGroupItems><fb:FilterGroupItem groupName="PR" name="n1" label="{i18n>PRNO}" ><fb:control><Input id="idPRNODialog"  name="PRNoValueHelp"  showValueHelp="true"   valueHelpRequest="onValueHelpPress" maxLength="50"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="PR" name="n2" label="{i18n>Network}" ><fb:control><Input id="idSearchNetworkDialog"  name="SearchNetworkDialog"   valueHelpRequest="onValueHelpPress" showValueHelp="true"   change="cleanWBSDialog" maxLength="50"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="PR" name="n3" label="{i18n>Activity}" ><fb:control><Input id="idSearchActivityDialog"   name="SearchActivityDialog"  valueHelpRequest="onValueHelpPress" showValueHelp="true"   change="cleanWBSDialog" maxLength="50"/></fb:control></fb:FilterGroupItem></fb:filterGroupItems></fb:FilterBar></vh:filterBar></vh:ValueHelpDialog></core:FragmentDefinition>',
	"com/cicre/po/view/PRfragments/TreePurchaseRequisition.fragment.xml":'     <core:FragmentDefinition\r\n\txmlns:l="sap.ui.layout"\r\n\txmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core"\r\n    xmlns:ui="sap.ui.table"\r\n\txmlns="sap.m"><ui:TreeTable id="idTreeTablePurchaseRequisition"\r\n                                        rows="{path:\'localJson>/PRItemSet\', parameters: {arrayNames:[\'Categories\']}}"\r\n                                        selectionMode="Single" enableSelectAll="false" ariaLabelledBy="title"\r\n                                        visibleRowCount="9"><ui:extension><OverflowToolbar><ToolbarSpacer /><Button text="Collapse all" press="onCollapseAllPR" /><Button text="Expand all" press="onExpandFirstLevelPR" /></OverflowToolbar></ui:extension><ui:columns><ui:Column width="12rem"><Label text="Services" /><ui:template><Text text="{localJson>Data}" wrapping="false" /></ui:template></ui:Column><ui:Column width="11rem"><Label text="Service type" /><ui:template><ComboBox items="{localJson>/Service_TYPE}" enabled="false"\r\n                                                        visible="{= !!${localJson>Eancat}}"\r\n                                                        selectedKey="{localJson>Eancat}" change="hanleChane"><items><core:Item text="{localJson>text}" key="{localJson>id}" /></items></ComboBox></ui:template></ui:Column><ui:Column width="30rem"><Label text="Service Description" /><ui:template><TextArea value="{localJson>LongDesc}" enabled="false" rows="{  parts: \r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t{path: \'localJson>Indicator\'}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t] \r\n\t\t\t\t\t\t\t, formatter: \'com.cicre.po.model.formatter.numOfRows\'}" wrapping="false" width="100%"\r\n                                                        visible="{= !!${localJson>LongDesc}}" /></ui:template></ui:Column><ui:Column width="5rem"><Label text="UOM" /><ui:template><Input value="{localJson>Uom}" wrapping="false"\r\n                                                        visible="{= !!${localJson>Uom}}" enabled="false" /></ui:template></ui:Column><ui:Column width="9rem"><Label text="Quantity" /><ui:template><Input value="{localJson>Qty}" wrapping="false" type="Number"\r\n                                                       visible="{= !!${localJson>Qty} === false ? false : ${localJson>Eancat} === \'U\' ? false : true }"\r\n                                                       liveChange="onChangeQty" enabled="false" /></ui:template></ui:Column><ui:Column width="5rem"><Label text="Price" /><ui:template><Input value="{localJson>price}" wrapping="false"\r\n                                                        visible="{= !!${localJson>price}}" enabled="false" /></ui:template></ui:Column><ui:Column width="8rem"><Label text="Amount" /><ui:template><Input\r\n                                                        value="{ parts:[{path:\'localJson>PriceUnit\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"\r\n                                                        wrapping="false"\r\n                                                        visible="{= !!${localJson>PriceUnit} === false ? false : ${localJson>Eancat} === \'U\' ? false :  ${localJson>live} === \'one\' ? false : true  }"\r\n                                                        enabled="false" /></ui:template></ui:Column></ui:columns></ui:TreeTable></core:FragmentDefinition>',
	"com/cicre/po/view/PRfragments/ValueHelp.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog title="{i18n>valueHelpSelectValue}" class="sapUiPopupWithPadding" search="handleValueHelpSearch"\r\n\t\tconfirm="handleValueHelpClose" cancel="handleValueHelpClose"></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/WorkList.view.xml":'<mvc:View\n\tcontrollerName="com.cicre.po.controller.WorkList"\n\txmlns="sap.m"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:semantic="sap.m.semantic"\n\txmlns:fb="sap.ui.comp.filterbar"\n\txmlns:core="sap.ui.core"\n\txmlns:footerbar="sap.ushell.ui.footerbar"\n\t><semantic:FullscreenPage\n\t\tid="page"\n\t\tnavButtonPress="onNavBack"\n\t\tshowNavButton="true"\n\t\ttitle="{i18n>SearchContracts}"><semantic:content><fb:FilterBar id="filterBar" header="{i18n>Searchavailablecontracts}" reset="onReset" search="onSearchContract" clear="onClear"\n\t\t\tcancel="onCancel" filtersDialogClosed="onFiltersDialogClosed" showRestoreButton="true" showClearButton="true" showCancelButton="true"><fb:filterItems><fb:FilterItem name="A" label="{i18n>Company}"><fb:control><Input id="idSearchByCompany" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onDisplaySearchCompDialog"\n\t\t\t\t\t\t\tchange="onSearchCompanyChange" showSuggestion="true" suggest="handleSuggestCompCode" suggestionItems="{/ValueHelpSet}" suggestionItemSelected="onSelectCompanySuggestion"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input></fb:control></fb:FilterItem><fb:FilterItem name="s" label="{i18n>Project}"><fb:control><Input id="idSearchByProjecttt" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onDisplaySearchProject"\n\t\t\t\t\t\t\tchange="onSearchProjectChange" showSuggestion="true" suggest="handleSuggestProject" suggestionItems="{/ValueHelpSet}" suggestionItemSelected="onSelectCompanySuggestion"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input></fb:control></fb:FilterItem><fb:FilterItem name="B" label="{i18n>Contract}"><fb:control><Input id="idSearchByContract" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onDisplaySearchContract"\n\t\t\t\t\t\t\tchange="onSearchContractChange" showSuggestion="true" suggest="handleSuggestContract" suggestionItems="{/ValueHelpSet}" suggestionItemSelected="onSelectCompanySuggestion"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input></fb:control></fb:FilterItem><fb:FilterItem name="f" label="{i18n>WBS}"><fb:control><Input id="idSupeiorWBS" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onDisplaySearchidSupeiorWBSDialog"\n\t\t\t\t\t\t\tchange="onSearchWBS" showSuggestion="true" suggest="handleSuggestContract" suggestionItems="{/ValueHelpSet}" suggestionItemSelected="onSelectCompanySuggestion"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input></fb:control></fb:FilterItem><fb:FilterItem name="D" label="{i18n>Vendor}"><fb:control><Input id="idSearchByVendor" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onDisplaySearchVendorDialog"\n\t\t\t\t\t\t\tshowSuggestion="true" suggest="handleSuggestVendor" suggestionItems="{/ValueHelpSet}"\n\t\t\t\t\t\t\tchange="onSearchByVendor"\n\t\t\t\t\t\t\t suggestionItemSelected="onSelectVendorSuggestion"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input></fb:control></fb:FilterItem><fb:FilterItem name="y" label="{i18n>Document Type}"><fb:control><Input id="idSearchByDecTy" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onDisplaySearchDecTyDialog"\n\t\t\t\t\t\t\tshowSuggestion="true" change="onSearchSuggestDecTy"\n\t\t\t\t\t\t\tsuggest="handleSuggestDecTy" suggestionItems="{/ValueHelpSet}" suggestionItemSelected="onSelectDecTy"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input></fb:control></fb:FilterItem><fb:FilterItem name="O" label="{i18n>PurchaseOrganization}" visible="false"><fb:control><Input id="idPurchaseOrganization" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onDisplaySearchPOrgDialog"\n\t\t\t\t\t\t\t visible="false" change="onSearchPOrgChange" showSuggestion="true" suggest="handleSuggestPOrg" suggestionItems="{/ValueHelpSet}" suggestionItemSelected="onSelectPOrgSuggestion"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input></fb:control></fb:FilterItem><fb:FilterItem name="G" label="{i18n>serviceType}"><fb:control><Input id="idserviceType" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onserviceTypeValueHelpPress"\n\t\t\t\t\t\t\tchange="onserviceTypeChange" showSuggestion="true" suggest="handleserviceType" suggestionItems="{/ValueHelpSet}" suggestionItemSelected="onSelectserviceType"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input></fb:control></fb:FilterItem><fb:FilterItem name="z" label="{i18n>ConstructionType}"><fb:control><ComboBox id="idFConstructionType" selectedKey="{localJson>/ConstructionType}" enabled="{localJson>/editMode}" items="{path: \'/ValueHelpSet\', \n                                        filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'ConstType\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}"/></items></ComboBox></fb:control></fb:FilterItem><fb:FilterItem name="C" label="{i18n>Exempted}"><fb:control><ComboBox id="idExemptedType" selectedKey="{localJson>/Exempted}" enabled="{localJson>/editMode}"><items><core:ListItem key="YES" text="YES"/><core:ListItem key="NO" text="NO"/></items></ComboBox></fb:control></fb:FilterItem><fb:FilterItem name="Cr" label="{i18n>CreatedBy}"><fb:control><Input id="idCreatedBy"  change="onCreatedByChange" /></fb:control></fb:FilterItem></fb:filterItems></fb:FilterBar><Table\n\t\t\t\tid="table"\n\t\t\t\twidth="auto"\n\t\t\t\tclass="sapUiResponsiveMargin"\n\t\t\t\titems="{\n\t\t\t\t\tpath: \'poModel>/ContractPOHeaderSet\'\n\t\t\t\t}"\n\t\t\t\tnoDataText="No Data"\n\t\t\t\tbusyIndicatorDelay="{worklistView>/tableBusyDelay}"\n\t\t\t\tgrowing="true"\n\t\t\t\tgrowingScrollToLoad="true"\n\t\t\t\tupdateFinished="onUpdateFinished"><columns><Column><Text text="{i18n>Contract}"/></Column><Column><Text text="{i18n>PO}"/></Column><Column><Text text="{i18n>Vendor}"/></Column><Column><Text text="{i18n>CreatedBy}"/></Column><Column><Text text="{i18n>Status}"/></Column></columns><items><ColumnListItem type="Navigation" press="onPressPO"><cells><Text text="{poModel>PoNumber}"/><Text text="{poModel>PurchDoc}"/><Text text="{poModel>VendorName}"/><Text text="{poModel>CreatedBy}"/><ObjectStatus \n\t\t\t\t\t\ttext="{poModel>TempStatus}" \n\t\t\t\t\t\tstate="{= ${poModel>Status} === \'SUBMITTED\' ? \'Success\' : ${qsModel>ContractTermsStatus} === \'C\' ? \'None\' : \'Warning\'}"\t\t\t\t\t\n\t\t\t\t\t\t\t/></cells></ColumnListItem></items></Table></semantic:content><semantic:positiveAction><semantic:PositiveAction text="{i18n>CreateContract}" press="onCreateContractPress"/></semantic:positiveAction></semantic:FullscreenPage></mvc:View>',
	"com/cicre/po/view/fragments/ActionSheetDialog.fragment.xml":'<core:FragmentDefinition\r\n\txmlns="sap.m"\r\n\txmlns:core="sap.ui.core"><ActionSheet\r\n\tafterClose="onActionAfterClose"\r\n\t\ttitle="Choose Your Action"\r\n\t\tshowCancelButton="true"\r\n\t\tplacement="Bottom"><buttons><Button text="{i18n>Building}" type="Accept" press="onBuildingSelectionValueHelpPress"  visible="false" id="idonAddBuildings"  /><Button text="{i18n>WBS}" type="Accept"  press="onWBSSelectionValueHelpPressB"   visible="false" id="idonAddWBS" /><Button text="{i18n>PurchaseRequisition}" type="Accept"  press="onWBSSelectionValueHelpPressB"   visible="false" id="idAddPurchaseRequisition" /><Button text="{i18n>Building}" type="Accept" press="onBuildingSelectionValueHelpPressc" visible="false" id="idonAddBuildingsC" /><Button text="{i18n>WBS}" type="Accept"  press="onWBSSelectionValueHelpPressB" visible="true" id="idonAddWBSC"  /><Button text="{i18n>PurchaseRequisition}" type="Accept"  press="onWBSSelectionValueHelpPressB"   visible="true" id="idAddPurchaseRequisitionc" /></buttons></ActionSheet></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/AddService.fragment.xml":'<core:FragmentDefinition class="sapUiSizeCompact" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout"\r\n\txmlns:f="sap.ui.layout.form" xmlns:commons="sap.ui.commons" xmlns:table="sap.ui.table"><Dialog class="sapUiSizeCompact" title="{i18n>AddService}"  \r\n\tcontentWidth="250px"><content><VBox class="sapUiSmallMargin"><f:SimpleForm id="SimpleFormChange354" editable="true" layout="ResponsiveGridLayout" singleContainerFullSize="false"><f:content><Label text="{i18n>Boq}"/><ComboBox id="idSelectBoq" \r\n\t\t\t\t\t\tselectionChange="addServiceBoqSelectionChange"\r\n\t\t\t\t\t\titems="{localJson>/BoqItemSet}"><items><core:Item text="{localJson>Name}" key="{localJson>ModelType}"/></items></ComboBox><Label text="{i18n>SubBoq}"/><ComboBox id="idSelectSub" \r\n\t\t\t\t\t\titems="{/BoqSubItemSet}"><items><core:Item text="{BoqSub}" key="{BoqSub}"/></items></ComboBox><Label text="{i18n>Service}"/><Input id="idSelectService" showValueHelp="true" valueHelpOnly="false" valueHelpRequest="onDisplaySearchServiceDialog"><suggestionItems><core:Item text="{IdText}" key="{IdNumber}"/></suggestionItems></Input><Label text="{i18n>Qty}"/><Input  id="idInputQty"/><Label text="{i18n>ItemNo}"/><Input  id="idInputMatGrp" enabled="false"/><Label text="{i18n>ItemDesc}"/><Input  id="idInputMatGrpDesc" enabled="false"/></f:content></f:SimpleForm></VBox></content><buttons><Button text="{i18n>Ok}" type="Accept" id="idAddServices" press="onSaveService"/><Button text="{i18n>Cancel}" type="Reject" press="onCancelService"/></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/AddendumOrderTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog resizable="true" class="sapUiSizeCompact" title="{i18n>Addendum Order}"><content><Panel width="80rem"><Table id="idBuildingss"><columns><Column><Text text="{i18n>Action}"/></Column><Column><Text text="{i18n>Building Id}"/></Column><Column><Text text="{i18n>Zone Code}"/></Column><Column><Text text="{i18n>Group Code}"/></Column><Column><Text text="{i18n>Model}"/></Column><Column><Text text="{i18n>Model Description}"/></Column><Column><Text text="{i18n>Boq}"/></Column><Column><Text text="{i18n>Boq Description}"/></Column><Column><Text text="{i18n>Amount}"/></Column></columns></Table></Panel></content><buttons><Button text="{i18n>Close}" press="handleCloseAddendum"/></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/Attachment.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core"><Dialog class="sapUiSizeCompact" title="{i18n>attachmentAdd}"><content><f:SimpleForm minWidth="1024" maxContainerCols="2" editable="true" layout="ResponsiveGridLayout" title="{i18n>attachmentInfo}"\r\n\t\t\t\tlabelSpanL="3" labelSpanM="3" emptySpanL="4" emptySpanM="4" columnsL="1" columnsM="1" class="editableForm"><f:content><Label text="{i18n>attachmentName}"/><u:FileUploader id="idRequestAttachment" change="handleUploadPress" icon="sap-icon://open-folder" iconOnly="true"\r\n\t\t\t\t\t\ttooltip="{i18n>attachmentUploadFile}"/></f:content></f:SimpleForm></content><buttons><Button icon="sap-icon://decline" tooltip="{i18n>attachmentCancel}" press="onCancelAttachment"/><Button icon="sap-icon://add" tooltip="{i18n>attachmentAdd}" press="onAddAttachment"/></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/BuildingSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\r\n xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select Building" \r\n\t search="handleSearchBuilding" \r\n\t confirm="onSelectBuilding" \r\n\t cancel="onSelectBuilding"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/BuildingSearchDialogfilter.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Building " \r\n     search="handleSearchBilddingfilter" confirm="onSearchBuildingfilter" \r\n\tcancel="onSearchBuildingfilter" \r\n\t></SelectDialog></core:FragmentDefinition>\r\n',
	"com/cicre/po/view/fragments/BuildingValueHelpFilterBarDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:vh="sap.ui.comp.valuehelpdialog" xmlns:fb="sap.ui.comp.filterbar"\r\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><vh:ValueHelpDialog ok="onBuildingValueHelpOkPress" cancel="CancelPressBuilding" title="{i18n>contractSelectContract}" \r\n\t\tsupportRanges="false" supportRangesOnly="false" key="BuildingNo" class="sapUiSizeCompact"><vh:filterBar><fb:FilterBar advancedMode="true" showRestoreButton="true" filtersDialogSearchForFilter="onVHContractSearch" filterBarExpanded="true"\r\n\t\t\t\tsearch="handleSearchBuildingPressFilter" filtersDialogSearch="onVHContractSearch"><fb:filterGroupItems><fb:FilterGroupItem groupName="Contract" name="n1" label="{i18n>Zone}"><fb:control><Input id="onSearchZonefilter_Id" valueHelpRequest="onDisplaySearchZone" showValueHelp="true"   change="changeZone" maxLength="70"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contract" name="n2" label="{i18n>Model}"><fb:control><Input id="onSearchModelfilter_Id" showValueHelp="true"   valueHelpRequest="onDisplaySearchModelfilter" change="changeModel" maxLength="70"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contract" name="n3" label="{i18n>Building or WBS}"><fb:control><MultiComboBox id="idBuildingCategory"  selectedKeys="BUILD" ><items><core:Item key="BUILD" text="{i18n>displayBuildingId}"/><core:Item key="WBS" text="{i18n>displayWBS}"/></items></MultiComboBox></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contract" name="n4" label="{i18n>Group}"><fb:control><Input id="onSearchGroupfilter" showValueHelp="true"  change="changeGroup" valueHelpRequest="onDisplaySearGroupfilter" maxLength="70"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contract" name="n5" label="{i18n>Building}"><fb:control><Input id="onSearchBildingfilter_Id"  change="changeBuilding" showValueHelp="true" valueHelpRequest="onDisplaySearBuildingfilter" maxLength="70"/></fb:control></fb:FilterGroupItem></fb:filterGroupItems></fb:FilterBar></vh:filterBar></vh:ValueHelpDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/BuildingValueHelpFilterBarTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:t="sap.ui.table"><t:Table rows="{localJson>/BuildingFilterSet}"\r\n\t selectionBehavior="Row"\r\n\t \r\n\t selectionMode="MultiToggle"\r\n\tselectionChange="onWBSSelectionChange" ><t:columns><t:Column><t:label \twidth="5rem"><Label text="{i18n>Building}" \twidth="5rem"/></t:label><t:template width="5rem"><Text text="{localJson>BuildingNo}" \twidth="5rem"/></t:template></t:Column><t:Column><t:label><Label text="{i18n>ModelDesc}"/></t:label><t:template><Text text="{localJson>ModelDesc}"/></t:template></t:Column><t:Column><t:label><Label text="{i18n>Model}"/></t:label><t:template><Text text="{localJson>Model}"/></t:template></t:Column></t:columns></t:Table></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/BusyDialog.fragment.xml":'<core:FragmentDefinition\r\n        xmlns="sap.m"\r\n        xmlns:core="sap.ui.core"><BusyDialog /></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/CompanySearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Company" \r\n\tsearch="handleSearchComp" confirm="onSelectCompanyList" cancel="onSelectCompanyList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ContractDescriptionDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\r\n xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select Contract Description" \r\n\t search="handleSearchContract" \r\n\t confirm="onSelectContractList" \r\n\t cancel="onSelectContractList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/DocumentSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Document" \r\n\tsearch="handleSearchDocument" confirm="onSelectDocumentList" cancel="onSelectDocumentList"\r\n\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/DocumentType.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Contract Type" \r\n\t search="handleSearchDocType"\r\n     confirm="onSelectDocTypeList" \r\n     cancel="onSelectDocTypeList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/FilterServices.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog class="sapUiSizeCompact" title="{i18n>filterServices}"><content><f:Form editable="true"><f:layout><f:ResponsiveGridLayout labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="2" columnsM="2"/></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement><f:label><Label text="{i18n>displayBuildingId}"/></f:label><f:fields><MultiInput id="idFBuildingId" showValueHelp="true" valueHelpRequest="onBuildingValueHelpPress"\r\n\t\t\t\t\t\t\t\t\t\ttokens="{ path: \'localJso>/Buildingss\', sorter: { path: \'BuildingNo\' } }"><tokens><Token key="{localJso>BuildingNo}" text="{localJso>BuildingNo}"/></tokens></MultiInput></f:fields></f:FormElement><f:FormElement visible="{= ${detailView>/SelectedServiceTablePath} === \'/PCServiceSet\'}"><f:label><Label text="{i18n>Model}"/></f:label><f:fields><Input id="idSearchByModelFilter" showValueHelp="true"  change="changeBuildingfilter" valueHelpRequest="onDisplaySearchModelfilterOnBuilding" maxLength="9"/></f:fields></f:FormElement><f:FormElement><f:label><Label text="{i18n>Whole Contract}"/></f:label><f:fields><Button text="Whole Contract" press="_WholeContract" /></f:fields></f:FormElement><f:FormElement><f:label><Label text="{i18n>displayContractualIndicator}"/></f:label><f:fields><MultiComboBox id="idFContractualIndicator"\r\n\t\t\t\t\t\t\t\t\t\titems="{path: \'/ValueHelpSet\', filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'ContInd\'}], templateShareable: false}"><core:Item key="{IdNumber}" text="{IdText}"/></MultiComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></content><buttons><Button icon="sap-icon://decline" tooltip="{i18n>detailCancel}" press="onCancelFilter"/><Button icon="sap-icon://clear-filter" tooltip="{i18n>filterClear}" press="onClearFilter"/><Button icon="sap-icon://filter" type="Emphasized" tooltip="{i18n>filterApply}" press="onApplyFilter"/></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/GroupBoqSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select Boq" \r\n\t search="handleSearchSubGroupBoq " \r\n\t confirm="onSelectSubGroupBoqList"\r\n\tcancel="onSelectSubGroupBoqList"\r\n\t><StandardListItem title="{BoqSub}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/GroupSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\r\n xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select Group" \r\n\t search="handleSearchGroup" \r\n\t confirm="onSelectGroupList" \r\n\t cancel="onSelectGroupList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/MessagePopover.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><MessagePopover items="{localJson>/MessageSet}"><MessagePopoverItem type="{localJson>type}" title="{localJson>title}" description="{localJson>description}"></MessagePopoverItem></MessagePopover></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ModelDialogfilter.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Model " \r\n     search="handleSearchModelfilter" confirm="onSearchModelfilter" \r\n\tcancel="onSearchModelfilter" \r\n\t></SelectDialog></core:FragmentDefinition>\r\n',
	"com/cicre/po/view/fragments/ModelDialogfilterBuilding.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\r\n xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select Model" \r\n\t search="handleSearchModelBuilding" \r\n\t confirm="onSelectModelListBuilding" \r\n\t cancel="onSelectModelListBuilding"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ModelSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\r\n xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select Model" \r\n\t search="handleSearchModel" \r\n\t confirm="onSelectModelList" \r\n\t cancel="onSelectModelList"\r\n\t\t ><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/PlantSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Plant" \r\n\tsearch="handleSearchPlant" confirm="onSelectPlantList" cancel="onSelectPlantList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ProcessFlowDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog class="sapUiSizeCompact" title="{localJson>title}"><content><ObjectHeader title="{localJson>texts/3}" intro="{localJson>titleAbbreviation}"><statuses><ObjectStatus text="{localJson>stateText}" state="{path:\'localJson>texts/2\',formatter:\'com.cicre.po.model.formatter.getDecisionState\'}"/><ObjectStatus text="{localJson>texts/0}" state="{path:\'localJson>texts/2\',formatter:\'com.cicre.po.model.formatter.getDecisionState\'}"/><ObjectStatus text="{localJson>texts/1}" state="None"/></statuses></ObjectHeader></content><buttons><Button icon="sap-icon://decline" tooltip="{i18n>additionalDataClose}" press="onCloseProcessFlow"/></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ProjSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Project" search="handleSearchProj" confirm="onSelectProjList" cancel="onSelectProjList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ProjectSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Project" search="handleSearchProject" confirm="onSelectProjectList" cancel="onSelectProjectList"\r\n\t><StandardListItem title="{IdText}"  info = "{SelectionParameter}" \r\n\t\t\t\t\t description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition> ',
	"com/cicre/po/view/fragments/PurchaseGrpSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Purchase Group" \r\n\tsearch="handleSearchPGrp" confirm="onSelectPGrpList" cancel="onSelectPGrpList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/PurchaseOrgSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Purchase Organization" \r\n\tsearch="handleSearchPOrg" confirm="onSelectPOrgList" cancel="onSelectPOrgList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/RefrenceContractTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:t="sap.ui.table"><t:Table rows="{localJson>/ContractPOHeaderSet}" selectionBehavior="Row" id="RefrenceContractTable"><t:columns><t:Column><t:label><Label text="{i18n>Contract}" /></t:label><Input Value="{localJson>PurchDoc}"/><t:label><Label text="{i18n>ContractType}"/></t:label><t:template><ComboBox selectedKey="{localJson>DocType}" enabled="false"\r\n                 items="{path: \'/ValueHelpSet\', \r\n                 filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'DocType\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}"/></items></ComboBox></t:template><t:label><Label text="{i18n>PurchOrg}"/></t:label><t:template><ComboBox selectedKey="{poModel>PurchOrg}" enabled="false"\r\n                    items="{path: \'/ValueHelpSet\', \r\n                     filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'PORG\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}"/></items></ComboBox></t:template><t:label><Label text="{i18n>Vendor}"/></t:label><t:template><Text text="{localJson>VendorName}"/></t:template><t:label><Label text="{i18n>Status}"/></t:label><t:template><Text text="{localJson>Status}"/></t:template></t:Column></t:columns></t:Table></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/RefrenceContractValueHelpFilterBar.fragment.xml":'<core:FragmentDefinition xmlns="sap.ui.comp.valuehelpdialog" xmlns:m="sap.m" xmlns:fb="sap.ui.comp.filterbar" xmlns:core="sap.ui.core"><ValueHelpDialog title="{i18n>Refrence Contract}" ok="onContractValueHelpOkPress" cancel="onContractValueHelpCancelPress" supportRanges="false"\r\n\t\tkey="PurchDoc" descriptionKey="FundCenterName" resizable="true"><filterBar><fb:FilterBar advancedMode="true" search="onContractFilterBarSearch"><fb:filterGroupItems><fb:FilterGroupItem groupName="Contract" name="n1" label="{i18n>homeContractNo}"><fb:control><m:Input id="idSearchByContract" showValueHelp="true"   change="ch_SearchByContract" valueHelpRequest="onDisplaySearchContractRefrence" maxLength="40" name="DocType"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contrac" name="n1" label="{i18n>Vendor}"><fb:control><m:Input id="idSearchByVendor" showValueHelp="true"  change="ch_SearchByVendor"  valueHelpRequest="onDisplaySearchVendorDialog" maxLength="40" name="CompCode"/></fb:control></fb:FilterGroupItem></fb:filterGroupItems></fb:FilterBar></filterBar></ValueHelpDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/SelectMultiBuildingDialoge.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:vh="sap.ui.comp.valuehelpdialog" xmlns:fb="sap.ui.comp.filterbar"\r\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><vh:ValueHelpDialog ok="onSelectionChange" cancel="onBuildingContractClose" title="{i18n>Building}" \r\n\t\tsupportRanges="false" supportRangesOnly="false" key="BuildingNo" class="sapUiSizeCompact"><vh:filterBar><fb:FilterBar advancedMode="true" showRestoreButton="true" filtersDialogSearchForFilter="onVHContractSearch" filterBarExpanded="true"\r\n\t\t\t\tsearch="handleSearchBuildingPress" filtersDialogSearch="onVHContractSearch"><fb:filterGroupItems><fb:FilterGroupItem groupName="Contract" name="n1" label="{i18n>Zone}"><fb:control><Input id="idSearchByProject" valueHelpRequest="onDisplaySearchProjDialog" showValueHelp="true"   change="cleanProjDialog" maxLength="70"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contract" name="n2" label="{i18n>Model}"><fb:control><Input id="idSearchByModel" showValueHelp="true"   valueHelpRequest="onDisplaySearchModel" change="cleanSearchModel" maxLength="70"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contract" name="n5" label="{i18n>Boq}"    ><fb:control><Input id="idhandboq"  change="cleanSearchMode"  enabled = "{localJson>/selectBoq}"\r\n\t\t\t\t\t\t\t showValueHelp="true" valueHelpRequest="onboqValueHelpPress" maxLength="70"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contract" name="n3" label="{i18n>Group}"><fb:control><Input id="idSearchByGroup" showValueHelp="true"  change="cleanSearGroup" valueHelpRequest="onDisplaySearGroup" maxLength="70"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="Contract" name="n4" label="{i18n>Building}"><fb:control><Input id="_IdBuilding"  change="cleanSearBuilding" showValueHelp="true" valueHelpRequest="onDisplaySearBuilding" maxLength="70"/></fb:control></fb:FilterGroupItem></fb:filterGroupItems></fb:FilterBar></vh:filterBar></vh:ValueHelpDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/SelectMultiBuildingTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:t="sap.ui.table"><t:Table rows="{localJson>/BuildingSet}"\r\n\t selectionBehavior="Row"\r\n\t selectionMode="MultiToggle"\r\n\tselectionChange="onWBSSelectionChange" ><t:columns><t:Column><t:label \twidth="5rem"><Label text="{i18n>Building}" \twidth="5rem"/></t:label><t:template width="5rem"><Text text="{localJson>BuildingNo}" /></t:template></t:Column><t:Column><t:label><Label text="{i18n>Zone}"/></t:label><t:template><ComboBox selectedKey="{localJson>Project}" enabled="false"            \r\n                   items="{path: \'/ValueHelpSet\', \r\n                    filters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'BE\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}"/></items></ComboBox></t:template></t:Column><t:Column><t:label ><Label text="{i18n>Model}" /></t:label><t:template ><Text text="{localJson>ModelDesc}" /></t:template></t:Column><t:Column><t:label ><Label text="{i18n>ModelID}" /></t:label><t:template ><Text text="{localJson>Model}" /></t:template></t:Column><t:Column><t:label><Label text="{i18n>SelectBoq}"/></t:label><t:template><Input showValueHelp="true" \r\n                valueHelpOnly="true" \r\n                value="{localJson>Group}"\r\n                valueHelpRequest="onDisplaySearchSubBoqDialog"></Input></t:template></t:Column><t:Column><t:label ><Label text="{i18n>WBS}" /></t:label><t:template ><Text text="{localJson>Wbs}"/></t:template></t:Column></t:columns></t:Table></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/SelectMultiWBSDialogTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" \r\nxmlns:core="sap.ui.core" xmlns:t="sap.ui.table"><t:Table rows="{localJson>/WBSSet}"\r\n\t selectionBehavior="Row"\r\n\t \r\n\t selectionMode="MultiToggle"\r\n\tselectionChange="onWBSSelectionChange" ><t:columns><t:Column><t:label \t><Label text="{i18n>WBS}" \t/></t:label><t:template ><Text text="{localJson>Model}" \t/></t:template></t:Column><t:Column><t:label \t><Label text="{i18n>WBS Code}" /></t:label><t:template ><Text text="{localJson>SelectionParameter}" \t/></t:template></t:Column><t:Column><t:label><Label text="{i18n>WBS Description}"/></t:label><t:template><Text text="{localJson>IdText}"/></t:template></t:Column><t:Column><t:label><Label text="{i18n>Group}"/></t:label><t:template><Text text="{localJson>SelectionParameter7}"/></t:template></t:Column><t:Column><t:label><Label text="{i18n>SelectBoq}"/></t:label><t:template><Input showValueHelp="true" \r\n                                    valueHelpOnly="true" \r\n                                    width="170px"\r\n                                    value="{localJson>Group}"\r\n                                    valueHelpRequest="onDisplay2SearchSubBoqDialog"\r\n                                    showSuggestion="true"><suggestionItems><core:Item text="{BoqSub}" key="{BoqSub}"/></suggestionItems></Input></t:template></t:Column></t:columns></t:Table></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/SelectMultiWBSDialoge.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:vh="sap.ui.comp.valuehelpdialog" xmlns:fb="sap.ui.comp.filterbar"\r\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><vh:ValueHelpDialog ok="onWBSSelectionChange" cancel="onWBSContractClose" title="{i18n>WBS}" \r\n\t supportRanges="false" supportRangesOnly="false" key="Model" class="sapUiSizeCompact"><vh:filterBar><fb:FilterBar advancedMode="true" showRestoreButton="true" filtersDialogSearchForFilter="onVHContractSearch" filterBarExpanded="true"\r\n\t\t\t\tsearch="handleSearchWBSPress" filtersDialogSearch="onVHContractSearch" isRunningInValueHelpDialog="true" ><fb:filterGroupItems><fb:FilterGroupItem groupName="Contract" name="n3" label="{i18n>Group}"><fb:control><Input id="idSearchWBSGroupDialog" showValueHelp="true"  change="cleanSearGroupWBS" valueHelpRequest="onDisplaySearchWBSGroup" maxLength="50"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="WBS" name="n1" label="{i18n>WBS}"><fb:control><Input id="idSearchWBSDialog" valueHelpRequest="onSearchWBSDialog" showValueHelp="true"   change="cleanWBSDialog" maxLength="50"/></fb:control></fb:FilterGroupItem><fb:FilterGroupItem groupName="GroupBoq" name="n1" label="{i18n>Boq}"><fb:control><Input id="idSearchGroupBoqDialog" enabled = "{localJson>/selectGroupBoq}"\r\n\t\t\t\t\t\t\t valueHelpRequest="onSearchGroupBoqDialog" showValueHelp="true"   change="cleanGroupBoqDialog" maxLength="50"/></fb:control></fb:FilterGroupItem></fb:filterGroupItems></fb:FilterBar></vh:filterBar></vh:ValueHelpDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ServiceLongText.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" \r\nxmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core"><Dialog resizable="true" type=\'Message\'><content><Text id="idLongText" ></Text></content><buttons><Button icon="sap-icon://decline" tooltip="{i18n>Close}" type="Emphasized"  press="onCloseLongTextFragment"/></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ServiceSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Service" search="handleSearchService" confirm="onSelectServiceList" \r\n\tcancel="onSelectServiceList"\r\n\t\t><StandardListItem description="{= parseFloat(${IdNumber}) }" title="{IdText}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ServiceTypeSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Service Type" \r\n\tsearch="handleSearchServicetype" confirm="onSelectServicetypeList" cancel="onSelectServicetypelist"\r\n\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/SubBoqSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Boq" search="handleSearchSubBoq" confirm="onSelectSubBoqList" cancel="onSelectSubBoqList"\r\n\t><StandardListItem title="{BoqSub}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/SuperiorWBSSSearchDialog.fragment.xml":'<core:FragmentDefinition class="sapUiSizeCompact"\r\n        xmlns="sap.m"\r\n        xmlns:core="sap.ui.core"\r\n      \r\n        xmlns:l="sap.ui.layout"\r\n        xmlns:f="sap.ui.layout.form"\r\n        xmlns:commons="sap.ui.commons"\r\n        xmlns:table="sap.ui.table"\r\n        xmlns:ui="sap.ui.table"\r\n        xmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog\r\n    afterClose="onAfterClose"\r\n    contentWidth="500px"\r\n            class="sapUiSizeCompact"\r\n            title="{i18n>SupeiorWBS}"><content><f:SimpleForm\r\n\t\t\t\t\tlayout="ResponsiveGridLayout" \r\n\t\t\t\t\tlabelSpanXL="4" \r\n\t\t\t\t\tlabelSpanL="6" \r\n\t\t\t\t\tlabelSpanM="4" \r\n\t\t\t\t\tlabelSpanS="4"\r\n\t\t\t\t\tadjustLabelSpan="false" \r\n\t\t\t\t\temptySpanXL="0" \r\n\t\t\t\t\temptySpanL="0" \r\n\t\t\t\t\temptySpanM="0" \r\n\t\t\t\t\temptySpanS="0" \r\n\t\t\t\t\tcolumnsXL="4" \r\n\t\t\t\t\tcolumnsL="2" \r\n\t\t\t\t\tcolumnsM="4"\r\n\t\t\t\t\tclass="editableForm"><f:content><Label text="{i18n>Description / Code}"></Label><Input id="idDesc" /><Label text="{i18n>Length}"></Label><Input id="idlenth" type="Number" width="20%" /></f:content></f:SimpleForm><Toolbar><ToolbarSpacer/><Button type="Emphasized" text="{i18n>SearchSupeiorWBS}" press="handleSearWBS" icon="sap-icon://search"/></Toolbar><ui:Table id="idListTable" \r\n              rows="{localJson>/SupeiorWBSSet}" \r\n\t\t\t visibleRowCount="8"  \r\n\t\t\t rowSelectionChange="onSelectCheque"  \r\n\t\t\t selectionMode="Single"\r\n\t\t\tenableSelectAll="false"\r\n\t\t\t selectionBehavior="Row"\r\n\t\t\t ><ui:columns  ><ui:Column width="85%" autoResizable="true"><Label text="{i18n>IdNumber}"/><ui:template><Text text="{localJson>IdNumber}"/></ui:template></ui:Column><ui:Column width="85%" autoResizable="true"><Label text="{i18n>Description}"/><ui:template><Text text="{localJson>IdText}"/></ui:template></ui:Column></ui:columns  ></ui:Table></content><buttons><Button text="{i18n>Cancel}" press="_handleCancelPresswbs" /></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/SuperiorWBSSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\r\n xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select SuperiorWBS" \r\n\t search="handleSearchSuperior" \r\n\t confirm="onSelectSuperiorList" \r\n\t cancel="onSelectSuperiorList"\r\n\t\t><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/VendorSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Vendor" \r\n\tsearch="handleSearchVendor" confirm="onSelectVendorList" \r\n\tcancel="onSelectVendorList"><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>\r\n',
	"com/cicre/po/view/fragments/ViewSheetDialog.fragment.xml":'<core:FragmentDefinition\r\n\txmlns="sap.m"\r\n\txmlns:core="sap.ui.core"><ActionSheet\r\n\tafterClose="onVoewAfterClose"\r\n\t\ttitle="Choose Your Action"\r\n\t\tshowCancelButton="true"\r\n\t\tplacement="Bottom"><buttons><Button text="{i18n>ServiceView}" type="Accept" press="addcontractualsc1" /><Button text="{i18n>BuildingServiceView}" type="Accept"  press="addcontractualsc2" /><Button text="{i18n>BuildingServiceGrpView}" type="Accept"  press="addcontractualsc3" /></buttons></ActionSheet></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/WBSGroupSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\r\n xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select Group" \r\n\t search="handleSearchWBSGroup" \r\n\t confirm="onSelectWBSGroupList" \r\n\t cancel="onSelectWBSGroupList"\r\n\t\t ><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/WBSSearchDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\r\n xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found"\r\n\t title="Select WBS" \r\n\t search="handleSearchWBS" \r\n\t confirm="onSelectWBSList" \r\n\t cancel="onSelectWBSList"\r\n\t\t ><StandardListItem title="{IdText}" description="{IdNumber}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/ZoneSearchDialogfilter.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Zone" \r\n     search="handleSearchZonefilter" confirm="onSearchZonefilter" \r\n\tcancel="onSearchZonefilter" \r\n\t></SelectDialog></core:FragmentDefinition>\r\n',
	"com/cicre/po/view/fragments/groupSearchDialogfilter.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Group" \r\n     search="handleSearchGroupfilter" confirm="onSearchGroupfilter" \r\n\tcancel="onSearchGroupfilter" \r\n\t></SelectDialog></core:FragmentDefinition>\r\n',
	"com/cicre/po/view/fragments/selectBoqDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog noDataText="No Data Found" title="Select Boq" \r\n    search="handleSearchBoq" \r\n    confirm="onSelectBoqList"\r\n    cancel="onSelectBoqList"\r\n\t><StandardListItem title="{BoqSub}"  description ="{BoqDesc}" type="Active" /></SelectDialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/variationOrder.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><ColumnListItem><cells><ComboBox selectedKey="{localJson>Action}" \r\n                enabled="false"\r\n\t\t\t\tchange="handleChangeA" \r\n\t\t\t\titems="{path: \'/ValueHelpSet\', \r\n\t\t\t\tfilters: [{path: \'ValueHelpType\', operator: \'EQ\', value1: \'VAction\'}]}"><items><core:Item text="{IdText}" key="{IdNumber}"/></items></ComboBox><Text text="{localJson>BuildingNo}"/><Text text="{localJson>Zzone}"/><Text text="{localJson>Group}"/><Text text="{localJson>Model}"/><Text text="{localJson>ModelDesc}"/><Text text="{localJson>Boq}"/><Text text="{localJson>BoqDesc}"/><Text text ="{path : \'localJson>Amount\', formatter : \'com.cicre.po.model.formatter.NumberWithCommas\'}" /></cells></ColumnListItem></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/variationOrderTable.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog resizable="true" class="sapUiSizeCompact" title="{i18n>Variation Order}"><content><Panel width="80rem"><Table id="idBuildings"><columns><Column><Text text="{i18n>Action}"/></Column><Column><Text text="{i18n>Building Id}"/></Column><Column><Text text="{i18n>Zone Code}"/></Column><Column><Text text="{i18n>Group Code}"/></Column><Column><Text text="{i18n>Model}"/></Column><Column><Text text="{i18n>Model Description}"/></Column><Column><Text text="{i18n>Boq}"/></Column><Column><Text text="{i18n>Boq Description}"/></Column><Column><Text text="{i18n>Amount}"/></Column></columns></Table></Panel></content><buttons><Button text="{i18n>Close}" press="handleCloseVariation"/></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/variationOrderTablesrv.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form"\r\n\txmlns:core="sap.ui.core" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog resizable="true" class="sapUiSizeCompact" title="{i18n>Variation Order}"><content><Panel width="80rem"><Table id="idsrvDelete"><columns><Column width = "5rem" ><Text text="{i18n>Building Id}"/></Column><Column width = "10rem"><Text text="{i18n>Contractual indicator}"/></Column><Column width = "25rem" ><Text text="{i18n>short text}"/></Column><Column width = "4rem"><Text text="{i18n>UOM}"/></Column><Column width = "10rem"><Text text="{i18n>contract qty}"/></Column><Column width = "10rem"><Text text="{i18n>price}"/></Column><Column width = "10rem"><Text text="{i18n>Amount}"/></Column></columns></Table></Panel></content><buttons><Button text="{i18n>Close}" press="handleCloseVariationsrv"/></buttons></Dialog></core:FragmentDefinition>',
	"com/cicre/po/view/fragments/variationOrdersrv.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><ColumnListItem><cells><Text text="{localJson>Buildingno}"/><Text text="{localJson>Txt}"/><TextArea  value="{localJson>SrvLongText}" enabled="false" width="100%" /><Text text="{localJson>BaseUom}"/><Text text="{localJson>Qty}"/><Text text="{localJson>PriceUnit}"/><Text text="{ parts:[{path:\'localJson>Amount\'},{path:\'localJson>/Currency\'}], type: \'sap.ui.model.type.Currency\', formatOptions: {showMeasure: false} }"   /></cells></ColumnListItem></core:FragmentDefinition>'
});
//# sourceMappingURL=Component-preload.js.map
