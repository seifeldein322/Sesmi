<mvc:View controllerName="com.cicre.po.controller.Object" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:commons="sap.suite.ui.commons"
    xmlns:f="sap.ui.layout.form" xmlns:uxap="sap.uxap" xmlns="sap.m" xmlns:ui="sap.ui.table" xmlns:l="sap.ui.layout"
    xmlns:layout="sap.ui.layout" core:require="{ formatMessage: 'sap/base/strings/formatMessage' }">

    <Page title="{i18n>Contract}" showNavButton="true" navButtonPress="onNavBack" class="sapUiSizeCompact">
        <content>
            <uxap:ObjectPageLayout>
                <uxap:headerTitle>
                    <uxap:ObjectPageHeader objectSubtitle="{i18n>HeaderDisplay}" objectTitle="{i18n>Display}">
                    </uxap:ObjectPageHeader>
                </uxap:headerTitle>
                <uxap:headerContent>


                    <layout:HorizontalLayout>
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <ObjectAttribute title="{i18n>DocumentID}"
                                text="{= ${localJson>/PurchDoc} === '' ? ${localJson>/PoNumber} : ${localJson>/PurchDoc}}" />
                            <ObjectAttribute title="{i18n>CompanyCode}" text="{localJson>/CompDesc} " />
                           

                            <!-- </layout:HorizontalLayout>-->
                            <ObjectAttribute title="{i18n>EstimatedStatus}"  visible="false" text="{localJson>/Status}" />
                            <ObjectAttribute title="{i18n>OriginalStatus}" text="{localJson>/StatusOr}" /> <!--id="dd"-->
                           <!-- <ObjectAttribute title="{i18n>Overviewstatus}"  text="{localJson>/Overviewstatus}" />
                            <ObjectAttribute title="{i18n>Userstatus}"  text="{localJson>/Userstatus}"  visible="{= !!${localJson>/Userstatus}}" />-->
                            

                        </layout:VerticalLayout>



                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd" visible="false">
                            <Label text="{i18n>EstimatedContractValue}" />

                            <ObjectNumber
                                number="{ parts:[{path:'localJson>/EstimatedContractValue'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                state="Success" 
                                unit="{localJson>/Currency}"/>

                        </layout:VerticalLayout>

                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="{i18n>OriginalContractValue}" />

                            <ObjectNumber
                                number="{ parts:[{path:'localJson>/OriginalContractValue'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                state="Success" unit="{localJson>/Currency}" />


                        </layout:VerticalLayout>
                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="{i18n>VariationOrderValue}" unit="{localJson>/Currency}" />
                            <ObjectNumber
                                number="{ parts:[{path:'localJson>/VariationOrderValue'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                state="Success" unit="{localJson>/Currency}"/>
                        </layout:VerticalLayout>

                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="{i18n>AddendumValue}" />
                            <ObjectNumber
                                number="{ parts:[{path:'localJson>/AddendumValue'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                state="Success" unit="{localJson>/Currency}" />
                        </layout:VerticalLayout>

                         <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="{i18n>RevisedContractValue}" />
                            <ObjectNumber
                                number="{ parts:[{path:'localJson>/RevisedContractValue'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                state="Success" unit="{localJson>/Currency}" />
                        </layout:VerticalLayout>


                        <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
                            <Label text="{i18n>TotalContractValue}" />
                            <ObjectNumber
                                number="{ parts:[{path:'localJson>/TotalContractValue'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                state="Success"
                                unit="{localJson>/Currency}" />
                          <!--  <Label text="{i18n>RevisedContractValue}" />
                            <ObjectNumber
                                number="{ parts:[{path:'localJson>/RevisedContractValue'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                state="Success" 
                                unit="{localJson>/Currency}"/>-->
                        </layout:VerticalLayout>
                    </layout:HorizontalLayout>

                </uxap:headerContent>
                <uxap:sections>
                            <uxap:ObjectPageSection title="{i18n>HeaderMiantenance}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>HeaderMiantenance}">
                                <uxap:blocks>


                                    <f:SimpleForm id="idObjectMaintForm" layout="ResponsiveGridLayout" labelSpanXL="4"
                                        labelSpanL="4" labelSpanM="4" labelSpanS="4" columnsXL="2" columnsL="2"
                                        columnsM="2" class="editableForm">
                                        <f:toolbar>
                                            <Toolbar>

                                                <Title text="{i18n>HeaderMaintenance}" />
                                                <ToolbarSpacer />
                                            </Toolbar>
                                        </f:toolbar>
                                        <f:content>
                                            <core:Title />
                                             <Label text="{i18n>CompanyCode: }" class="sapUiTinyMarginTop"  />
                                            <ComboBox selectedKey="{localJson>/CompCode}" enabled="false"  width="100%"
                                            
                                             id="idCompCode" items="{path: '/ValueHelpSet', 
								              	filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'CompCode'}]}">
                                              <items>
                                                <core:Item text="{IdText}" key="{IdNumber}" />
                                               </items>
                                              </ComboBox>

                                            <Label text="{i18n>PurchaseOrganization}" visible="false"
                                                class="sapUiTinyMarginTop" />
                                            <ComboBox selectedKey="{localJson>/PurchOrg}" visible="false"
                                                enabled="false" items="{path: '/ValueHelpSet', 
									filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'PORG'}]}">
                                                <items>
                                                    <core:Item text="{IdText}" key="{IdNumber}" />
                                                </items>
                                            </ComboBox>

                                            <Label text="{i18n>PurchaseGroup}" visible="false"
                                                class="sapUiTinyMarginTop" />
                                            <ComboBox selectedKey="{localJson>/PurGroup}" visible="false"
                                                enabled="false" items="{path: '/ValueHelpSet', 
									filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'PGRP'}]}">
                                                <items>
                                                    <core:Item text="{IdText}" key="{IdNumber}" />
                                                </items>
                                            </ComboBox>
                                            <Label text="{i18n>Project}" class="sapUiTinyMarginTop" />

                                            <ComboBox selectedKey="{localJson>/ProjetTemp}" enabled="false"
                                                id="idProject" items="{path: '/ValueHelpSet', 
									filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'PROJ'}]}">
                                                <items>
                                                    <core:Item text="{IdText}" key="{IdNumber}" />
                                                </items>
                                            </ComboBox>
                                            <Label text="{i18n>ContractDescription}" class="sapUiTinyMarginTop" />
                                            <TextArea id="idContractDescription" maxLength="40"
                                                enabled="{localJson>/editMode}" value="{localJson>/ContractDesc}" />

                                            <Label text="{i18n>LongDescription}" class="sapUiTinyMarginTop" />
                                            <TextArea id="idLongDescription" maxLength="300"
                                                enabled="{localJson>/editMode}" value="{localJson>/LongDesc}" />

                                            <Label text="{i18n>Vendor}" class="sapUiTinyMarginTop" />
                                            <Input id="idVendor" showValueHelp="true" valueHelpOnly="false"
                                                enabled="{= ${localJson>/editMode} &amp;&amp; ${localJson>/ReleaseStatus} !== 'RE' }"
                                                valueHelpRequest="onDisplaySearchVendorDialog">
                                            </Input>
                                            <!-- <ComboBox selectedKey="{localJson>/Vendor}" enabled="{localJson>/editMode}"
								items="{path: '/ValueHelpSet', 
									filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'Vendor'}]}">
									<items>
										<core:Item text="{IdText}" key="{IdNumber}"/>
									</items>
                        	</ComboBox> -->

                                            <Label text="{i18n>Currency}" class="sapUiTinyMarginTop" />
                                            <Input id="idCurrency" change="onchangeCurrency"  value="{localJson>/Currency}"
                                                enabled="{= ${localJson>/editMode} &amp;&amp; ${localJson>/ReleaseStatus} !== 'RE' }">
                                            </Input>
                                            <Label text="{i18n>ContractType}" class="sapUiTinyMarginTop" />
                                            <ComboBox selectedKey="{localJson>/DocType}" enabled="false" items="{path: '/ValueHelpSet', 
									filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'DOC_TYPE'}]}">
                                                <items>
                                                    <core:Item text="{IdText}" key="{IdNumber}" />
                                                </items>
                                            </ComboBox>

                                            <Label text="{i18n>MeasurementMethod}" class="sapUiTinyMarginTop" />
                                            <ComboBox id="idMeasurementMethod" change="changeContractType"
                                                enabled="{localJson>/editMode}" selectedKey="{localJson>/MeasMethod}"
                                                items="{path: '/ValueHelpSet', 
                                        filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'MeasMethod'}]}">
                                                <items>
                                                    <core:Item text="{IdText}" key="{IdNumber}" />
                                                </items>
                                            </ComboBox>

                                            <Label text="{i18n>ConstructionType}" class="sapUiTinyMarginTop" />
                                            <ComboBox id="idConstructionType"
                                                selectedKey="{localJson>/ConstructionType}"
                                                enabled="{localJson>/editMode}" items="{path: '/ValueHelpSet', 
                                        filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'ConstType'}]}">
                                                <items>
                                                    <core:Item text="{IdText}" key="{IdNumber}" />
                                                </items>
                                            </ComboBox>

          

                                            <core:Title />
                                            <Label text="{i18n>CreationDate}" class="sapUiTinyMarginTop" />
                                                <DatePicker id="idDocumentDate" 
                                                enabled="false"
                                                value="{path : 'localJson>/DocDate', formatter : 'com.cicre.po.model.formatter.formatDateMs'}"
                                                displayFormat="dd-MM-yyyy"
                                                valueFormat="yyyy-MM-dd" />

                                            <Label text="{i18n>SignOffDate}" class="sapUiTinyMarginTop" />
                                                <DatePicker id="idSignOffDate" 
                                                enabled="false"
                                                value="{path : 'localJson>/SigninDate', formatter : 'com.cicre.po.model.formatter.formatDateMs'}"
                                                displayFormat="dd-MM-yyyy"
                                                valueFormat="yyyy-MM-dd" />

                                            <Label text="{i18n>ValidFrom}" class="sapUiTinyMarginTop" />
                                                <DatePicker id="idValidFrom" 
                                                enabled="false"
                                                value="{path : 'localJson>/ValidFrom', formatter : 'com.cicre.po.model.formatter.formatDateMs'}"
                                                displayFormat="dd-MM-yyyy"
                                                valueFormat="yyyy-MM-dd" />

                                            <Label text="{i18n>ValidTo}" class="sapUiTinyMarginTop" />
                                                <DatePicker id="idValidTo" 
                                                enabled="false"
                                                value="{path : 'localJson>/ValidTo', formatter : 'com.cicre.po.model.formatter.formatDateMs'}"
                                                displayFormat="dd-MM-yyyy"
                                                valueFormat="yyyy-MM-dd" />

                                            <Label text="{i18n>RevisedValidTo}" class="sapUiTinyMarginTop" />
                                                <DatePicker id="idRevisedValidTo" 
                                                enabled="false"
                                                value="{path : 'localJson>/RevisedValidTo', formatter : 'com.cicre.po.model.formatter.formatDateMs'}"
                                                displayFormat="dd-MM-yyyy"
                                                valueFormat="yyyy-MM-dd" />

                                            <Label text="{i18n>IndexMonth}" class="sapUiTinyMarginTop" />
                                            <MultiComboBox id="idIndexMonth" items="{localJson>/IndexMonths}"
                                                enabled="{localJson>/editMode}" selectedKeys="{localJson>/IndexMonth}">
                                                <items>
                                                    <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                </items>
                                            </MultiComboBox>


                                            <Label text="{i18n>Consultant}" class="sapUiTinyMarginTop"
                                                visible="false" />
                                            <Input visible="false" id="idConsultant" showValueHelp="true"
                                                valueHelpOnly="false" enabled="{localJson>/editMode}"
                                                valueHelpRequest="onDisplaySearchVendorDialog">
                                            </Input>
                                            
                                                                              <Label text="{i18n>RefrenceContract}" class="sapUiTinyMarginTop" />

                                            <Input id="idRefrenceContract" enabled="{localJson>/editMode}"
                                                showValueHelp="true" valueHelpOnly="false"
                                                value="{localJson>/RefContract}"
                                                valueHelpRequest="onContractValueHelpPress">
                                            </Input>
                                       
                                            <Label text="{i18n>serviceType}" class="sapUiTinyMarginTop" />
                                            <Input id="idserviceType" showValueHelp="true" valueHelpOnly="false"
                                                enabled="{localJson>/editMode}"
                                                valueHelpRequest="onserviceTypeValueHelpPress"> </Input>
                                                

                                            <Label text="{i18n>ResponsiblepersonSS}" visible="false"  class="sapUiTinyMarginTop" />
                                            <ComboBox id="idResponsiblepersonSS"  visible="false" showSecondaryValues="true"
                                                enabled="{localJson>/editMode}" selectedKey="{localJson>/Ss}" items="{path: '/ValueHelpSet', 
                                        filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'PerSS'}]}">
                                                <items>
                                                    <core:ListItem key="{IdNumber}" text="{IdText}"
                                                        additionalText="{IdNumber}" />
                                                </items>
                                            </ComboBox>

                                            <Label text="{i18n>ResponsiblepersonIR}" visible="false" class="sapUiTinyMarginTop" />
                                            <ComboBox id="idResponsiblepersonIR" visible="false" showSecondaryValues="true"
                                                enabled="{localJson>/editMode}" selectedKey="{localJson>/Ir}" items="{path: '/ValueHelpSet', 
                                        filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'PerIR'}]}">
                                                <items>
                                                    <core:ListItem key="{IdNumber}" text="{IdText}"
                                                        additionalText="{IdNumber}" />
                                                </items>
                                            </ComboBox>

                                            <!--enabled="{localJson>/editMode}" -->
                                            <Label text="{i18n>CreationType}"  visible="false" class="sapUiTinyMarginTop" />
                                            
                                            <Select id="idCreationType"  visible="false" change="changeCreationType"
                                                selectedKey="{localJson>/CreationType}"
                                                enabled="{= ${localJson>/editMode} === false ? false : ${localJson>/StatusOr} === 'Released Original' &amp;&amp; ${localJson>/Status} !== 'COMPOSING' ? false : true}"
                                               items="{localJson>/CreationTypeList}">

                                                <items>
                                                     <core:Item text="{localJson>text}" key="{localJson>id}"  />
                                                </items>
                                            </Select>


                                            <Label text="{i18n>SupeiorWBS}" class="sapUiTinyMarginTop" />
                                            <Input id="idSupeiorWBS" value="{localJson>/WbsDesc}"
                                                enabled="{= ${localJson>/editMode} === false ? false :  true}"
                                                valueHelpRequest="onDisplaySearchidSupeiorWBSDialog"
                                                showValueHelp="true" valueHelpOnly="false" visible="true"></Input>

                                           <Label text="{i18n>المساحة التعاقدية}" class="sapUiTinyMarginTop"  visible ="false"/>
                                           <Input id="idContractualSpace" value="{localJson>/ContractualSpace}" visible ="false"
                                             enabled="{= ${localJson>/editMode} &amp;&amp; ${localJson>/ReleaseStatus} !== 'RE' }"
                                            maxlength="12" type="Number" />

                                            <!--valueHelpRequest="onDisplaySearchidSupeiorWBSDialog" showValueHelp="true" valueHelpOnly="false" visible="true"-->
                                            <!-- ${localJson>/CreationType} === 'O'-->


                                            <Label text="{i18n>MarkUp}" class="sapUiTinyMarginTop" />
                                            <Input id="idMarkUp"
                                                visible="{= ${localJson>/MeasMethod} === 'COST' ? true : false}"
                                                value="{localJson>/MarkUp}" enabled="{localJson>/editMode}" />


                                        </f:content>
                                    </f:SimpleForm>

                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>
                    <uxap:ObjectPageSection title="{i18n>EstimatedServices}" visible="false" >
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>EstimatedServices}">
                                <uxap:blocks>

                                    <ui:Table id="idEstimatedServicesTable"
                                        rows="{ path: 'localJson>/EstimatedContracts' }" visibleRowCount="6"
                                        selectionMode="None">
                                        <ui:toolbar>
                                            <OverflowToolbar>
                                                <content>
                                                    <Title text="{i18n>EstimatedServices}" level="H2" />
                                                    <ToolbarSpacer />
                                                    <Button type="Accept" icon="sap-icon://add"
                                                        press="handleAddEstimatedContract"
                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" />
                                                </content>
                                            </OverflowToolbar>
                                        </ui:toolbar>
                                        <ui:columns>
                                            <ui:Column width="880px" autoResizable="true">
                                                <Label text="{i18n>Servicedesc}" />
                                                <ui:template>
                                                    <Input value="{localJson>Servicedesc}" maxLength="40"
                                                        placeholder="Enter estimated description ....."
                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="220px" autoResizable="true">
                                                <Label text="{i18n>Amount}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        change="onChangeAmount"
                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? true : false }" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="70px" autoResizable="true">
                                                <ui:template>
                                                    <Button type="Reject" icon="sap-icon://sys-cancel"
                                                        press="deleteEstimatedContract"
                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>/estimatedMode} === true ? true : false }" />
                                                </ui:template>
                                            </ui:Column>
                                        </ui:columns>

                                    </ui:Table>

                    
                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>
                    <uxap:ObjectPageSection title="{i18n>Consolidated}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>Consolidated}">
                                <uxap:blocks>
                                    <ui:Table id="idConsulidatedTable"
                                        visible="{= ${localJso>/ViewCon1} === true ? false : true}" rows="{ path: 'localJson>/BoqConsulidatedItemSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }" visibleRowCount="8" selectionMode="None">
                                        <ui:extension>
                                            <OverflowToolbar>
                                                <content>
                                                    <Title text="{i18n>ConsolidatedServices}" level="H2" />
                                                    <Text text="({localJson>/ServicNOCount})"></Text>
                                                    <ToolbarSpacer />
                                                    <Button icon="sap-icon://download" press="DataExport" />
                                                    <Button type="Accept" icon="sap-icon://add"
                                                        press="handleOpenActionSheet" id="idBuildingsBtn"
                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== 'A'  }" />
                                                    <Button type="Accept" icon="sap-icon://detail-view"
                                                        press="handleOpenViewSheet" id="ViewBtn" />
                                                </content>
                                            </OverflowToolbar>
                                        </ui:extension>
                                        <ui:columns>
                                            <ui:Column width="120px" autoResizable="true">
                                                <Label text="{i18n>Contractual}" />
                                                <ui:template>
                                                    <Input value="{localJson>Txt}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="180px" autoResizable="true">
                                                <Label text="{i18n>Servicetype}" />
                                                <ui:template>
                                                    <ComboBox items="{localJson>/Service_TYPE}" enabled="false"
                                                        visible="{= !!${localJson>Eancat}}"
                                                        selectedKey="{localJson>Eancat}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="110px" autoResizable="true">
                                                <Label text="{i18n>Service}" />
                                                <ui:template>
                                                    <Input value="{localJson>Data}" enabled="false" />

                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="500px" autoResizable="true">
                                                <Label text="{i18n>ServiceDescription}" />

                                                <ui:template>
                                                    <TextArea value="{localJson>LongDesc}" enabled="false"
                                                        width="100%" />
                                                    <!-- <Input value="{localJson>LongDesc}" enabled="false"/>-->
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>UOM}" />
                                                <!-- value="{localJson>Uom}"-->
                                                <ui:template>
                                                    <Input 
                                                     value="{localJson>Uom}" 
                                                     visible="{= !!${localJson>Eancat}}"
                                                    enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="100px" autoResizable="true">
                                            <!-- value="{localJson>Qty}" -->
                                                <Label text="{i18n>Quantity}" />
                                                <ui:template>
                                                    <Input
                                                    value="{localJson>Qty}"
                                                    visible="{= !!${localJson>Eancat}}"
                                                    
                                                    enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Price}" />
                                                <ui:template>
                                                <!--value="{ parts:[{path:'localJson>PriceUnit'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"-->
                                                  <!-- value="{ parts:['localJson>PriceUnit' ,'localJson>/Currency' , 'localJson>Eancat' ], formatter: 'com.cicre.po.model.formatter.roundTotalDecimal'}"-->
                                                    <Input
                                                        value="{ parts:[{path:'localJson>PriceUnit'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                         visible="{= !!${localJson>Eancat}}"
                                                        maxLength="11" change="onPriceConsolidatedChange"
                                                        enabled="{= ${localJson>/editMode} === false ? false :${localJson>SrvStatus} !== 'A' ? true : false}" />
                                                </ui:template>
                                            </ui:Column>

                                            
                                            <ui:Column width="150px" autoResizable="true" visible="false">
                                                <Label text="{i18n>ProvisionRate}" />
                                                <!--value="{localJson>ProvisionRate}" -->
                                                <ui:template>
                                                    <Input 
                                                        change="onProvisionRateChange"
                                                        visible="{= !!${localJson>Eancat}}"
                                                        value="{localJson>ProvisionRate}"                                                  
                                                        type="Number"
                                                          enabled="{= ${localJson>/editMode} === false ? false :${localJson>SrvStatus} !== 'A' ? true : false}"/>
                                                </ui:template>
                                            </ui:Column>
                                            
                                            <ui:Column width="200px" autoResizable="true">
                                                <Label text="{i18n>Amount}" />
                                                <ui:template>
                                                <!-- value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"-->
                                                    <Input
                                                     value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        enabled="false"
                                                        visible="{= ${localJson>Eancat} === 'U' ? false : !!${localJson>Eancat}}" />
                                                </ui:template>
                                            </ui:Column>
                                        </ui:columns>
                                    </ui:Table>

                                    <!--	<Table id="idConsulidatedTable"  
									visible="{= ${localJso>/ViewCon1} === true ? false : true}"
				                    growing="true"
								   
				                    updateFinished="onUpdateFinished"
									 items="{ path: 'localJson>/BoqConsulidatedItemSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }">
        
										<headerToolbar>
											<Toolbar>
												<content>
													<Title text="{i18n>ConsolidatedServices}" level="H2"/>
													<ToolbarSpacer/>
													<Button  icon="sap-icon://download" press="DataExport" />

													<Button type="Accept" icon="sap-icon://add" 
													press="handleOpenActionSheet" id="idBuildingsBtn"
													enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== 'A'  }"/>
                                                 	<Button type="Accept" icon="sap-icon://detail-view" 
													press="handleOpenViewSheet" id="ViewBtn" />
												</content>
											</Toolbar>
										</headerToolbar>
										<columns>
										<Column width="100px">
												<Text text="{i18n>Contractual}"/>
											</Column>
											<Column width="135px">
												<Text text="{i18n>Service type}"/>
											</Column>
											<Column width="80px">
												<Text text="{i18n>Service}"/>
											</Column>
											<Column width="260px">
												<Text text="{i18n>ShortText}"/>
											</Column >
												<Column hAlign="Center" width="60px">
												<Text text="{i18n>UOM}"/>
											</Column>
											<Column hAlign="Center" width="60px">
												<Text text="{i18n>Quantity}"/>
											</Column>
											<Column hAlign="Center" width="60px">
												<Text text="{i18n>Price}"/>
											</Column>
										
                                     	<Column hAlign="Center" width="100px">
												<Text text="{i18n>Amount}"/>
											</Column>
										</columns>
										<items>
											<ColumnListItem>
												<cells>
												<Input value="{localJson>Txt}"  enabled="false"/>
											

										<ComboBox 	items="{localJson>/Service_TYPE}" enabled="false" 
										selectedKey="{localJson>Eancat}"  change="hanleChane" > 
                                        <items>
                                            <core:Item text="{localJson>text}" key="{localJson>id}"/>
                                        </items>
							           </ComboBox>	
													<Input value="{localJson>Data}"  enabled="false"/>													
													<Input value="{localJson>ShortDesc}"  enabled="false"/>
													<Input value="{localJson>Uom}"  enabled="false" />

													<Input value="{localJson>Qty}"  enabled="false" visible="{= ${localJson>Eancat} === 'U' ? false : true}"/>
													<Input value="{localJson>PriceUnit}"   change="onPriceConsolidatedChange" 
													enabled= "{= ${localJson>/editMode} === false ? false :${localJson>SrvStatus} !== 'A' ? true : false}" />
													<Input value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
													enabled="false" visible="{= ${localJson>Eancat} === 'U' ? false : true}"/>
													
													
												</cells>
											</ColumnListItem>
										</items>
									</Table>-->




                                    <!--	<ui:Table id="idConsuliatedTable"  
					 rows="{ path: 'localJson>/BuildingConsulidatedItemSet'}"
					visible="true"  visibleRowCount="10"  selectionMode="None" >
									
								<ui:columns  >
              	<ui:Column width="120px" hAlign="Center">
						<Label text="{i18n>Contractual}" />
						<ui:template>
                      <Input value="{localJson>Txt}"  hAlign="Center"/>				
	                 	</ui:template>
					</ui:Column>

						<ui:Column width="180px" autoResizable="true">
						<Label text="{i18n>Servicetype}" />
						<ui:template>
							<Input value="{localJson>Eancat}"  hAlign="Center"/>
						</ui:template>
					</ui:Column>

						<ui:Column width="110px" hAlign="Center">
						<Label text="{i18n>Service}" />
						<ui:template>
				          	<Input value="{localJson>Data}"  enabled="false"/>

						</ui:template>
					</ui:Column>
						<ui:Column width="320px" autoResizable="true">
						<Label text="{i18n>ShortText}" />
						<ui:template>
				          <Input value="{localJson>ShortDesc}" enabled="false"/>
						</ui:template>
					</ui:Column>
	<ui:Column width="100px" hAlign="Center">
						<Label text="{i18n>Buildingno}" />
						<ui:template>
				          <Input value="{localJson>Buildingno}" enabled="false"/>
						</ui:template>
					</ui:Column>
						<ui:Column width="70px" hAlign="Center">
						<Label text="{i18n>UOM}" />
						<ui:template>
				          	<Input value="{localJson>Uom}" enabled="false" />
						</ui:template>
					</ui:Column>

					<ui:Column width="100px" hAlign="Center">
						<Label text="{i18n>Quantity}" />
						<ui:template>
				      <Input value="{localJson>Qty}"  enabled="false"/>
						</ui:template>
					</ui:Column>

					<ui:Column width="100px" hAlign="Center">
						<Label text="{i18n>Price}" />
						<ui:template>
                      <Input value="{localJson>PriceUnit}" width="80px"  change="onPriceConsolidatedChange" enabled="false" />								</ui:template>
					</ui:Column>

					<ui:Column width="150px" hAlign="Center">
						<Label text="{i18n>Amount}" />
						<ui:template>
				        		<Input value="{ localJson>Amount}"
								enabled="false" />
						</ui:template>
					</ui:Column>
	                 </ui:columns  >
									</ui:Table>-->
                                    <Table id="idConsuliatedTable" visible="false" items="{ path: 'localJson>/BuildingConsulidatedItemSet',length: 2000000,
									 sorter : {
                                     path : 'sortNum' }
                                                 }">
                                        <headerToolbar>

                                        </headerToolbar>

                                        <columns>
                                            <Column width="100px">
                                                <Text text="{i18n>Contractual}" />
                                            </Column>
                                            <Column width="150px">
                                                <Text text="{i18n>Service type}" />
                                            </Column>
                                            <Column width="80px">
                                                <Text text="{i18n>Service}" />
                                            </Column>
                                            <Column width="200px">
                                                <Text text="{i18n>ShortText}" />
                                            </Column>
                                            <Column width="100px">
                                                <Text text="{i18n>Building}" />
                                            </Column>
                                            <Column hAlign="Center" width="60px">
                                                <Text text="{i18n>UOM}" />
                                            </Column>
                                            <Column hAlign="Center" width="80px">
                                                <Text text="{i18n>Quantity}" />
                                            </Column>
                                            <Column hAlign="Center" width="80px">
                                                <Text text="{i18n>Price}" />
                                            </Column>

                                            <Column hAlign="Center" width="80px">
                                                <Text text="{i18n>Amount}" />
                                            </Column>

                                        </columns>
                                        <items>
                                            <ColumnListItem>
                                                <cells>
                                                    <Input value="{localJson>Txt}" width="80px" enabled="false" />


                                                    <ComboBox items="{localJson>/Service_TYPE}" enabled="false"
                                                        selectedKey="{localJson>Eancat}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>

                                                    <Input value="{localJson>Data}" width="80px" enabled="false" />
                                                    <!--<Input value="{localJson>ShortDesc}" width="200px" enabled="false"/>-->
                                                    <TextArea value="{localJson>LongDesc}" enabled="false"
                                                        width="100%" />
                                                    <Input value="{localJson>Buildingno}" width="100px"
                                                        enabled="false" />
                                                    <Input value="{localJson>Uom}" width="60px" enabled="false" />

                                                    <Input value="{localJson>Qty}" width="80px" enabled="false" />
                                                    <Input value="{localJson>PriceUnit}" width="80px"
                                                        change="onPriceConsolidatedChange" enabled="false" />
                                                    <Input
                                                        value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        enabled="false"
                                                        visible="{= ${localJson>Eancat} === 'U' ? false : true}" />

                                                </cells>
                                            </ColumnListItem>
                                        </items>
                                    </Table>

                                    <ui:Table id="idConsuliatedTableBuilding"
                                        visible="{= ${localJso>/ViewCon2} === true ? false : true}" rows="{ path: 'localJson>/forBBuildingConsulidatedItemSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }" visibleRowCount="8" selectionMode="None">
                                        <ui:toolbar>
                                            <OverflowToolbar>
                                                <content>
                                                    <Title text="{i18n>ConsolidatedServices}" level="H2" />
                                                    <ToolbarSpacer />
                                                    <Button tooltip="{i18n>displayViewFilterOptions}"
                                                        id="forBBuildingConsulidatedItemSet" type="Emphasized"
                                                        icon="sap-icon://filter" press="onFilterServices" />
                                                    <Button type="Accept" icon="sap-icon://detail-view"
                                                        press="handleOpenViewSheet" id="ViewBttt" />
                                                </content>
                                            </OverflowToolbar>
                                        </ui:toolbar>
                                        <ui:columns>
                                            <ui:Column width="120px" autoResizable="true">
                                                <Label text="{i18n>Contractual}" />
                                                <ui:template>
                                                    <Input value="{localJson>Txt}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Servicetype}" />
                                                <ui:template>
                                                    <ComboBox items="{localJson>/Service_TYPE}" enabled="false"
                                                    visible="{= !!${localJson>Eancat}}"
                                                        selectedKey="{localJson>Eancat}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="100px" autoResizable="true">
                                                <Label text="{i18n>Service}" />
                                                <ui:template>
                                                    <Input value="{localJson>Data}" enabled="false" />

                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="500px" autoResizable="true">
                                                <Label text="{i18n>ServiceDescription}" />
                                                <ui:template>
                                                    <!--  <Input value="{localJson>ShortDesc}" enabled="false"/>-->
                                                    <TextArea value="{localJson>LongDesc}" enabled="false"
                                                        width="100%" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>Buildingno}" />
                                                <ui:template>
                                                    <Input value="{localJson>Buildingno}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>UOM}" />
                                                <ui:template>
                                                    <Input value="{localJson>Uom}" visible="{= !!${localJson>Eancat}}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="100px" autoResizable="true">
                                                <Label text="{i18n>Quantity}" />
                                                <ui:template>
                                                    <Input value="{localJson>Qty}" visible="{= !!${localJson>Eancat}}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="100px" autoResizable="true">
                                                <Label text="{i18n>Price}" />
                                                <ui:template>
                                                    <Input value="{localJson>PriceUnit}" 
                                                    
                                                    width="80px"
                                                        change="onPriceConsolidatedChange" visible="{= !!${localJson>Eancat}}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Amount}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        enabled="false"
                                                        visible="{= ${localJson>Eancat} === 'U' ? false : !!${localJson>Eancat}}" />
                                                </ui:template>
                                            </ui:Column>
                                        </ui:columns>
                                    </ui:Table>
                                    <!--	<Table id="idConsuliatedTableBuilding" inset="false" 
									visible="{= ${localJso>/ViewCon2} === true ? false : true}"
									  growing="true"
										items="{ path: 'localJson>/forBBuildingConsulidatedItemSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }"
									>  
									<headerToolbar>
									<Toolbar>
										<ToolbarSpacer></ToolbarSpacer>
									
										<Button tooltip="{i18n>displayViewFilterOptions}"  id= "forBBuildingConsulidatedItemSet" type="Emphasized" icon="sap-icon://filter" press="onFilterServices"/>
										<Button type="Accept" icon="sap-icon://detail-view" press="handleOpenViewSheet" id="ViewBttt" />
													
									</Toolbar>
								</headerToolbar>
										
										<columns>
										<Column width="100px">
												<Text text="{i18n>Contractuall}"/>
											</Column>
											<Column width="150px">
												<Text text="{i18n>Service type}"/>
											</Column>
											<Column width="80px">
												<Text text="{i18n>Service}"/>
											</Column>
											<Column width="200px">
												<Text text="{i18n>ShortText}"/>
											</Column >
												<Column width="100px">
												<Text text="{i18n>Building}"/>
											</Column >
												<Column hAlign="Center" width="60px">
												<Text text="{i18n>UOM}"/>
											</Column>
											<Column hAlign="Center" width="80px">
												<Text text="{i18n>Quantity}"/>
											</Column>
											<Column hAlign="Center" width="80px">
												<Text text="{i18n>Price}"/>
											</Column>
										
                                     	<Column hAlign="Center" width="80px">
												<Text text="{i18n>Amount}"/>
											</Column>
										
										</columns>
										<items>
											<ColumnListItem>
												<cells>
												<Input value="{localJson>Txt}" width="80px" enabled="false"/>
												 
																
										<ComboBox 	items="{localJson>/Service_TYPE}" enabled="false" 
										selectedKey="{localJson>Eancat}"  change="hanleChane" > 
                                        <items>
                                            <core:Item text="{localJson>text}" key="{localJson>id}"/>
                                        </items>
							           </ComboBox>	
												
													<Input value="{localJson>Data}" width="80px" enabled="false"/>													
													<Input value="{localJson>ShortDesc}" width="200px" enabled="false"/>
													<Input value="{localJson>Buildingno}" width="100px" enabled="false"/>
													<Input value="{localJson>Uom}" width="60px" enabled="false" />

													<Input value="{localJson>Qty}" width="80px" enabled="false"/>
													<Input value="{localJson>PriceUnit}" width="80px"  change="onPriceConsolidatedChange" enabled="false" />
													<Input value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
													enabled="false" visible="{= ${localJson>Eancat} === 'U' ? false : true}"/>
												</cells>
											</ColumnListItem>
										</items>
									</Table>-->
                                    <ui:Table id="idConsuliatedTableGroup"
                                        visible="{= ${localJso>/ViewCon3} === true ? false : true}" rows="{ path: 'localJson>/ServiceGroupSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }" visibleRowCount="10" selectionMode="None">
                                        <ui:toolbar>
                                            <OverflowToolbar>
                                                <content>
                                                    <Title text="{i18n>ConsolidatedServices}" level="H2" />
                                                    <ToolbarSpacer />
                                                    <Button tooltip="{i18n>displayViewFilterOptions}" type="Emphasized"
                                                        icon="sap-icon://filter" press="onFilterServices" />

                                                    <Button type="Accept" icon="sap-icon://detail-view"
                                                        press="handleOpenViewSheet" id="ViewBt3" />
                                                </content>
                                            </OverflowToolbar>
                                        </ui:toolbar>
                                        <ui:columns>
                                            <ui:Column width="180px" autoResizable="true">
                                                <Label text="{i18n>Contractual}" />
                                                <ui:template>
                                                    <Input value="{localJson>Txt}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="180px" autoResizable="true">
                                                <Label text="{i18n>ServiceGroup}" />
                                                <ui:template>
                                                    <Input value="{localJson>MatlGroup}" enabled="false" />

                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="380px" autoResizable="true">
                                                <Label text="{i18n>GroupText}" />
                                                <ui:template>
                                                    <Input value="{localJson>Matdesc}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="160px" autoResizable="true">
                                                <Label text="{i18n>NoofBuilding}" />
                                                <ui:template>
                                                    <Input value="{localJson>Buildingnum}" enabled="false" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="240px" autoResizable="true">
                                                <Label text="{i18n>Amount}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        enabled="false" />
                                                </ui:template>
                                            </ui:Column>


                                        </ui:columns>
                                    </ui:Table>
                                    <!--	<Table id="idConsuliatedTableGroup" inset="false" 
										visible="{= ${localJso>/ViewCon3} === true ? false : true}"
									  growing="true"
										items="{ path: 'localJson>/ServiceGroupSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }"
									>
										<headerToolbar>
									<Toolbar>
										<ToolbarSpacer></ToolbarSpacer>
                                  <Button tooltip="{i18n>displayViewFilterOptions}" type="Emphasized" icon="sap-icon://filter" press="onFilterServices"/>

									<Button type="Accept" icon="sap-icon://detail-view" press="handleOpenViewSheet" id="ViewBt3" />
													
									</Toolbar>
								</headerToolbar>
										
										<columns>
										<Column width="100px">
												<Text text="{i18n>Contractual}"/>
											</Column>
											<Column width="200px">
												<Text text="{i18n>Service Group}"/>
											</Column>
											<Column width="150px">
												<Text text="{i18n>Group Text}"/>
											</Column>
											<Column width="100px">
												<Text text="{i18n>No of Building}"/>
											</Column >
												<Column width="200px">
												<Text text="{i18n>Amount}"/>
											</Column >
										</columns>
										<items>
											<ColumnListItem>
												<cells>
											     	<Input value="{localJson>Txt}" width="80px" enabled="false"/>	
													<Input value="{localJson>MatlGroup}" width="200px" enabled="false"/>													
													<Input value="{localJson>Matdesc}" width="150px" enabled="false"/>													
                                                     <Input value="{localJson>Buildingnum}" width="100px" enabled="false"/>													
													<Input value="{ parts:[{path:'localJson>Amount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
													enabled="false" />
												
												</cells>
											</ColumnListItem>
										</items>
									</Table>-->
                                    <!--show Group-->
                                    <!--<Table id="idConsuliatedTableGrouppGroup" inset="false" 
												visible="{= ${localJso>/ViewCon3} === true ? false : true}"
									items="{localJson>/ServiceGroupSet}">
										<headerToolbar>
									<Toolbar>
										<ToolbarSpacer></ToolbarSpacer>
                                  <Button tooltip="{i18n>displayViewFilterOptions}" type="Emphasized" icon="sap-icon://filter" press="onFilterServices"/>

									<Button type="Accept" icon="sap-icon://detail-view" press="handleOpenViewSheet" id="ViewBt333" />
													
									</Toolbar>
								</headerToolbar>
										
										<columns>
										<Column width="100px">
												<Text text="{i18n>Contractual}"/>
											</Column>
											<Column width="200px">
												<Text text="{i18n>Service Group}"/>
											</Column>
											<Column width="150px">
												<Text text="{i18n>Group Text}"/>
											</Column>
											<Column width="100px">
												<Text text="{i18n>No of Building}"/>
											</Column >
												<Column width="200px">
												<Text text="{i18n>Amount}"/>
											</Column >
										</columns>
										<items>
											<ColumnListItem>
												<cells>
											     	<Input value="{localJson>Txt}" width="80px" enabled="false"/>	
													<Input value="{localJson>MatlGroup}" width="200px" enabled="false"/>													
													<Input value="{localJson>Matdesc}" width="150px" enabled="false"/>													
                                                     <Input value="{localJson>Buildingno}" width="100px" enabled="false"/>													
													<Input value="{localJson>Amount}" width="200px" enabled="false"/>
												
												</cells>
											</ColumnListItem>
										</items>
									</Table>-->

                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>

                    </uxap:ObjectPageSection>
                    <uxap:ObjectPageSection title="{i18n>BoQs}" visible="{= ${localJson>/BoqItemSet}.length > 0}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>BoQs}">
                                <uxap:blocks>
                                    <ui:TreeTable id="TreeTableBasic"
                                        rows="{path:'localJson>/BoqItemSet', parameters: {arrayNames:['Categories']}}"
                                        selectionMode="Single" enableSelectAll="false" ariaLabelledBy="title"
                                        visibleRowCount="9">
                                        <ui:extension>
                                            <OverflowToolbar>
                                                <ToolbarSpacer />
                                                <Button text="Collapse all" press="onCollapseAll" />
                                                <Button text="Expand all" press="onExpandFirstLevel" />
                                            </OverflowToolbar>
                                        </ui:extension>
                                        <ui:columns>
                                            <ui:Column width="12rem">
                                                <Label text="Services" />
                                                <ui:template>
                                                    <Input value="{localJson>Data}" wrapping="false" enabled="false" />
                                                    <!-- <Text text="{localJson>Data}" wrapping="false" />-->
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="11rem">
                                                <Label text="Service type" />
                                                <ui:template>
                                                    <!---  <ComboBox selectedKey="{localJson>Eancat}" enabled="false"
                                      visible="{= !!${localJson>Eancat}}"
                                        items="{path: '/ValueHelpSet', 
                                      filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'SERV_TYPE'}]}">
                                      <items>
                                     <core:Item text="{IdText}" key="{IdNumber}"/>
                                      </items>
                                        
                                </ComboBox>	-->

                                                    <ComboBox items="{localJson>/Service_TYPE}" enabled="false"
                                                        visible="{= !!${localJson>Eancat}}"
                                                        selectedKey="{localJson>Eancat}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>

                                                </ui:template>
                                            </ui:Column>
                                            <!--	<Text text="{localJson>EanCat}" wrapping="false" />-->

                                            <ui:Column width="30rem">
                                                <Label text="Service Description" />
                                                <ui:template>
                                                    <!--<Text text="{localJson>LongDesc}"  wrapping="false"  />-->
                                                    <TextArea value="{localJson>LongDesc}" enabled="false" rows="{  parts: 
							[
							{path: 'localJson>Indicator'}						
							] 
							, formatter: 'com.cicre.po.model.formatter.numOfRows'}" wrapping="false" width="100%"
                                                        visible="{= !!${localJson>LongDesc}}" />
                                                </ui:template>
                                            </ui:Column>

                                            <!--	valueState="{path : 'localJson>OrderDesc', formatter : 'com.cicre.po.model.formatter.valueState'}"
				 <ui:Column width="3rem">
                        <Label text=""/>
                        <ui:template>
				
						
							<Button icon="sap-icon://attachment-text-file" size="1rem" press="onPressLongText" color="#1C4C98"
												visible="{= !!${localJson>ShortDesc}}" 
												tooltip="{i18n>LongDesc}"/> 
												 </ui:template>
                    </ui:Column>-->
                                            <ui:Column width="4rem">
                                                <Label text="UOM" />
                                                <ui:template>
                                                    <Input value="{localJson>Uom}" wrapping="false"
                                                        visible="{= !!${localJson>Uom}}" enabled="false" />

                                                </ui:template>
                                            </ui:Column>
                                            <!-- enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== 'A' ? ${localJson>EanCat} !== 'P' : false }"-->
                                            <ui:Column width="9rem">
                                                <Label text="Quantity" />
                                                <ui:template>
                                                    <!--value="{ parts:[{path:'localJson>Qty'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }" -->
                                                    <Input value="{localJson>Qty}" enabled="false" type="Number"
                                                        change="onChangeQty"
                                                        visible="{= !!${localJson>Qty} === false ? false : ${localJson>Eancat} === 'U' ? false : true }" />

                                                    <!--  visible="{= ${localJson>Qty} !== ''  &amp;&amp; ${localJson>Eancat} !== 'U' }" -->

                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="6rem">
                                                <Label text="Price" />
                                                <ui:template>
                                                    <Input value="{localJson>Price}" enabled="false"
                                                        visible="{= !!${localJson>Price}}" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="9rem">
                                                <Label text="Amount" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>PriceUnit'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        visible="{= !!${localJson>PriceUnit} === false ? false : ${localJson>Eancat} === 'U' ? false :  ${localJson>live} === 'one' ? false : true  }"
                                                        wrapping="false" enabled="false" />
                                                </ui:template>
                                            </ui:Column>
                                            <!--	
<Text text ="{path : 'localJson>PriceUnit', formatter : 'com.cicre.po.model.formatter.NumberWithCommas'}"
 <Text text="{ parts:[{path:'localJson>PriceUnit'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"-->
                                            <!--	<ui:Column width="5rem">
                        <Label text="Tolerance"/>
						 <ui:template>
							<Input value="{localJson>OvfTol}" wrapping="false"
							 visible="{= !!${localJson>OvfTol}}" type="Number" />
                        
                        </ui:template>
                    </ui:Column>-->

                                            <!--<ui:Column width="7rem">
                        <Label text="Status"/>
                        <ui:template>
							<Text text="{= ${localJson>Flag} === 'X' ?'Deleted' : ''}" wrapping="false"
							 visible="{= !!${localJson>Flag}}"/>
                        
                        </ui:template>
                    </ui:Column>-->
                                            <!--<ui:Column width="4rem">
                        <Label text="Delete"/>
                        <ui:template>
						<Button 
							 visible="{= ${localJson>Flag} === 'X' ? false : !!${localJson>Serviceno} ? true : false}" width="40px"
							type="{= ${localJson>DelInd} === 'X' ? 'Accept' : 'Reject'}"
							enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : true }"
							icon="{= ${localJson>DelInd} === 'X' ? 'sap-icon://undo' : 'sap-icon://delete'}" 
							press="onDeleteService" />			
                        
                        </ui:template>
                    </ui:Column>-->
                                        </ui:columns>
                                    </ui:TreeTable>
                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>
                    
                     <uxap:ObjectPageSection title="{i18n>PurchaseRequisition}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>PurchaseRequisition}">
                                <uxap:blocks>

                                    <core:Fragment fragmentName="com.cicre.po.view.PRfragments.TreePurchaseRequisition" type="XML"  />
                         
                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>

                    <uxap:ObjectPageSection title="{i18n>BuildingBOQList}"  visible="{= ${localJson>/myBuildingSet}.length > 0}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>BuildingBOQList}">
                                <uxap:blocks>
                                    <ui:Table id="IdBuildingTable" rows="{ path: 'localJson>/myBuildingSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }" visibleRowCount="7" selectionMode="None">
                                        <ui:toolbar>
                                            <OverflowToolbar>
                                                <content>
                                                    <Title text="{i18n>BuildingBOQList} " level="H2" />
                                                    <Text text="({localJson>/BuildingNO})"></Text>
                                                    <ToolbarSpacer />

                                                </content>
                                            </OverflowToolbar>
                                        </ui:toolbar>
                                        <ui:columns>
                                            <ui:Column width="100px" autoResizable="true">
                                                <Label text="{i18n>ContractualIndicator}" />
                                                <ui:template>
                                                    <Text text="{localJson>Txt}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="105px" autoResizable="true">
                                                <Label text="{i18n>Building}" />
                                                <ui:template>
                                                    <Text text="{localJson>BuildingNo}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="107px" autoResizable="true">
                                                <Label text="{i18n>Zone}" />
                                                <ui:template>
                                                    <Text text="{localJson>Project}"></Text>

                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>Group}" />
                                                <ui:template>
                                                    <Text text="{localJson>Zzgroup}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>Model}" />
                                                <ui:template>
                                                    <Text text="{localJson>Model}"></Text>

                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Description}" />
                                                <ui:template>
                                                    <Text text="{localJson>ModelDesc}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>Boq}" />
                                                <ui:template>
                                                    <Text text="{localJson>Group}"></Text>
                                                </ui:template>
                                            </ui:Column>


                                            <ui:Column width="250px" autoResizable="true">
                                                <Label text="{i18n>Description}" />
                                                <ui:template>
                                                    <Text text="{localJson>BoqDesc}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="170px" autoResizable="true">
                                                <Label text="{i18n>Status}" />
                                                <ui:template>
                                                    <ComboBox items="{localJson>/STATUSBoqlist}" enabled="false"
                                                        selectedKey="{localJson>SrvStatus}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="60px" autoResizable="true">

                                                <ui:template>
                                                    <Button width="40px"
                                                        type="{= ${localJson>DelInd} === 'X' ? 'Accept' : 'Reject'}"
                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== 'A' }"
                                                        icon="{= ${localJson>DelInd} === 'X' ? 'sap-icon://undo' : 'sap-icon://delete'}"
                                                        press="onDeleteBuilding" />
                                                </ui:template>
                                            </ui:Column>
                                        </ui:columns>

                                    </ui:Table>

                                    <ui:Table id="IdBuildingTable_copy" rows="{ path: 'localJson>/copymyBuildingSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }" visibleRowCount="5" selectionMode="None" visible="false">
                                        <ui:toolbar>
                                            <OverflowToolbar>
                                                <content>
                                                    <Title text="{i18n>BuildingBOQList} " level="H2" />
                                                    <Text text="({localJson>/BuildingNO})"></Text>
                                                    <ToolbarSpacer />

                                                </content>
                                            </OverflowToolbar>
                                        </ui:toolbar>
                                        <ui:columns>
                                            <ui:Column width="100px" autoResizable="true">
                                                <Label text="{i18n>ContractualIndicator}" />
                                                <ui:template>
                                                    <Text text="{localJson>Txt}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="105px" autoResizable="true">
                                                <Label text="{i18n>Building}" />
                                                <ui:template>
                                                    <Text text="{localJson>BuildingNo}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="107px" autoResizable="true">
                                                <Label text="{i18n>Zone}" />
                                                <ui:template>
                                                    <Text text="{localJson>Project}"></Text>

                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>Group}" />
                                                <ui:template>
                                                    <Text text="{localJson>Zzgroup}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>Model}" />
                                                <ui:template>
                                                    <Text text="{localJson>Model}"></Text>

                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Description}" />
                                                <ui:template>
                                                    <Text text="{localJson>ModelDesc}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="70px" autoResizable="true">
                                                <Label text="{i18n>Boq}" />
                                                <ui:template>
                                                    <Text text="{localJson>Group}"></Text>
                                                </ui:template>
                                            </ui:Column>


                                            <ui:Column width="250px" autoResizable="true">
                                                <Label text="{i18n>Description}" />
                                                <ui:template>
                                                    <Text text="{localJson>BoqDesc}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="170px" autoResizable="true">
                                                <Label text="{i18n>Status}" />
                                                <ui:template>
                                                    <ComboBox items="{localJson>/STATUSBoqlist}" enabled="false"
                                                        selectedKey="{localJson>SrvStatus}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="60px" autoResizable="true">

                                                <ui:template>
                                                    <Button width="40px"
                                                        type="{= ${localJson>DelInd} === 'X' ? 'Accept' : 'Reject'}"
                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== 'A' }"
                                                        icon="{= ${localJson>DelInd} === 'X' ? 'sap-icon://undo' : 'sap-icon://delete'}"
                                                        press="onDeleteBuilding" />
                                                </ui:template>
                                            </ui:Column>
                                        </ui:columns>

                                    </ui:Table>

              
                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>
                    <uxap:ObjectPageSection title="{i18n>GeneralBOQList}"  visible="{= ${localJson>/myWBSSet}.length > 0}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>GeneralBOQList}">
                                <uxap:blocks>
                                    <ui:Table id="IdWBSTable" rows="{ path: 'localJson>/myWBSSet',
									 sorter : {
                                     path : 'sortNum' }
                                                 }" visibleRowCount="5" selectionMode="None">

                                        <ui:toolbar>
                                            <OverflowToolbar>
                                                <content>
                                                    <Title text="{i18n>GeneralBOQList} " level="H2" />
                                                    <Text text="({localJson>/WbslistNo})"></Text>
                                                    <ToolbarSpacer />

                                                </content>
                                            </OverflowToolbar>
                                        </ui:toolbar>
                                        <ui:columns>
                                            <ui:Column width="140px" autoResizable="true">
                                                <Label text="{i18n>ContractualIndicator}" />
                                                <ui:template>
                                                    <Text text="{localJson>Txt}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>Building}" />
                                                <ui:template>
                                                    <Text text="{localJson>Model}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                                    <ui:Column width="185px" autoResizable="true">
                                                <Label text="{i18n>WBSCODE}" />
                                                <ui:template>
                                                    <Text text="{localJson>WbsCode}" />

                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="190px" autoResizable="true">
                                                <Label text="{i18n>WBSDescription}" />
                                                <ui:template>
                                                    <Text text="{localJson>IdText}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="55px" autoResizable="true">
                                                <Label text="{i18n>Boq}" />
                                                <ui:template>
                                                    <Text text="{localJson>Group}"></Text>
                                                </ui:template>
                                            </ui:Column>


                                            <ui:Column width="280px" autoResizable="true">
                                                <Label text="{i18n>BOQDescription}" />
                                                <ui:template>
                                                    <Text text="{localJson>BoqDesc}"></Text>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="162px" autoResizable="true">
                                                <Label text="{i18n>Status}" />
                                                <ui:template>
                                                    <ComboBox items="{localJson>/STATUSBoqlist}" enabled="false"
                                                        selectedKey="{localJson>SrvStatus}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="60px" autoResizable="true">

                                                <ui:template>

                                                    <Button width="40px"
                                                        type="{= ${localJson>DelInd} === 'X' ? 'Accept' : 'Reject'}"
                                                        enabled="{= ${localJson>/editMode} === false ? false :  ${localJson>/estimatedMode} === true ? false : ${localJson>SrvStatus} !== 'A' }"
                                                        icon="{= ${localJson>DelInd} === 'X' ? 'sap-icon://undo' : 'sap-icon://delete'}"
                                                        press="onDeleteWBS" />
                                                </ui:template>
                                            </ui:Column>



                                        </ui:columns>

                                    </ui:Table>


                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>
                    
                    

                       <uxap:ObjectPageSection titleUppercase="false" title="{i18n>PurchaseRequisitionList}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>PurchaseRequisitionList}">

                           <uxap:blocks>
                             
                               <core:Fragment fragmentName="com.cicre.po.view.PRfragments.PurchaseRequisition" type="XML"  />

                           </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>

                    <uxap:ObjectPageSection title="{i18n>VariationOrder}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>VariationOrder}">
                                <uxap:blocks>
                                    <ui:Table id="VariationOrderTable" visible="true"
                                        rows="{ path: 'localJson>/HeadToHeadVariation',filters: [{path: 'OrderType', operator: 'EQ', value1: 'V'}] }"
                                        visibleRowCount="5" selectionMode="None">
                                        <ui:extension>
                                            <OverflowToolbar>
                                                <ToolbarSpacer />
                                                <Button type="Accept" icon="sap-icon://add" press="handlevariationOrder"
                                                    enabled="{= ${localJso>/VariationMode} === false ? false : ${localJson>/editMode} === false ? false : ${localJson>/PurchDoc} !== ''}" />
                                                <!--${localJson>/PurchDoc} !== ''-->

                                            </OverflowToolbar>
                                        </ui:extension>
                                        <!--enabled="{= ${localJson>Status} === 'R' ? false : true}"-->
                                        <ui:columns>
                                            <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>VariationOrder}" />
                                                <ui:template>
                                                    <Input value="{localJson>UserOrder}" id="id_VariationOrder"
                                                        type="Number"
                                                        enabled="{= ${localJson>OrderNo} !== '' ? false : true}"
                                                        change="handelValuseUserOrder"
                                                        valueState="{path : 'localJson>OrderDesc', formatter : 'com.cicre.po.model.formatter.valueState'}" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Description}" />
                                                <ui:template>
                                                    <Input value="{localJson>OrderDesc}" id="id_Description"
                                                        enabled="{= ${localJson>OrderNo} !== '' ? false : true}"
                                                        valueState="{path : 'localJson>OrderDesc', formatter : 'com.cicre.po.model.formatter.valueState'}" />
                                                    <!-- valueState="{path : 'localJson>OrderDesc', formatter : 'com.cicre.po.model.formatter.authXBoolean'}"
										 valueState="Error"-->
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Type}" />
                                                <ui:template>
                                                    <!--id="idOrdTyp"-->
                                                    <ComboBox selectedKey="{localJson>Type}"
                                                        change="handleChangeOrderType"
                                                         enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }"
                                                         items="{path: '/ValueHelpSet', filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'OrdType'}]}">
                                                        <items>
                                                            <core:Item text="{IdText}" key="{IdNumber}" />
                                                        </items>
                                                    </ComboBox>
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Date}" />
                                                <ui:template>
                                                    <!--change="loaddatevariation"-->

                                                    <DatePicker   enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }"
                                                        value="{path:'localJson>OrderDate', formatter: '.formatter.formatDate'}" change="onChangeind"
                                                        displayFormat="dd-MM-yyyy" valueFormat="yyyy-MM-dd" />

                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="200px" autoResizable="true">
                                                <Label text="{i18n>Month}" />
                                                <ui:template>

                                                    <MultiComboBox  items="{localJson>/IndexMonths}" change="onChangeind"
                                                         enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }"
                                                        selectedKeys="{localJson>MonthIndex}">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </MultiComboBox>


                                                    <!--<MultiComboBox 
										 enabled="{= ${localJson>OrderNo} !== '' ? false : true}"
                                            items="{path: '/ValueHelpSet', 
											
								            filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'MONTHS'}]}"	
											selectedKeys="{localJson>MonthIndex}"
										 > 
                                        <items>
                                            <core:Item text="{IdText}" key="{IdNumber}"/>
                                        </items>
							               </MultiComboBox>	-->

                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="130px" autoResizable="true">
                                                <Label text="{i18n>Add}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>AddValues'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        id="id_Add" enabled="false" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="130px" autoResizable="true">
                                                <Label text="{i18n>Omission}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>OmissionValues'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        id="id_Omission" enabled="false" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="130px" autoResizable="true">
                                                <Label text="{i18n>Amount}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>ChangeAmount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        id="id_Amount" enabled="false" />
                                                </ui:template>
                                            </ui:Column>
                                                   <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>NoofMonth}" />
                                                <ui:template>
                                                    <Input value="{localJson>MonthNo}" 
                                                        type="Number"  change="oncalculatVariationOrder"
                                                          enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }" />
                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>NoofDay}" />
                                                <ui:template>
                                                    <Input value="{localJson>DaysNo}" id="id_NoOfDay" type="Number" change="oncalculatVariationOrder"
                                                          enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }" />
                                                </ui:template>
                                            </ui:Column>
                                            <!--	<ui:Column width="120px" autoResizable="true"  >
										<Label text="{i18n>Action}" />
										<ui:template>
										<ComboBox id="idOrdT" items="{localJson>/VAction}" enabled="{= ${localJson>Status} === 'R' ? false : true}" 
										selectedKey="{localJson>Action}"  change="handleChange" > 
                                        <items>
                                            <core:Item text="{localJson>text}" key="{localJson>id}"/>
                                        </items>
							           </ComboBox>
										</ui:template>
						            	</ui:Column>-->
                                            <ui:Column width="120px" autoResizable="true">
                                                <Label text="{i18n>Status}" />
                                                <ui:template>
                                                    <ComboBox id="idCmboo" items="{localJson>/VStatus}" enabled="false"
                                                        selectedKey="{localJson>Status}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>

                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>Release}" />
                                                <ui:template>
                                                    <Button press="onReleaseVeriation" text="Confirm"
                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="75px" autoResizable="true">
                                                <Label text="{i18n>Cancel}" />
                                                <ui:template>
                                                    <Button press="onCancleVeriation" text="Cancel"
                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} === 'R' ? ${localJson>VarStatus} !== 'R' :  false }" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="41px" autoResizable="true">
                                                <ui:template>
                                                    <Button icon="sap-icon://detail-view"
                                                        press="onPressVariationOrder" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="41px" autoResizable="true">
                                                <ui:template>
                                                    <Button icon="sap-icon://detail-view"
                                                        press="onPressVariationOrdersrv" />
                                                </ui:template>
                                            </ui:Column>

                                        </ui:columns>
                                    </ui:Table>

                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>

                    <!--Addendum-->

                    <uxap:ObjectPageSection title="{i18n>Addendum}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection title="{i18n>Addendum}">
                                <uxap:blocks>
                                    <ui:Table id="AddendumTable" visible="true"
                                        rows="{ path: 'localJson>/HeadToHeadVariation',filters: [{path: 'OrderType', operator: 'EQ', value1: 'A'}] }"
                                        visibleRowCount="5" selectionMode="None">
                                        <ui:extension>
                                            <OverflowToolbar>
                                                <ToolbarSpacer />
                                                <!--${localJson>/PurchDoc} !== ''-->

                                                <Button type="Accept" icon="sap-icon://add" press="handdAdendum"
                                                    enabled="{= ${localJso>/VariationMode} === false ? false : ${localJson>/editMode} === false ? false : ${localJson>/PurchDoc} !== ''}" />
                                            </OverflowToolbar>
                                        </ui:extension>
                                        <ui:columns>
                                            <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>AddendumOrder}" />
                                                <ui:template>
                                                    <Input value="{localJson>UserOrder}" id="id_Addendum" type="Number"
                                                        change="handelValuseUserOrder"
                                                        enabled="{= ${localJson>OrderNo} !== '' ? false : true}"
                                                        valueState="{path : 'localJson>OrderDesc', formatter : 'com.cicre.po.model.formatter.valueState'}" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Description}" />
                                                <ui:template>
                                                    <Input value="{localJson>OrderDesc}" id="id_AddendumDescription"
                                                        enabled="{= ${localJson>OrderNo} !== '' ? false : true}"
                                                        valueState="{path : 'localJson>OrderDesc', formatter : 'com.cicre.po.model.formatter.valueState'}" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Type}" />
                                                <ui:template>
                                                    <!-- id="id_AddendumOrdTyp"-->
                                                    <ComboBox selectedKey="{localJson>Type}"
                                                        change="handleChangeOrderTypeA"
                                                         enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }"
                                                        items="{path: '/ValueHelpSet',filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'OrdType'}]}">
                                                        <items>
                                                            <core:Item text="{IdText}" key="{IdNumber}" />
                                                        </items>
                                                    </ComboBox>
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="150px" autoResizable="true">
                                                <Label text="{i18n>Date}" />
                                                <ui:template>


                                                    <DatePicker   enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }"
                                                        value="{path:'localJson>OrderDate', formatter: '.formatter.formatDate'}" change="onChangeind"
                                                        displayFormat="dd-MM-yyyy" valueFormat="yyyy-MM-dd" />

                                                    <!--<DatePicker id="id_AddendumDate" 
														enabled="{= ${localJson>OrderNo} !== '' ? false : true}"
														
						                               	 value="{path:'localJson>OrderDate',type:'sap.ui.model.type.Date', formatOptions:{pattern :'yyyy-MM-dd' }}"
							                             displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" 
							                              />-->
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="200px" autoResizable="true">
                                                <Label text="{i18n>Month}" />
                                                <ui:template>


                                                    <MultiComboBox
                                                         enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }" items="{path: '/ValueHelpSet', 
								            filters: [{path: 'ValueHelpType', operator: 'EQ', value1: 'MONTHS'}]}"
                                                        selectedKeys="{localJson>MonthIndex}" change="onChangeind">
                                                        <items>
                                                            <core:Item text="{IdText}" key="{IdNumber}" />
                                                        </items>
                                                    </MultiComboBox>
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="130px" autoResizable="true">
                                                <Label text="{i18n>Add}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>AddValues'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        id="id_AddAddendum" enabled="false" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="130px" autoResizable="true">
                                                <Label text="{i18n>Omission}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>OmissionValues'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        id="id_OmissionAddendum" enabled="false" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="130px" autoResizable="true">
                                                <Label text="{i18n>Amount}" />
                                                <ui:template>
                                                    <Input
                                                        value="{ parts:[{path:'localJson>ChangeAmount'},{path:'localJson>/Currency'}], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }"
                                                        id="id_AmountAddendum" enabled="false" />
                                                </ui:template>
                                            </ui:Column>
                                                 <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>NoofMonth}" />
                                                <ui:template>
                                                    <Input value="{localJson>MonthNo}" 
                                                        type="Number"  change="oncalculatVariationOrder"
                                                          enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>NoofDay}" />
                                                <ui:template>
                                                    <Input value="{localJson>DaysNo}" id="id_NoOfDayAddendum"  change="oncalculatVariationOrder"
                                                        type="Number"
                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }"/>
                                                </ui:template>
                                            </ui:Column>
                                          
                                            <ui:Column width="120px" autoResizable="true">
                                                <Label text="{i18n>Status}" />
                                                <ui:template>
                                                    <ComboBox items="{localJson>/VStatus}" enabled="false"
                                                        selectedKey="{localJson>Status}" change="hanleChane">
                                                        <items>
                                                            <core:Item text="{localJson>text}" key="{localJson>id}" />
                                                        </items>
                                                    </ComboBox>

                                                </ui:template>
                                            </ui:Column>

                                            <ui:Column width="80px" autoResizable="true">
                                                <Label text="{i18n>Release}" />
                                                <ui:template>
                                                    <Button press="onReleaseVeriation" text="Confirm"
                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} !== 'R' }" />
                                                </ui:template>
                                            </ui:Column>
                                            <ui:Column width="75px" autoResizable="true">
                                                <Label text="{i18n>Cancel}" />
                                                <ui:template>
                                                    <Button press="onCancleVeriation" text="Cancel"
                                                        enabled="{= ${localJson>/editMode} === false ? false : ${localJson>Status} === 'R' ? ${localJson>VarStatus} !== 'R' :  false }" />
                                                </ui:template>
                                            </ui:Column>

                                            <!--<ui:Column width="120px" autoResizable="true"  >
										<Label text="{i18n>Action}" />
										<ui:template>
                                     
										<ComboBox	id="idComboBoAddendum" items="{localJson>/VAction}" enabled="{= ${localJson>Status} === 'R' ? false : true}" 
										selectedKey="{localJson>Action}"  change="handleChangeA"> 
                                        <items>
                                            <core:Item text="{localJson>text}" key="{localJson>id}"/>
                                        </items>
							           </ComboBox>								</ui:template>
						            	</ui:Column>-->
                                            <!--<ui:Column width="120px" autoResizable="true"  >
										<Label text="{i18n>Status}" />
										<ui:template>

										<ComboBox 		id="idCmbooAddendum" items="{localJson>/VStatus}" enabled="false"  
										selectedKey="{localJson>Action}"  change="hanleChane" > 
                                        <items>
                                            <core:Item text="{localJson>text}" key="{localJson>id}"/>
                                        </items>
							           </ComboBox>
                                         </ui:template>
						            	</ui:Column>-->
                                            <ui:Column width="41px" autoResizable="true">

                                                <ui:template>
                                                    <Button icon="sap-icon://detail-view"
                                                        press="onPressAddendumOrder" />
                                                </ui:template>
                                            </ui:Column>

                                        </ui:columns>
                                    </ui:Table>

                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>

                    
                           		<!--الملاحظات -->
				<uxap:ObjectPageSection titleUppercase="false" title ="{i18n>Note}" >
					<uxap:subSections>
						<uxap:ObjectPageSubSection>
							<TextArea  value="{localJson>/ContractPONoteSet/NoteText}"    enabled="{localJson>/editMode}" change="onChangeNote" rows='4'  width="100%"/>	
						</uxap:ObjectPageSubSection>
					</uxap:subSections>
				</uxap:ObjectPageSection>

                    <uxap:ObjectPageSection title="{i18n>attachmentName}">
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection>
                                <!--<l:VerticalLayout>-->
                                <List items="{localJson>/AttachmentSet}" delete="onAttachmentDelete">
                                    <headerToolbar>
                                        <Toolbar>
                                            <ToolbarSpacer />
                                            <Button icon="sap-icon://delete" type="Reject"
                                                tooltip="{i18n>attachmentDelete}" press="onListDeletePress"
                                                enabled="{localJson>/editMode}" />
                                            <Button icon="sap-icon://add" type="Accept" tooltip="{i18n>attachmentAdd}"
                                                press="handleAddAttachmentPress" enabled="{localJson>/editMode}" />
                                        </Toolbar>
                                    </headerToolbar>
                                    <items>
                                        <StandardListItem visible="{= ${localJson>Flag} !== 'D'}"
                                            icon="sap-icon://document"
                                            title="{localJson>Filename}.{localJson>Extension}" type="Active"
                                            press="_onAttachmentItemPress" />
                                    </items>
                                </List>
                                <!--</l:VerticalLayout>-->
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>

                            <uxap:ObjectPageSection title="{i18n>displayProcessFlow}" visible="false" >
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection>

                            	<layout:VerticalLayout>
							<layout:HorizontalLayout>
								<Label text="{i18n>displaySelectContractType}" class="sapUiSmallMarginEnd"/>
								<Select change="onChangeWFContractType"  id="idselectionType" selectedKey="{localJson>/Actiontype}" items="{path: 'localJson>/Action_TYPE', templateShareable: false}">
									<core:Item key="{localJson>OrderText}" text="{localJson>WfText}"/>
								</Select>
							</layout:HorizontalLayout>
							<HBox renderType="Bare">
								<Button text="{i18n>displayZoomIn}" press="onZoomIn"/>
								<Button text="{i18n>displayZoomOut}" press="onZoomOut"/>
							</HBox>
							<FlexBox width="1170px" renderType="Bare">
								<commons:ProcessFlow id="idDisplayProcessFlow" foldedCorners="true" nodePress="onNodePress" nodes="{localJson>/nodes}"
									lanes="{localJson>/lanes}">
									<commons:nodes>
										<commons:ProcessFlowNode laneId="{localJson>laneId}" nodeId="{localJson>nodeId}" title="{localJson>title}"
											titleAbbreviation="{localJson>titleAbbreviation}" children="{localJson>children}" state="{localJson>state}"
											stateText="{localJson>stateText}" texts="{localJson>texts}" focused="{localJson>focused}" highlighted="{localJson>highlighted}"/>
									</commons:nodes>
									<commons:lanes>
										<commons:ProcessFlowLaneHeader laneId="{localJson>laneId}" state="{localJson>state}" iconSrc="{localJson>iconSrc}" text="{localJson>text}"
											position="{localJson>position}"/>
									</commons:lanes>
								</commons:ProcessFlow>
							</FlexBox>
						</layout:VerticalLayout>


                             
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>

                         <uxap:ObjectPageSection titleUppercase="false" title ="{i18n>displayReferences}" 
                        
                            visible="{= ${localJson>/TempStatus} === 'Released' }">
          <uxap:subSections>
          <uxap:ObjectPageSubSection>
	<layout:HorizontalLayout>

           <GenericTile    class="sapUiTinyMarginBegin sapUiTinyMarginTop" header="{i18n>ContractTerms}" subheader="{localJson>/PurchDoc}-{localJson>/Version}"
								press="onPressContractTermsTile" >
								<tileContent>
									<TileContent>
										<ImageContent src="sap-icon://sales-document"/>
									</TileContent>
								</tileContent>
							</GenericTile>
	</layout:HorizontalLayout>
       </uxap:ObjectPageSubSection>
          </uxap:subSections>
        </uxap:ObjectPageSection>

                </uxap:sections>
            </uxap:ObjectPageLayout>
        </content>
        <footer>
            <Toolbar>
                <content>
                    <Button icon="sap-icon://message-popup"
                        enabled="{= ${localJson>/ReleaseStatus} === 'IN' ? false : true}"
                        text="{localJson>/MessagesLength}" type="Reject" press="onPressMessagePopover" />
                    <ToolbarSpacer />
                    <ToolbarSpacer />
                    <!-- <Button text="{i18n>Approve}" visible="{= ${inboxModel>/InboxStatus} === 'STARTED'}" 
					enabled="{= ${inboxModel>/InboxStatus} === 'STARTED'}" type="Accept"
					press="onPressAction" id="idAccept"/>
					<Button text="{i18n>Reject}" visible="{= ${inboxModel>/InboxStatus} === 'STARTED'}"
					enabled="{= ${inboxModel>/InboxStatus} === 'STARTED'}" type="Reject"
					press="onPressAction" id="idReject"/> -->

                   <!--- <Button type="Transparent" icon="sap-icon://edit" id="idEditTermsBtn" press="onEditPress"
                        text="{i18n>Edit}" visible="{= (${localJson>/editMode} === false ? true : false ) &amp;&amp; ${localJson>/Overviewstatus}=== 'APPROVED'  || ${localJson>/Overviewstatus}=== 'REJECTED' || ${localJson>/Overviewstatus}=== 'CREATED'}"
                        enabled="{= ${localJson>/ReleaseStatus} === 'IN' ? false : true }" />-->

                    <Button type="Transparent" icon="sap-icon://edit" id="idEditTermsBtn" press="onEditPress"
                        text="{i18n>Edit}" visible="{= ( ${localJson>/editMode} === false ? true : false)  &amp;&amp; ${localJson>/Edit} }"
                        enabled="{= ${localJson>/ReleaseStatus} === 'IN' ? false : true}" />

                    <Button type="Reject" icon= "sap-icon://delete" id="idDeteteContract" visible="{localJson>/editMode}"
                        press="onActivatePO" text="{i18n>Delete}" enabled="{= ${localJson>/PurchDoc} === '' ? true : false}"/>

                    <Button type="Accept" icon="sap-icon://save" id="idSaveTermsBtn" visible="{localJson>/editMode}"
                        press="onSave" text="{i18n>Save}" />

                    <Button type="Transparent" icon="sap-icon://cancel" id="idCancelTermsBtn" press="onCancelPress"
                        text="{i18n>Cancel}" visible="{localJson>/editMode}" />

                            <Button type="Emphasized" icon="sap-icon://accept" id="idSubmitTermsBtn" press="onActivatePO"
                        enabled="{= ${localJson>/ReleaseedMode} === true ? ${localJson>/ReleaseStatus} !== 'IN' : false}"
                        text="{i18n>Release}" visible="{= ${localJson>/editMode} === false ? ${localJson>/AuthInd} === 'X' : false}" />

                  <!---  <Button type="Emphasized" icon="sap-icon://accept" id="idSubmitTermsBtn" press="onActivateReleaseedPO"
                        enabled="{= ${localJson>/ReleaseedMode} === true ? ${localJson>/ReleaseStatus} !== 'IN' : false}"
                        text="{i18n>Release}" visible="{= (${localJson>/editMode} === false ? ${localJson>/AuthInd} === 'X' : false ) &amp;&amp;( ${localJson>/Overviewstatus}=== 'APPROVED'  || ${localJson>/Overviewstatus}=== 'REJECTED' || ${localJson>/Overviewstatus}=== 'CREATED' )}" />
                         <Button type="Accept" text="{i18n>Aprove}"  visible="{= ${localJson>/Userstatus}=== 'STARTED'}" press="onActivatePO" id="idAprove" />
                         <Button type="Reject" text="{i18n>reject}" visible="{= ${localJson>/Userstatus}=== 'STARTED'}"  press="onActivatePO" id="idreject" />-->
                </content>
            </Toolbar>
        </footer>
    </Page>

</mvc:View>